{{ $context := .context }}
{{ $endpoint := .endpoint }}
{{ $securitySchemes := .securitySchemes }}
{{ $tag := .tag }}

{{ $authZ := slice }}
{{ range $endpoint.action.security }}
  {{ range $sec_key, $sec_val := . }}
    {{ if eq $sec_key "AuthZ" }}
      {{ $authZ = . }}
    {{ end }}
  {{ end }}
{{ end }}

{{ with $authZ }}
<h3 class="mb-2">Scopes</h3>
<p><a href="{{ "api/latest/scopes/" | absLangURL }}#{{ $tag.name | humanize | lower }}">View all {{ $tag.name | lower }} scopes</a></p>
<h4 class="text-capitalize">Required Scopes</h4>
<div class=" schema-table row">
    <div class="col-12">
      <div class="row table-header">
        <div class="col-4 column">
          <p class="font-semibold">{{ i18n "name" }}</p>
        </div>
        <div class="col-6 column">
          <p class="font-semibold">{{ i18n "description" }}</p>
        </div>
      </div>

      {{ range . }}
          <div class="row ">
              <div class="col-12 first-column">
              <div class="row first-row ">
                  <div class="col-4 column">
                      <p>{{ . }}</p>
                  </div>
                  <div class="col-6 column">
                      <p>{{ (index $securitySchemes.AuthZ.flows.authorizationCode.scopes .) }}</p>
                  </div>
              </div>
              </div>
          </div>
      {{ end }}

    </div>
</div>
{{ end }}
