{{- if eq hugo.Environment "development" -}}
    {{ $.Scratch.Add "algoliaindex" slice }}
    {{ $section := $.Site.GetPage "section" .Section }}
    {{ $hugo_context := . }}

    

    {{- /* api pages are controlled by layout and not markdown, so we need to index them */ -}}
    {{ partial "algolia/api-pages-index.json" (dict "context" $hugo_context) }}

    {{- /* Outputs final JSON object, copied to public/ folder. */ -}}
    {{- $.Scratch.Get "algoliaindex" | jsonify -}}
{{- end -}}