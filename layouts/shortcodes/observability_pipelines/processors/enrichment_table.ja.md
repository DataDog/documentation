このプロセッサーを使用すると、ローカルファイルやデータベースなどのリファレンステーブルから情報を取得し、ログをエンリッチできます。

Enrichment table プロセッサーをセットアップするには、次の手順に従います。

1. **フィルタークエリ**を定義します。指定された[フィルタークエリ](#filter-query-syntax)に一致するログのみが処理されます。フィルタークエリに一致するかどうかにかかわらず、すべてのログはパイプラインの次のステップに送られます。
2. ログのソース属性を入力します。ソース属性の値は、リファレンステーブルで検索する内容です。
3. ターゲット属性を入力します。ターゲット属性の値は、リファレンステーブルで見つかった情報を JSON オブジェクトとして格納します。
4. 使用するリファレンステーブルのタイプ (**File** または **GeoIP**) を選択します。
   - **File** タイプの場合:
     1. ファイルパスを入力します。
     1. 列名を入力します。エンリッチメントテーブルの列名は、ソース属性値の照合に使用されます。[エンリッチメントファイルの例](#enrichment-file-example)を参照してください。
   - **GeoIP** タイプの場合、GeoIP のパスを入力します。

##### エンリッチメントファイルの例

この例では、`merchant_id` をソース属性、`merchant_info` をターゲット属性として使用します。

エンリッチメントプロセッサーが使用するリファレンステーブルの例は次のとおりです。

| merch_id | merchant_name   | city      | state    |
| -------- | --------------- | --------- | -------- |
| 803      | Andy's Ottomans | Boise     | Idaho    |
| 536      | Cindy's Couches | Boulder   | Colorado |
| 235      | Debra's Benches | Las Vegas | Nevada   |

`merch_id` は、プロセッサーがソース属性の値を見つけるために使用する列名として設定されています。**注**: ソース属性の値は列名と一致している必要はありません。

エンリッチメントプロセッサーが `"merchant_id":"536"` を含むログを受信した場合:

- このプロセッサーはリファレンステーブルの `merch_id` 列で値 `536` を探します。
- 値が見つかると、リファレンステーブルからその行のすべての情報を JSON オブジェクトとして `merchant_info` 属性に追加します。

```
merchant_info {
    "merchant_name":"Cindy's Couches",
    "city":"Boulder",
    "state":"Colorado"
}
```