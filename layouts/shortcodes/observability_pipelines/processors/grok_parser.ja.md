このプロセッサーは、複数のソースに対応する grok パースルールを使用してログを解析します。ルールはログソースに基づいて自動的にログに適用されます。したがって、ログにはソース名を含む `source` フィールドが必要です。ログが Observability Pipelines Worker に送信される際にこのフィールドが追加されていない場合は、**Add field** プロセッサーを使用して追加することができます。

ログの `source` フィールドが grok パースルールセットの 1 つに一致する場合、ログの `message` フィールドはそれらのルールに基づいてチェックされます。ルールが一致した場合、解析されたデータは JSON オブジェクトとして `message` フィールドに追加され、元の `message` を上書きします。

ログに `source` フィールドが存在しない、あるいはログ `message` がどのルールにも一致しない場合は、ログに変更は加えられず、パイプラインの次のステップに送信されます。


grok パーサーをセットアップするには、**フィルタークエリ**を定義します。指定された[フィルタークエリ](#filter-query-syntax)に一致するログのみが処理されます。フィルタークエリに一致するかどうかにかかわらず、すべてのログはパイプラインの次のステップに送られます。

標準のルールに対してログサンプルをテストするには、次の手順に従います。
1. [**Preview Library Rules**] ボタンをクリックします。
1. ドロップダウンメニューでソースを検索または選択します。
1. ログサンプルを入力して、そのソースに対してパースルールをテストします。

カスタムパースルールを追加するには、次の手順に従います。

1. [**Add Custom Rule**] をクリックします。
1. ライブラリルールを複製する場合は、[**Clone library rule**] を選択し、ドロップダウンメニューからライブラリソースを選択します。
1. カスタムルールを作成する場合は、[**Custom**] を選択してから、`source` を入力します。パースルールは、その `source` が含まれているログに適用されます。
1. ログサンプルを入力して、パースルールをテストします。
1. ログ解析のルールを入力します。パースルールの記述方法については、[Parsing][10031]を参照してください。<br>**注**: `url`、`useragent`、`csv` フィルターは利用できません。
1. ヘルパールールを追加する場合は、[**Advanced Settings**] をクリックします。詳細については、[Using helper rules to factorize multiple parsing rules][10032]を参照してください。
1. [**Add Rule**] をクリックします。

[10031]: /logs/log_configuration/parsing/
[10032]: /logs/log_configuration/parsing/?tab=matchers#using-helper-rules-to-factorize-multiple-parsing-rules
