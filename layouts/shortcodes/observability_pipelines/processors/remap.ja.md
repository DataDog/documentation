Remap プロセッサーは、個々のログデータ内のフィールドを追加、削除、リネームできます。このプロセッサーを使用すると、ログに追加のコンテキストを付与し、容量を減らすために価値の低いフィールドを削除し、重要な属性全体で命名を標準化できます。最初にドロップダウンメニューから、[**add field**]、[**drop field**]、または [**rename field**] を選択します。

##### フィールドの追加
**add field** を使用して、ログに新しいキー値フィールドを追加します。

add field プロセッサーをセットアップするには、次の手順に従います。

1. **フィルタークエリ**を定義します。指定された[フィルタークエリ](#filter-query-syntax)に一致するログのみが処理されます。フィルタークエリに一致するかどうかにかかわらず、すべてのログはパイプラインの次のステップに送られます。
2. 追加するフィールドと値を入力します。キーにネストされたフィールドを指定するには、次の[パス表記](#path-notation-example-remap)を使用します: `<OUTER_FIELD>.<INNER_FIELD>`。すべての値は文字列として保存されます。**注**: 追加するフィールドがすでに存在している場合、Worker はエラーをスローし、既存のフィールドは変更されません。

##### フィールドの削除

[**drop field**] を使用して、指定するフィルターに一致するフィールドをログデータから削除します。オブジェクトを削除できるので、ネストされたキーを削除する場合にもこのプロセッサーを使用できます。

drop field プロセッサーを設定するには、次の手順に従います。
1. **フィルタークエリ**を定義します。指定された[フィルタークエリ](#filter-query-syntax)に一致するログのみが処理されます。フィルタークエリに一致するかどうかにかかわらず、すべてのログはパイプラインの次のステップに送られます。
1. 削除するフィールドのキーを入力します。指定したキーのネストされたフィールドを指定するには、次の[パス表記](#path-notation-example-remap)を使用します: `<OUTER_FIELD>.<INNER_FIELD>`。
    **注**: 指定したキーが存在しない場合、ログには影響しません。

##### フィールドのリネーム

**rename field** を使用して、ログ内のフィールドをリネームします。

rename field プロセッサーをセットアップするには、次の手順に従います。

1. **フィルタークエリ**を定義します。指定された[フィルタークエリ](#filter-query-syntax)に一致するログのみが処理されます。フィルタークエリに一致するかどうかにかかわらず、すべてのログはパイプラインの次のステップに送られます。
2. [**Source field**] にリネームするフィールドを入力します。キーのネストされたフィールドを指定するには、次の[パス表記](#path-notation-example-remap)を使用します: `<OUTER_FIELD>.<INNER_FIELD>`。リネームが完了すると、後述の [**Preserve source tag**] チェックボックスを有効にしていない限り、元のフィールドは削除されます。<br>**注**: 指定したソースキーが存在しない場合、デフォルトの `null` 値がターゲットに適用されます。
3. [**Target field**] に、ソースフィールドのリネーム後の名前を入力ます。指定したキーのネストされたフィールドを指定するには、次の[パス表記](#path-notation-example-remap)を使用します: `<OUTER_FIELD>.<INNER_FIELD>`。<br>**注**：指定したターゲットフィールドがすでに存在する場合、Worker はエラーをスローし、既存のターゲットフィールドを上書きしません。
4. 必要に応じて、元のソースフィールドを維持し、ソースキーの情報を指定したターゲットキーに複製する場合には、**Preserve source tag** ボックスをオンにします。このボックスがオンになっていない場合、ソースキーはリネーム後に削除されます。

##### パス表記の例 {#path-notation-example-remap}

以下のメッセージ構造で値 `outer_key.inner_key.double_inner_key` を持つキーを参照するには、`double_inner_value` を使用します。
```json
{
    "outer_key": {
        "inner_key": "inner_value",
        "a": {
            "double_inner_key": "double_inner_value",
            "b": "b value"
        },
        "c": "c value"
    },
    "d": "d value"
}
```