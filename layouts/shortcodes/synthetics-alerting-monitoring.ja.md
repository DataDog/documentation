### アラート条件を定義する

アラート条件で、テストが失敗しアラートをトリガーする状況を設定します。

#### アラート設定規則

アラートの条件を `An alert is triggered if any assertion fails for X minutes from any n of N locations` に設定すると、次の 2 つの条件が当てはまる場合にのみアラートがトリガーされます。

* 直近 *X* 分間に、最低 1 個のロケーションで失敗 (最低 1 つのアサーションが失敗)、
* 直近 *X* 分間に、ある時点で最低 *n* 個のロケーションで失敗。

#### 高速再試行

テストが失敗した場合、`Y` ミリ秒後に `X` 回再試行することができます。再試行の間隔は、警告の感性に合うようにカスタマイズしてください。

ロケーションのアップタイムは、評価ごとに計算されます (評価前の最後のテスト結果がアップかダウンか)。合計アップタイムは、構成されたアラート条件に基づいて計算されます。送信される通知は、合計アップタイムに基づきます。

### テストモニターを構成する

以前に定義された[アラート条件](#define-alert-conditions)に基づいて、テストによって通知が送信されます。このセクションを使用して、チームに送信するメッセージの方法と内容を定義します。

1. [モニターの構成方法と同様][101]、メッセージに `@notification` を追加するか、ドロップダウンメニューでチームメンバーと接続されたインテグレーションを検索して、通知を受信する**ユーザーやサービス**を選択します。

2. テストの通知**メッセージ**を入力します。このフィールドでは、標準の[マークダウン形式][104]のほか、以下の[条件付き変数][102]を使用できます。

    | 条件付き変数       | 説明                                                         |
    |----------------------------|---------------------------------------------------------------------|
    | &#x7b;&#x7b; #is_alert &#x7d;&#x7d;            | テストがアラートを発する場合に表示します。                                          |
    | &#x7b;&#x7b; ^is_alert &#x7d;&#x7d;            | テストがアラートを発しない限り表示します。                                        |
    | &#x7b;&#x7b; #is_recovery &#x7d;&#x7d;         | テストがアラートから回復したときに表示します。                             |
    | &#x7b;&#x7b; ^is_recovery &#x7d;&#x7d;         | テストがアラートから回復しない限り表示します。                           |
    | &#x7b;&#x7b; #is_renotify &#x7d;&#x7d;         | モニターが再通知したときに表示します。                                   |
    | &#x7b;&#x7b; ^is_renotify &#x7d;&#x7d;         | モニターが再通知しない限り表示します。                                 |
    | &#x7b;&#x7b; #is_priority &#x7d;&#x7d;         | モニターが優先順位 (P1～P5) に一致したときに表示します。                  |
    | &#x7b;&#x7b; ^is_priority &#x7d;&#x7d;         | モニターが優先順位 (P1～P5) に一致しない限り表示します。                |

3. テストが失敗した場合に、テストで**通知メッセージを再送信する**頻度を指定します。テストの失敗を再通知しない場合は、`Never renotify if the monitor has not been resolved` オプションを使用してください。

4. **Create** をクリックすると、テストの構成とモニターが保存されます。

詳しくは、[Synthetic テストモニターの使用][103]をご覧ください。

[101]: /monitors/notify/?tab=is_alert#configure-notifications-and-automations
[102]: /monitors/notify/variables/?tab=is_alert#conditional-variables
[103]: /synthetics/guide/synthetic-test-monitors/
[104]: http://daringfireball.net/projects/markdown/syntax