After the container is built and pushed to your registry, set the required environment variables for the Datadog Agent:

- `DD_API_KEY`: Datadog API key, used to send data to your Datadog account. It should be configured as a Google Cloud Secret for privacy and safety.
- `DD_SITE`: Datadog endpoint and website. Select your site on the right side of this page. See valid [Datadog Sites](https://docs.datadoghq.com/getting_started/site/#access-the-datadog-site).

For more environment variables and their function, see [Environment Variables](#environment-variables).

The following command deploys the service and allows any external connection to reach it. In this example, your service listening is set to port 8080. Ensure that this port number matches the exposed port inside of your Dockerfile.

```shell
gcloud run deploy <APP_NAME>
  --image=gcr.io/<YOUR_PROJECT>/<APP_NAME> \
  --port=8080 \
  --update-env-vars=DD_API_KEY=$DD_API_KEY \
  --update-env-vars=DD_SITE=$DD_SITE \
```

### Environment variables

| Variable | Description |
| -------- | ----------- |
| `DD_API_KEY` | [Datadog API key](/account_management/api-app-keys/#api-keys) - **Required**|
| `DD_SITE` | [Datadog site](/getting_started/site/) - **Required** |
| `DD_LOGS_ENABLED` | When true, send logs (stdout and stderr) to Datadog. Defaults to false. |
{{ if in (slice "java" "nodejs" "csharp" "php") (.Get "language") }}| `DD_LOGS_INJECTION`| When true, enrich all logs with trace data for supported loggers. See [Correlate Logs and Traces](/tracing/other_telemetry/connect_logs_and_traces/) for more information. |
{{ end }}
| `DD_SERVICE` | See [Unified Service Tagging](/getting_started/tagging/unified_service_tagging/). **Recommended** |
| `DD_VERSION` | See [Unified Service Tagging](/getting_started/tagging/unified_service_tagging/). **Recommended** |
| `DD_ENV` | See [Unified Service Tagging](/getting_started/tagging/unified_service_tagging/). **Recommended** |
| `DD_SOURCE` | Set the log source to enable a [Log Pipeline](/logs/log_configuration/pipelines) for advanced parsing. To automatically apply language-specific parsing rules, set to `{{ .Get "language" }}`, or use your custom pipeline. Defaults to `cloudrun`. |
| `DD_TAGS` | Add custom tags to your logs, metrics, and traces. Tags should be comma separated in key/value format (e.g. `key1:value1,key2:value2`). |
