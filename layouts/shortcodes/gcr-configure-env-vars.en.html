   After the container is built and pushed to your registry, set the required environment variables for the Datadog Agent:

   - `DD_API_KEY`: Your [Datadog API key][1001], used to send data to your Datadog account. For privacy and safety, configure this API key as a Google Cloud Secret.
   - `DD_SITE`: Your [Datadog site][1002]. For example, `datadoghq.com`.

   For more environment variables, see the [Environment variables](#environment-variables) section on this page.

   The following command deploys the service and allows any external connection to reach it. In this example, your service listening is set to port 8080. Ensure that this port number matches the exposed port inside of your Dockerfile.

   ```shell
   gcloud run deploy <APP_NAME>
     --image=gcr.io/<YOUR_PROJECT>/<APP_NAME> \
     --port=8080 \
     --update-env-vars=DD_API_KEY=$DD_API_KEY \
     --update-env-vars=DD_SITE=$DD_SITE \
   ```

### Environment variables

| Variable            | Description |
| ------------------- | ----------- |
| `DD_API_KEY`        | [Datadog API key][1001] - **Required**|
| `DD_SITE`           | [Datadog site][1002] - **Required** |
| `DD_LOGS_ENABLED`   | When true, send logs (stdout and stderr) to Datadog. Defaults to false. |{{ if in (slice "java" "nodejs" "csharp" "php") (.Get "language") }}
| `DD_LOGS_INJECTION` | When true, enrich all logs with trace data for supported loggers. See [Correlate Logs and Traces][1003] for more information. |{{ end }}
| `DD_SERVICE`       | See [Unified Service Tagging][1004]. **Recommended** |
| `DD_VERSION`       | See [Unified Service Tagging][1004]. **Recommended** |
| `DD_ENV`           | See [Unified Service Tagging][1004]. **Recommended** |
| `DD_SOURCE`        | Set the log source to enable a [Log Pipeline][1005] for advanced parsing. To automatically apply language-specific parsing rules, set to `{{ .Get "language" }}`, or use your custom pipeline. Defaults to `cloudrun`. |
| `DD_TAGS`          | Add custom tags to your logs, metrics, and traces. Tags should be comma separated in key/value format (for example: `key1:value1,key2:value2`). |

[1001]: https://app.datadoghq.com/organization-settings/api-keys
[1002]: /getting_started/site/
[1003]: /tracing/other_telemetry/connect_logs_and_traces/
[1004]: /getting_started/tagging/unified_service_tagging/
[1005]: /logs/log_configuration/pipelines