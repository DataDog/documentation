---
title: Set up Tracing on an Azure Pipeline
kind: documentation
aliases:
  - /continuous_integration/setup_pipelines/azure
further_reading:
    - link: "/continuous_integration/pipelines"
      tag: "Documentation"
      text: "Explore Pipeline Execution Results and Performance"
    - link: "/continuous_integration/pipelines/custom_commands/"
      tag: "Documentation"
      text: "Extend Pipeline Visibility by tracing individual commands"
    - link: "/continuous_integration/troubleshooting/"
      tag: "Documentation"
      text: "Troubleshooting CI"
    - link: "/continuous_integration/pipelines/custom_tags_and_metrics/"
      tag: "Documentation"
      text: "Extend Pipeline Visibility by adding custom tags and metrics"
---

{{< site-region region="gov" >}}
<div class="alert alert-warning">CI Visibility is not available in the selected site ({{< region-param key="dd_site_name" >}}) at this time.</div>
{{< /site-region >}}

## Compatibility

- **Custom pre-defined tags**: Set [custom tags][6] for all generated pipeline and job spans.

## Configure the Datadog integration

The Datadog integration for [Azure Pipelines][1] works by using [service hooks][2] to send data to Datadog.

1. For each project, go to **Project settings > Service hooks** in Azure DevOps and select `Create subscription` (green plus icon).

2. Create a new subscription with the same URL for each of the following webhook types:
    - **Run state changed**
    - **Run stage state changed**
    - **Run job state changed**
    
3. Click `Next` to continue to the next step and set the following: 
    - **URL**: <code>https://webhook-intake.{{< region-param key="dd_site" >}}/api/v2/webhook/</code>
    - **HTTP Headers**: `DD-API-KEY:<API_KEY>` where `<API_KEY>` is your [Datadog API key][3].
    - **Resource Version**: Scroll down to the latest field and choose `[Latest]`.

### Set custom tags
To set custom tags for all the pipeline and job spans generated by the integration, add to the **Service hook URL** a URL-encoded query parameter `tags`, with `key:value` pairs separated by commas. If a key:value pair contains any commas, surround it with quotes. For example, to add `key1:value1,"key2: value with , comma",key3:value3`, append the following string to the **Service hook URL**:

`?tags=key1%3Avalue1%2C%22key2%3A+value+with+%2C+comma%22%2Ckey3%3Avalue3`

## Visualize pipeline data in Datadog

The [Pipelines][4] and [Pipeline Executions][5] pages populate with data after the workflows finish.

**Note**: The Pipelines page shows data for only the default branch of each repository.

## Further reading

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://azure.microsoft.com/en-us/products/devops/pipelines
[2]: https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/webhooks?view=azure-devops
[3]: https://app.datadoghq.com/organization-settings/api-keys
[4]: https://app.datadoghq.com/ci/pipelines
[5]: https://app.datadoghq.com/ci/pipeline-executions
[6]: https://docs.datadoghq.com/continuous_integration/pipelines/azure/#set-custom-tags