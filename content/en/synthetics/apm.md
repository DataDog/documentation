---
title: Synthetics APM
kind: documentation
beta: true
description: APM and Distributed Tracing with Synthetics
further_reading:
- link: "https://www.datadoghq.com/blog/introducing-synthetic-monitoring/"
  tag: "Blog"
  text: "Introducing Datadog Synthetics"
- link: "tracing/"
  tag: "Documentation"
  text: "APM and Distributed Tracing"

---

{{< img src="synthetics/apm/synthetics-apm.gif" alt="APM and Synthetics" responsive="true" style="width:80%;">}}

## Overview

The APM integration with Synthetics allows you to go from a test run that potentially failed to the root cause of the issue by looking at the trace generated by that very test run.

Having network-related specifics (thanks to your test) as well as backend, infrastructure, and log information (thanks to your trace) allows you to access a new level of details about the way your application is behaving, as experienced by your user.

## Usage

### Prerequisites

* Your service is [traced on the APM side][1].
* Your service uses an HTTP server.
* Your HTTP server is using a library that supports distributed tracing.

Create a check that hits your traced HTTP server, and Datadog automatically links the trace generated by your server to the corresponding check result.

## Supported Libraries

The following Datadog tracing libraries are supported:

* [Python][2]
* [Go][3]
* [Java][4]
* [Ruby][5]
* [JavaScript][6]

### How are traces linked to checks?

Datadog uses the distributed tracing protocol and sets up the following HTTP headers:

* `x-datadog-trace-id`, generated from the Synthetics backend. Allows Datadog to link the trace with the test result.
* `x-datadog-parent-id: 0`
* `x-datadog-origin: synthetics`, to make sure the generated traces don't affect your APM quotas. See below.
* `x-datadog-sampling-priority: 1`, [to make sure that the Agent keeps the trace][7].

### How are APM quotas affected?

The `x-datadog-origin: synthetics` header specifies to the APM backend that the traces are Synthetics generated. The generated traces consequently do not impact your classical APM quotas.

### How long are traces retained?

These traces are retained [just like your classical APM traces][8].

## Further Reading

{{< partial name="whats-next/whats-next.html" >}}

[1]: /tracing
[2]: https://github.com/DataDog/dd-trace-py/releases/tag/v0.22.0
[3]: https://github.com/DataDog/dd-trace-go/releases/tag/v1.10.0
[4]: https://github.com/DataDog/dd-trace-java/releases/tag/v0.24.1
[5]: https://github.com/DataDog/dd-trace-rb/releases/tag/v0.20.0
[6]: https://github.com/DataDog/dd-trace-js/releases/tag/v0.10.0
[7]: https://docs.datadoghq.com/tracing/guide/trace_sampling_and_storage/#how-it-works
[8]: https://docs.datadoghq.com/tracing/guide/trace_sampling_and_storage/#trace-storage
