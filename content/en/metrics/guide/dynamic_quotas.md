---
title: Dynamic Metric Quotas
further_reading:
- link: "/account_management/billing/custom_metrics/?tab=countrate"
  tag: "Documentation"
  text: "Custom Metrics Billing"
- link: "/metrics/guide/custom_metrics_governance/"
  tag: "Guide"
  text: "Best Practice for Custom Metric Governance"
- link: "https://www.datadoghq.com/blog/metrics-without-limits/"
  tag: "Blog"
  text: "Dynamically control your custom metrics volume with Metrics without Limits™"
algolia:
  tags: ['custom metrics']
is_beta: true
private: true
---

## Overview

{{< callout url="#" btn_hidden="true" header="Join the Preview!" >}}
  This feature is in Preview.
{{< /callout >}} 

Datadog's Dynamic Metrics Quotas offers you greater control over your custom metrics cost through custom metrics quotas for accounts, teams, or metric names. You define a metric monitor on your [estimated usage metrics][10], and when triggered, the monitor launches a workflow through [Workflow Automation][3]. 

The workflow sends a Slack (or Microsoft Teams) message asking for permission to automatically apply [Metrics without Limits™][1] configurations to the triggering metrics, reducing the usage and cost of these metrics on your behalf. These configuration updates are generated by Datadog's intelligent query insights, which uses a list of the actively queried tags to ensure that your cost-optimized configuration doesn't sacrifice visibility.

See the [Best Practices Guide for Custom Metrics Governance][11] for more information about monitoring and preventing overages and sudden spikes in your overall account's custom metrics usage.

## Setup

### Prerequisites

1. A Datadog account with [Workflow Automation][3] enabled
2. The Datadog [Slack integration][5] or [Microsoft Teams integration][12] installed

### Configure blueprint

{{< img src="/metrics/guide/dynamic_quotas/automated_mwl_workflow_monitor.png" alt="The Make a decision tiles on the Datadog automated Metrics without Limits™ workflow blueprint" style="width:100%;" >}}

#### Create a workflow from the blueprint

1. Open this [workflow blueprint][8], and click ***Create from Blueprint***.
2. Click the green Monitor tile on the workflow canvas, and enable the ***Automatic triggering*** toggle. 
3. Copy the workflow's ***Mention handle*** for use in the metric monitor steps described below.

#### Configure a metric monitor

1. Create a [metric monitor][9].
2. In the **Choose the detection method** section, Datadog recommends using the `Threshold Alert` monitor type. You can also use Change or Anomaly Detection.
3. In the **Define the metric** section, select `datadog.estimated_usage.metrics.custom.by_metric` as your metric name and choose the `sum by` space aggregator. 
4. Under **Set alert conditions**, define your quota threshold.
5. Under **Configure notifications & automations**, update the monitor notification message and include the workflow mention handle from the previous section. A sample notification message can look like the following:
```
    {{#is_alert}}
    @workflow-mwl-workflow-tags_4aab2
    {{/is_alert}}

```
7. Select **Multi Alert** to send a notification for each account, team, metric name, or other tag specified in the `sum by` field.
8. Click **Create** to create the metric monitor.

#### Complete the workflow configuration

1. The workflow blueprint contains several Slack (or Microsoft Teams) integration tiles that need to be updated. For each tile, input the channel or specific user(s) responsible for granting permission to Datadog to apply these cost-optimizing metric configurations on your behalf.
2. On the workflow canvas, click ***Save***.
3. Click **Publish**.
4. Click on **Run**, select **Test from Monitor**, and input the metric monitor ID. Now you can start automatically managing your custom metrics costs.

## Further reading

{{< partial name="whats-next/whats-next.html" >}}

[1]: /metrics/metrics-without-limits/
[2]: /monitors/configuration/#multi-alert
[3]: /service_management/workflows/
[4]: https://app.datadoghq.com/workflow/blueprints/manage-metrics-without-limits-suggested-tags
[5]: /integrations/slack/
[6]: /account_management/billing/usage_metrics/
[7]: /monitors/configuration/?tab=thresholdalert#set-alert-conditions
[8]: https://app.datadoghq.com/workflow/blueprints/manage-metrics-without-limits-suggested-tags
[9]: https://app.datadoghq.com/monitors/create/metric
[10]: /account_management/billing/usage_metrics/
[11]: /metrics/guide/custom_metrics_governance/#monitoring-and-prevention
[12]: https://docs.datadoghq.com/integrations/microsoft_teams/
