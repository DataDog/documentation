---
title: Monitor CI Providers Deployments
kind: documentation
description: Learn how to monitor deployments from CI Providers in Datadog CD Visibility.
is_beta: true
further_reading:
- link: "/continuous_delivery/deployments"
  tag: "Documentation"
  text: "Learn about Deployment Visibility"
- link: "/continuous_delivery/explorer"
  tag: "Documentation"
  text: "Learn how to query and visualize deployment executions"
---

{{< site-region region="gov" >}}
<div class="alert alert-warning">CD Visibility is not available in the selected site ({{< region-param key="dd_site_name" >}}) at this time.</div>
{{< /site-region >}}

{{< callout url="https://docs.google.com/forms/d/e/1FAIpQLScNhFEUOndGHwBennvUp6-XoA9luTc27XBwtSgXhycBVFM9yA/viewform?usp=sf_link" header="false" >}}
CD Visibility for CI providers deployments is in private beta. To request access, complete the form.
{{< /callout >}}

## Overview

Deployments can be performed also within continuous integration pipelines. Typically, these pipelines have a deployment step that is executed after the source code has been tested and the image has been built.
You can monitor your CI deployments if the following requirements are met:
1. You are using [Pipeline Visibility][1] to monitor your pipelines.
2. Your CI provider supports the "Custom tags and metrics at runtime" feature. You can check this in the [supported features table][2].
3. The deployment is executed in a CI job (or action).

## Setup

The main step required to set up CD Visibility for CI Providers deployments is to mark a specific CI job as a deployment.
To do that, use the `datadog-ci deployment mark` command of the [`datadog-ci` CLI][3](>=v2.26.0) inside the CI job. Two environment variables are required:
1. `DD_API_KEY`: Point to your [Datadog API key][5].
2. `DD_BETA_COMMANDS_ENABLED`: Set to 1.

Optionally, you can point the `DD_SITE` environment variable to a specific [Datadog site][4] (default value is `datadoghq.com`).

You can enrich the deployment event that is generated by the `datadog-ci deployment mark` command using the following parameters:
- `--env`: the environment to which this deployment is performed. For example, `prod`.
- `--revision`: the revision/version that is being deployed. For example, `1.0.0` or `v123-456`.
- `--is-rollback` specifies that the deployment is a rollback.
- `--tags` is an array of key value pairs in the format `key:value`. These tags are added to the deployment event shown in Datadog.

Use `--no-fail` (default: `false`) to prevent the deployment command from failing if there are issues submitting the data.

Once you have added the command to a CI job, the [**Deployments**][6] and [**Deployment Executions**][7] pages populate with data after pipelines are executed.
For more information, see [Search and Manage][8] and [CD Visibility Explorer][9].

### Examples

Specify that the CI job executes a deployment to the `prod` environment of version `1.0.0`:

```shell
export DD_BETA_COMMANDS_ENABLED=1
export DD_API_KEY="<YOUR_API_KEY>"

datadog-ci deployment mark --env prod --revision 1.0.0
```

Specify that the CI job performs a rollback deployment to the `prod` environment:

```shell
export DD_BETA_COMMANDS_ENABLED=1
export DD_API_KEY="<YOUR_API_KEY>"

datadog-ci deployment mark --env prod --is-rollback
```

Specify that the CI job executes a deployment to the `prod` environment and add the `team:backend` and the `reason:scheduled` tags to the deployment event:

```shell
export DD_BETA_COMMANDS_ENABLED=1
export DD_API_KEY="<YOUR_API_KEY>"

datadog-ci deployment mark --env prod --tags team:backend --tags reason:scheduled
```

## Further reading

{{< partial name="whats-next/whats-next.html" >}}


[1]: /continuous_integration/pipelines/
[2]: /continuous_integration/pipelines/#supported-features
[3]: https://www.npmjs.com/package/@datadog/datadog-ci
[4]: /getting_started/site/
[5]: https://app.datadoghq.com/organization-settings/api-keys
[6]: https://app.datadoghq.com/ci/deployments
[7]: https://app.datadoghq.com/ci/deployments/executions
[8]: /continuous_delivery/search
[9]: /continuous_delivery/explorer

