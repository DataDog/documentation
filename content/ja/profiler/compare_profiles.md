---
further_reading:
- link: profiler/enabling
  tag: ドキュメント
  text: アプリケーションの継続的なプロファイラー有効化
- link: getting_started/profiler
  tag: ドキュメント
  text: プロファイラーの概要
- link: https://www.datadoghq.com/blog/introducing-datadog-profiling/
  tag: ブログ
  text: Datadog に常時接続型の本番環境プロファイリングが登場
- link: https://www.datadoghq.com/blog/code-optimization-datadog-profile-comparison/
  tag: ブログ
  text: Datadog プロファイル比較を使用してコードを比較および最適化する
- link: https://www.datadoghq.com/blog/engineering/how-we-optimized-our-akka-application-using-datadogs-continuous-profiler/
  tag: ブログ
  text: Datadog の Continuous Profiler を使用して Akka アプリケーションを最適化した方法
kind: documentation
title: プロファイルを比較する
---

Continuous Profiler は、2 つのプロファイルまたはプロファイル集計を相互に比較して、コードパフォーマンスの向上、回帰、構造の変更を特定するのに役立ちます。プロファイルは次のものと比較できます。

- 別の時間に取得されたプロファイル、
- 時間の経過に伴うサービスのプロファイルの平均、または
- 異なる Datadog タグのセット (環境、バージョン、データセンターなど) を持つプロファイル。

これは、以前と比べてサービスにかかる時間が長いのか短いのか、メモリの使用量が多いのか少ないのか、割り当てが多いのか少ないのか、例外が多いのか少ないのか、またはコードと呼び出しが多いのか少ないのかを確認するのに役立ちます。

## 比較シナリオ

比較が最適に機能するのは、アプリケーションで以前と同様のワークロード (リクエストの総数) が発生している場合です。

比較を使用する一般的なシナリオは次のとおりです。

- 2 つの最新のデプロイを比較します。たとえば、最新のデプロイされた修正により、メソッドが行うメモリ割り当ての数が減少するかどうかを確認します。

- 2 つの異なる期間を比較します。たとえば、先週と比較した今日の CPU 消費量を計算します。CPU 消費量について、どのメソッドが良いか悪いかを検討します。

- 2 つの異なるタグのセットを比較します。たとえば、異なる環境、アベイラビリティーゾーン、ポッド、カナリア、またはその他のカスタム Datadog タグ間でプロファイルを比較します。

## 比較ビューへのアクセス

UI のさまざまな場所からさまざまなタイプの比較を開くことができます。

### プロファイルを前の期間と比較する

プロファイラー検索ビューで、リストからプロファイルを選択します。**Compare** をクリックして比較ビューを開きます。デフォルトでは、選択したプロファイルはプロファイル B として表示されます。プロファイル A の場合、集計タイムフレームとタグ、または特定のプロファイル ID を選択します。

比較するメトリクスを選択します (リストはコード言語によって異なります)。これは、たとえば、CPU プロファイルの調査中に割り当ての急増を確認する場合に役立ちます。

{{< img src="profiler/compare_time_frames.mp4" alt="比較ビューを開いて、プロファイルをタイムフレームの集計と比較します。" video="true">}}

以下を示す凡例の色に注意してください。
 - プロファイル B で時間が長いメソッドの場合、赤の色合いが濃くなります。
 - プロファイル B で時間が短いのメソッドの場合、緑の色合いが濃くなります。
 - プロファイル A のみにあるメソッドの場合は青。
 - プロファイル B のみにあるメソッドの場合は紫色。

これらの色は、バージョン、時間範囲、またはカナリア間のコードの構造的変化と、それらがパフォーマンスにどのように影響するかを識別するのに役立ちます。

{{< img src="profiler/comparison_legend.png" alt="プロファイル比較の凡例。" >}}

プロファイル内のメソッドにカーソルを合わせると、比較対象のプロファイルよりも時間が長いか短い、または割り当てが少ないか多いメソッドに関する特定のメトリクスが表示されます。

{{< img src="profiler/compare_hover.png" alt="プロファイル内のメソッドにカーソルを合わせると、メトリクスの比較が表示されます" >}}

### 最近のバージョンの比較

集計ビューで、サービスを選択して、選択したタイムフレームでの特定のメトリック (たとえば、実時間) の集計プロファイルを表示します。次に、**Compare** をクリックして、別のバージョンの集計プロファイルと比較します。

{{< img src="profiler/compare_recent_versions.mp4" alt="2 つのバージョンの比較ビューを開きます。" video="true">}}

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}