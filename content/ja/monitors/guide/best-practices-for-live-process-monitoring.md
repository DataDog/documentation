---
title: ライブプロセスモニタリングのベストプラクティス
---

## 概要

ライブプロセス製品を使用すると、インフラストラクチャー全体の実行中のプロセス数を監視できます。ライブプロセスモニターは、コンテナ化されていないプロセスに可観測性を追加するのに最適です。

ライブプロセスモニターを使用すると、以下が可能になります。

- 顧客にサービスを提供するのに十分なプロセスの複製があることを確認します。
- 特定のプロセスが実行されている際のアラート。

不適切に構成されたモニターは、誤検出を引き起こしやすいです。このガイドでは、信頼性の高いライブプロセスモニターを作成するための推奨ベストプラクティスを説明します。モニター作成プロセスの詳細については、[ライブプロセスモニターの作成][3]を参照してください。

## ベストプラクティス

### モニターのスコープ

Datadog は、モニターのスコープを数千プロセス以下にすることを推奨します。テキスト検索は曖昧なので、タグはモニターのスコープを調整する最も正確な方法です。

ワークフローの例:

1. [**Monitors > New Monitor > Live Process**][4] ページに移動します。

2. **by tags** フィールドでモニターにタグを追加します。
    - 例えば、`command:puma` を使用して `puma` コマンドに関連するプロセスを監視します。

{{< img src="monitors/monitor_types/process/tag-scoped-process-monitor.png" alt="タグを使用してスコープされたライブプロセスモニター" style="width:100%;" >}}

3. オプションで、**by text** フィールドに検索テキストを追加して、モニターのスコープを絞り込みます。以下の例では、コマンドラインが `cluster worker` に一致するプロセスのみが含まれます。

{{< img src="monitors/monitor_types/process/text-scoped-process-monitor.png" alt="テキスト検索を使ってスコープされたライブプロセスモニター" style="width:100%;" >}}

4. モニターのスコープがまだすべてのモニターグループで数千プロセスを超える場合、追加のタグを使用して複数のモニターに分割します。
    - 例えば、`env` タグを使って `prod` と `staging` 用の別々のモニターを作成できます。

### 時間枠の選択

評価ウィンドウを大きくするとレスポンスが遅くなったり、アラートを見逃したりするという誤解がありますが、モニターはどのクエリ評価間隔を選んでも継続的にデータを評価します。評価間隔は、異常が存在するかどうかを判断するために使用されるデータポイントの数を決定するだけです。

評価ウィンドウを大きくすることで、ある動作が一時的ではなく一貫して発生している場合にのみアラートされるようにすることができます。

- 誤検出を避けるには、最小間隔を **5 分**に設定してください。
- モニターがクラウドプロバイダーのインテグレーションに由来するタグを使用する場合、**15 分**の最小間隔を設定してください。
- アラートの遅延を避けるには、**1 時間**の最大間隔を設定してください。

その他のガイドラインについては、[アラート過多による疲弊を防ぐためのベストプラクティス][2]を参照してください。

[1]: https://app.datadoghq.com/process
[2]: https://www.datadoghq.com/blog/best-practices-to-prevent-alert-fatigue/#increase-your-evaluation-window
[3]: https://docs.datadoghq.com/ja/monitors/types/process/#monitor-creation
[4]: https://app.datadoghq.com/monitors/create/live_process
