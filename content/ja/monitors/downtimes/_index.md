---
aliases:
- /ja/monitors/notify/downtimes/
description: ダウンタイムをスケジューリングすることで、Datadog モニターが一定期間アラートを出さないようにします。
further_reading:
- link: /monitors/guide/suppress-alert-with-downtimes
  tag: ガイド
  text: ダウンタイム時のアラートを停止する
- link: /monitors/guide/scoping_downtimes
  tag: ガイド
  text: ダウンタイムスケジュールのスコープ
- link: /monitors/
  tag: Documentation
  text: モニターの作成
- link: /monitors/notify/
  tag: Documentation
  text: モニター通知
kind: documentation
title: ダウンタイム
---

## 概要

モニターをトリガーせずに、システムのシャットダウン、オフラインメンテナンス、またはアップグレードのダウンタイムをスケジュールします。ダウンタイムはすべてのモニターのアラートと通知を無音にしますが、モニターの状態遷移を妨げることはありません。

## ダウンタイムスケジュールの新規作成

Datadog で[モニターのダウンタイム][1]のスケジューリングを行うには、メインナビゲーションで _Monitors –> Manage Downtime_ の順に移動します。その後、画面右上の **Schedule Downtime** ボタンをクリックしてください。

個々のモニターをミュートするには、モニターのステータスページの上部にある **Mute** ボタンをクリックします。これにより、そのモニターにダウンタイムスケジュールが作成されます。

## サイレントにする対象を選択

モニター名で特定のモニターに、またはモニタータグで広範囲のモニターに、ダウンタイムスケジュールを適用します。*グループスコープ*を使用して、さらにフィルターを適用します。**Preview affected monitors** をクリックすると、含まれるモニターが表示されます。ダウンタイムがスケジュールされた後に作成または編集されたモニターは、スコープに一致する場合、ダウンタイムに自動的に含まれます。

### モニター名で

検索するか、ドロップダウンメニューを利用してどのモニターをサイレントにするかを選択します。フィールドを空欄にすると、すべてのモニターがデフォルトでサイレント状態に設定されます。スコープを選択して、特定のホストやデバイス、任意のタグに限定したダウンタイムを設定することもできます。**選択されたすべてのスコープ**に紐付くモニターのみがサイレントに設定されます。

### モニタータグで

1 つ以上の[モニタータグ][2]に基づいて、ダウンタイムをスケジュールします。1 つのダウンタイムに選択できるタグの最大数は 32 です。各タグの長さは最大 256 文字です。**選択したすべてのタグ**があるモニターだけが消音されます。また、追加の制約のためにスコープを選択することができます。

### ダウンタイムスコープ

ダウンタイムが[単純なアラートモニター][3]にスケジュールされている場合、単純なアラートモニターはすべてのレポートソースを集約して単一のアラートを送信するため、`Group scope` フィールドは無視できます。

1 台のモニターから複数のアラートを送信している場合は、スコープに含まれるグループだけがサイレントに設定されます。たとえば、`host:X` がダウンタイムのスコープに含まれており、`host:X` と `host:Y` の両方に対してアラートがトリガーされる場合、Datadog は `host:Y` に対してのみモニター通知を生成します。`host:X` に対する通知は行われません。

マルチアラートモニターに適用されるダウンタイムのスコープにすべてのグループを含めるには、`Group scope` で `All` を選択します。

グループスコープをマルチアラートモニターに適用する使用例については、[ダウンタイムスケジュールのスコープ][4]のガイドを参照してください。

## ダウンタイムスケジュールの設定

### 1 回限り

開始日時とタイムゾーンを指定して 1 回のみのダウンタイムを設定します。オプションで終了日時を設定することもできます。

{{< img src="monitors/downtimes/downtime_onetime.jpg" alt="1 回限りのダウンタイムをスケジュールするためのフィールド" style="width:90%;">}}

 ### 繰り返し

定期的なダウンタイムは、定期的なメンテナンスウィンドウに便利です。開始日、時間、タイムゾーン、リピート、期間を入力して、定期的なダウンタイムを設定します。オプションで、終了日や発生回数を指定することもできます。

定期的なダウンタイムの 1 つのダウンタイムが終了すると、1 つのダウンタイムはキャンセルされ、同じ制約と更新された開始・終了時刻で新しいダウンタイムが作成されます。<br>
**注**: 元の作成者は、新しく作成されたすべてのダウンタイムに関連付けられます。

{{< img src="/monitors/guide/downtime_business_hour_weekend.png" alt="RRULEで定期的なダウンタイムをスケジュールするためのフィールド" style="width:90%;">}}

ダウンタイムのスケジュールを定義するには、[繰り返しルール][5] (RRULE) を使用します。繰り返しルールを生成するツールとしては、公式の [RRULE ジェネレーター][6]を使用します。一般的な使用例としては、RRULES を使用して、毎月の特定の日 (例えば、毎月第 3 月曜日) にダウンタイムを定義することが挙げられます。

**注**: RRULE で期間を指定する属性はサポートされません（例: `DTSTART`、`DTEND`、`DURATION`）。

## 通知
### メッセージの追加

このダウンタイムについてチームに通知するためのメッセージを入力します。メッセージフィールドでは、標準的なマークダウンフォーマットと Datadog の `@-notification` 構文が使用できます。フォーマットオプションの詳細については、[通知ページ][7] を参照してください。

### チームへの通知

チームメンバーを指定して通知したり、サービス[インテグレーション][8]にメッセージを送信します。Datadog は、ダウンタイムがスケジュール、開始、キャンセル、期限切れになるたびに、指定した宛先に通知を送信します。これらの監査通知により、あなたのチームはシステムのダウンタイムを認識することができます。

### 最初の回復通知を無効にする

デフォルトでは、Datadog はダウンタイム**前に**トリガーし、ダウンタイム**中に**回復するモニターに対して回復通知を送信します。これは、サードパーティのインテグレーションを使用して、開いたインシデントを自動的にクローズする場合に便利です。チェックボックスを選択すると、これらの通知がミュートされます。

{{< img src="monitors/downtimes/downtime_first_recovery.png" alt="最初の回復通知をミュートする" style="width:80%;">}}

最初の回復通知を無効にするオプションは、複数のダウンタイム間で加算されます。例えば、複数のダウンタイムが重なって同じモニターをミュートする場合、**少なくとも 1 つ**のダウンタイムが無効化オプションをチェックすると、最初の回復通知がミュートされます。

**注**: このオプションは、**最初の**回復通知をミュートします。ダウンタイム中にモニターがトリガーして再び回復する場合、このオプションの設定に関係なく、対応する通知は常にミュートされます。

## 管理

[Manage Downtime ページ][9]には、アクティブなダウンタイムとスケジュールされたダウンタイムのリストが表示されます。ダウンタイムを選択して、詳細を表示、編集、または削除します。詳細には、作成者、スコープ、適用されるモニターのリストが含まれます。
ファセットパネルと検索バーを使用して、`Creator`、`Scope`、`Monitor Tags`、または `Active`、`Automuted`、`Recurring` パラメーターのリストをフィルタリングします。

{{< img src="monitors/downtimes/downtime_manage.png" alt="Manage Downtime ページ" style="width:100%;">}}

### 履歴

ダウンタイム履歴は、[Monitor Status][10] ページにグループ遷移履歴のオーバーレイとして表示されます。または、[イベントエクスプローラー][11]内で `tags:audit downtime` を検索するか、`tags:audit downtime_id:<DOWNTIME_ID>` を使用して特定のダウンタイムを ID で検索できます。

### ミュート設定

モニターは、`ALERT`、`WARNING`、`RESOLVED`、`NO DATA` 間でステータスが切り替わる際にイベントをトリガーします。モニターがミュートまたはダウンタイムによってサイレント状態になっている時は、`RESOLVED` から別の状態に変わっても、イベントや通知は**トリガーされません**。

{{< img src="monitors/downtimes/downtime_on_alert.png" alt="ダウンタイム中にアラートへの状態遷移を示すモニターのステータスグラフ、アラートイベントは作成されません" style="width:80%;">}}

**注**: モニターのステータスページからモニターをミュートまたはミュート解除しても、そのモニターに関してスケジュールされたダウンタイムは削除されません。ダウンタイムを編集または削除するには、[Manage Downtimes][1] ページから設定を変更するか、[API][12] を使用する必要があります。

### 有効期限

デフォルトでは、ダウンタイムの期限が切れたときにモニターのステータスがアラート対象 (`ALERT`、`WARNING`、`NO DATA`) の場合、モニターは新しい通知をトリガーします。これは、ダウンタイム中にモニターのステータスが (たとえば `OK` から `ALERT`、`WARNING`、または `NO DATA` に) 変わったモニターや、ダウンタイムの開始時にすでにアラート対象のステータスであったモニターも同様です。ダウンタイムを手動でキャンセルした場合、モニターがアラート対象のステータスになったとしても、通知は送信されません。

デフォルトの動作をオーバーライドするには、"Notify Your Team" セクションのオプションを使用して、ダウンタイムの終了時に送信する通知を指定します。API で作成されたダウンタイムの場合、デフォルトの動作で `is_cancelled` オプションが除外されます。

{{< img src="monitors/downtimes/downtime_cancel_expire_notification.png" alt="特定のダウンタイム条件を持つモニターの Notify your team section セクションを構成する" style="width:100%;">}}

**例 1:** モニターがダウンタイムの開始*前に*アラートの状態で、ダウンタイム中も*継続*した場合:
1. ダウンタイム中、このアラートの通知は停止されます。
2. モニターはアラートの状態です（依然として条件が満たされているため）。
3. ダウンタイムが終了します。
4. アラート条件が依然として満たされるため、通知が送信されます。

**例 2:** モニターがダウンタイムの開始*前に*アラートの状態で、ダウンタイム*中に*リカバリした場合:
1. `ALERT` 状態から `OK` に移行します。
2. ダウンタイム中にリカバリ通知が送信されます（ダウンタイム中最初のリカバリのみ）。

### モニターレポート

[週間モニターレポート][13]には、ダウンタイム時を含むすべてのアラートのステータスが含まれます。

## オートミュート

Datadog は、特定のクラウドワークロードの手動シャットダウンに関連するモニターをプロアクティブにミュートすることができます。シャットダウンのための自動ミュートのシナリオは、次のようにサポートされています。

- **[AWS EC2 インスタンス][14]**と、CloudWatch API からのホストステータスに基づく AWS オートスケールによるインスタンス終了。
- **[Google Compute Engine (GCE)][10]** インスタンスと、GCE API からのホストステータスに基づく GCE オートスケールをトリガーとしたインスタンス終了。
- シャットダウンが手動または Azure オートスケーリングによってトリガーされたかにかかわらず、Azure Resource Health API を通じて利用できるヘルスステータスに基づく、**[Azure VM][16]**。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://app.datadoghq.com/monitors/downtimes
[2]: /ja/monitors/manage/#monitor-tags
[3]: /ja/monitors/configuration/?tab=thresholdalert#alert-grouping
[4]: /ja/monitors/guide/scoping_downtimes
[5]: https://icalendar.org/iCalendar-RFC-5545/3-8-5-3-recurrence-rule.html
[6]: https://icalendar.org/rrule-tool.html
[7]: /ja/monitors/notify/#overview
[8]: /ja/integrations/#cat-notification
[9]: https://app.datadoghq.com/monitors/downtimes
[10]: /ja/monitors/manage/status/
[11]: /ja/service_management/events/explorer
[12]: /ja/api/v1/downtimes/#cancel-a-downtime
[13]: /ja/account_management/#preferences
[14]: /ja/integrations/amazon_ec2/#ec2-automuting
[15]: /ja/integrations/google_compute_engine/#gce-automuting
[16]: /ja/integrations/azure_vm/#automuting-monitors
