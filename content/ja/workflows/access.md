---
aliases:
- /ja/workflows/service_accounts
description: ワークフローへのアクセスおよび認証
disable_toc: false
further_reading:
- link: /integrations/
  tag: Documentation
  text: インテグレーションについて
- link: /workflows/actions_catalog
  tag: Documentation
  text: ワークフローアクションの一覧を見る
is_beta: true
kind: documentation
title: アクセス・認証
---

{{< callout url="https://forms.gle/VEjerYVQ2QJhauZ57" >}}
  Workflows は公開ベータ版です。フィードバックや質問がある場合は、<a href="/help">Datadog サポート</a>にご連絡ください。
{{< /callout >}}

ワークフローとそのコンポーネントへのアクセスや認証を制御するツールがいくつかあります。

## サービスアカウント

ワークフローに自動トリガーを追加するには、ワークフローに関連するサービスアカウ ントが必要です。サービスアカウントは、以下のために必要です。
- ワークフローアクションで定義された接続を、実行時に解決する
- ワークフロー実行のための ID を提供する
- ワークフロー[監査証跡][1]のための ID を提供する

ワークフローのサービスアカウントを作成するには、Datadog の管理者ロール、または **Service Account Write** 権限を持つカスタムロールのいずれかを持っている必要があります。作成したサービスアカウントは、あなたの役割と権限を採用します。サービスアカウントと権限の詳細については、 [サービスアカウント][2]または[ロールベースのアクセス制御][3]を参照してください。

<div class="alert alert-info">作成したサービスアカウントで、ワークフローを自動的にトリガーすることができます。しかし、ワークフロー内の個々のアクションは、<a href="/workflows/connections/">Connections</a> を必要とするかもしれません。</div>

### サービスアカウントとワークフローの関連付け

[自動トリガーを追加する][4]際に、ワークフローのサービスアカウントを動的に作成することができます。

1. **Create** ボタンをクリックします。**Create Service Account** ダイアログが表示されます。
1. ドロップダウンを使用して、サービスアカウントユーザーのロールを選択します。
1. サービスアカウントを保存するには、**Create** をクリックします。

ワークフローを実行する際、ワークフローアクションで定義された接続をサービスアカウントユーザーが解決します。そのため、サービスアカウントユーザーは `connections_resolve` 権限を必要とします。Datadog Admin Role と Datadog Standard Role は、`connections_resolve` 権限を含んでいます。

ワークフローの **Create Service Account** ダイアログでは、以下のようにサービスアカウントの詳細が入力されます。
- Name: `[WF]: <your-workflow-name>`
- Email: Datadog アカウントに関連付けられたメールアドレス

### サービスアカウント詳細の表示

サービスアカウントの詳細を表示するには
1. ワークフローキャンバスで、自動トリガーをクリックします。
1. サービスアカウントの横にある、**View** をクリックします。

{{< img src="workflows/service-account-details1.png" alt="サービスアカウント詳細" style="width:60%;" >}}

## アクションの資格情報

ワークフローの[アクション][5]は、外部のソフトウェアシステムと接続するため、対応するインテグレーションに対して、Datadog アカウントの認証が必要になる場合があります。ワークフローは、認証を必要とするすべてのワークフローアクションが Datadog アカウントの身元を確認できる場合にのみ、正常に実行することができます。

ワークフローアクションは、2 つの方法で認証することができます。
- インテグレーションタイルで構成された資格情報および権限
- カスタム接続の資格情報

### インテグレーションタイルの資格情報

以下の Datadog インテグレーションタイルで設定した資格情報やアカウント認証は、ワークフローの対応するアクションに自動的に伝搬されます。
- Jira
- PagerDuty
- Slack

[Datadog インテグレーション][6]の説明に従って、インテグレーションタイルを構成します。

### 接続の資格情報

カスタム[接続][7]を使用して、[汎用アクション][8]またはインテグレーションタイルが認証を提供していないアクションを認証することができます。ワークフロー接続オブジェクトを使用すると、インテグレーションに接続するための資格情報を提供することができます。パラメーターはインテグレーションによって異なります。

任意のサービスに接続するには、HTTP 接続タイプを使用し、2 つの認証オプションから選択します。
- トークンベース認証
- ユーザー名とパスワードの組み合わせ

### アクションに資格情報を追加する

インテグレーションタイルで資格情報を構成した場合でも、カスタム接続を作成した場合でも、ワークフローは各ワークフローアクションで資格情報を利用できるようにします。アクションに資格情報を追加するには、次の手順に従います。

1. [Workflows 一覧][9]に移動します。
1. 資格情報を追加する必要があるアクションを含むワークフローを選択します。ワークフロービルダーが表示されます。
1. ワークフローの視覚化で、資格情報を追加する必要のあるアクションをクリックします。
1. 右側のパネルには、アクションの詳細が表示されます。
1. **Configure** タブの下にある **Authentication** ドロップダウンを探します。ドロップダウンから希望の資格情報を選択します。または、**Add New** をクリックして、新しい資格情報を作成します。
1. **保存**をクリックします。

## ワークフロー権限

[ロールベースのアクセス制御 (RBAC)][3] を使用して、ワークフローと接続へのアクセスを制御します。ワークフローや接続に適用される権限の一覧は、[Datadog のロール権限][10]を参照してください。

### 接続の利用を制限する

各接続に権限を設定して、変更を制限したり、使用を制限したりします。詳細な権限には、**Viewer**、*Resolver**、*Editor** があります。

Viewer
: 表示が可能

Resolver
: 解決と表示が可能

Editor
: 編集、解決、表示が可能

接続の解決には、ステップに割り当てられた接続オブジェクトを取得し、それに関連するシークレットを取得することが含まれます。

特定の接続の権限を変更するには、以下の手順に従います。

1. [Workflows 一覧][9]に移動します。
1. 右上の **Connections** をクリックします。接続の一覧が表示されます。
1. 詳細な権限を設定したい接続にカーソルを合わせます。右側に、**Edit**、**Permissions**、**Delete** のアイコンが表示されます。
1. 南京錠 (** Permissions**) のアイコンをクリックします。
1. **Restrict Access** を選択します。
1. ドロップダウンからロールを選択します。**Add** をクリックします。選択したロールがダイアログボックスの下部に表示されます。
1. ロール名の横にある、ドロップダウンから必要な権限を選択します。
1. ロールからアクセスを削除したい場合は、ロール名の右側にあるゴミ箱のアイコンをクリックします。
1. **保存**をクリックします。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/account_management/audit_trail/#overview
[2]: /ja/account_management/org_settings/service_accounts/
[3]: /ja/account_management/rbac/
[4]: /ja/workflows/trigger/
[5]: /ja/workflows/actions_catalog/
[6]: /ja/integrations/
[7]: /ja/workflows/connections/
[8]: /ja/workflows/actions_catalog/generic_actions/
[9]: https://app.datadoghq.com/workflow
[10]: /ja/account_management/rbac/permissions/#workflows