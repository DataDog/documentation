---
disable_toc: false
further_reading:
- link: /workflows/access/#service-accounts/
  tag: ドキュメント
  text: ワークフローのサービスアカウントについての詳細はこちら
- link: dashboards
  tag: ドキュメント
  text: ダッシュボードの設定についての詳細はこちら
- link: security/explorer
  tag: ドキュメント
  text: セキュリティシグナルの詳細はこちら
- link: モニター
  tag: ドキュメント
  text: モニターの詳細はこちら
is_beta: true
kind: documentation
title: ワークフローをトリガーする
---

{{< callout url="https://forms.gle/VEjerYVQ2QJhauZ57" >}}
  Workflows は公開ベータ版です。フィードバックや質問がある場合は、<a href="/help">Datadog サポート</a>にご連絡ください。
{{< /callout >}}

ワークフローは、手動または自動でトリガーすることができます。

ワークフローは、ワークフローを所有するユーザーの ID、またはワークフローに 関連付けられたサービスアカウントの ID で実行することができます。サービスアカウントの詳細については、[ワークフローのサービスアカウント][1]を参照してください。

## ワークフローを手動でトリガーする

ワークフローを手動でトリガーするには
1. ワークフローページから、**Run** をクリックします。
1. 既存のトリガー変数の値を入力します。
1. ワークフローを実行する準備ができたら、**Save & Run** をクリックします。

## ワークフローをダッシュボードから手動でトリガーする

ダッシュボードからワークフローをトリガーするには、**Run Workflow** ウィジェットを追加します。
1. ダッシュボードから、**Add Widget** をクリックします。
1. `workflows` を検索して、**Run Workflow** ウィジェットを追加します。
1. **Select the workflow** の下にあるドロップダウンメニューから、ワークフローを探します。
1. ダッシュボードテンプレート変数をワークフロー入力パラメーターにマッピングします。これにより、ワークフローを実行する際に、ダッシュボードテンプレート変数の値が入力パラメーターに直接マッピングされます。
1. ウィジェットのタイトルを入力し、**Save** をクリックします。

{{< img src="workflows/trigger-from-dashboard2.png" alt="Run Workflow をクリックすると、ダッシュボードウィジェットからワークフローをトリガーすることができます。" >}}

ワークフローを実行するには
1. ダッシュボードウィジェットの **Run Workflow** をクリックします。
1. **Execution parameters** の下には、ワークフローの入力にマッピングされたテンプレート変数が自動的に入力されます。マップされていない実行パラメーターの値を入力するか、必要であれば既存の値を編集します。
1. ワークフローを実行するには、**Run** をクリックします。

## ワークフローをモニターからトリガーする

ワークフローをモニターからトリガーするには
1. ワークフローキャンバスで、**Add an Automated Trigger** をクリックし、**@mention** を選択します。
1. ワークフローを保存します。
1. Datadog の [**Monitors** ページ][2]に移動します。
1. ワークフローのトリガーに使用するモニターを検索して編集するか、新しいモニターを作成します。
1. メッセージセクションに、ワークフローの完全なメンション名を追加します。
   - メンション名は `@workflow-` で始まる必要があります。例えば、`@workflow-my-workflow` のようになります。
   - ワークフローにトリガー変数を渡すには、カンマで区切ったリストで `@workflow-name(key=value, key=value)` という構文を使用します。例えば、`@workflow-my-workflow(name="Bits", alert_threshold=threshold)` のようになります。
1. モニターを保存。

{{< img src="workflows/monitor-trigger.png" alt="モニタートリガーをモニターのメッセージセクションに追加する" >}}

モニターのしきい値に達するたびに、モニターはワークフローの実行をトリガーします。

## ワークフローをセキュリティシグナルの通知ルールからトリガーする

セキュリティシグナルの通知ルールが発動するたびにトリガーされるワークフローを設定することができます。

ワークフローを通知ルールからトリガーするには
1. ワークフローキャンバスで、**Add an Automated Trigger** をクリックし、**@mention** を選択します。
1. **@workflow-** の横に、トリガーのメンション名を入力します。メンション名は一意でなければなりません。
1. ワークフローを保存します。
1. [Setup & Configuration][3] ページから、ワークフローのトリガーとなる検出ルールを探すか、新しいルールを作成します。
1. **Recipient** セクションに、ワークフローの完全なメンション名を追加します。例えば、`@workflow-my-workflow` のようになります。
1. **Save and Activate** をクリックします。

{{< img src="workflows/notification-rule-trigger.png" alt="通知ルールの受信者セクションにワークフロー名を追加する" >}}

通知ルールが発動するたびに、ワークフローの実行がトリガーされます。

## ワークフローをスケジュールでトリガーする

ワークフローの実行をスケジュールするには
1. ワークフローキャンバスで、**Add an Automated Trigger** をクリックし、**Schedule** を選択します。
1. **Create** をクリックすると、サービスアカウントが作成されます。詳しくは、[Workflows のサービスアカウント][1]を参照してください。
1. 実行する時間や回数を入力します。
1. (オプション) ワークフローの説明を **Memo** フィールドに入力します。
1. **保存**をクリックします。

## ワークフローのデバッグ

ワークフローをトリガーした後、ワークフローページは **Debug** ビューに切り替わります。また、手動で **Build** と **Debug** ビューを切り替えることができます。

**Debug** ビューは、トリガーされたワークフローの進捗を確認したり、失敗したステップをデバッ グするために使用します。失敗したステップをクリックすると、そのステップの入力、出力、実行コンテキスト、および関連するエラーメッセージが表示されます。以下の例では、GitHub チームメンバーシップのステップに失敗しています。エラーメッセージは、権限がないためにステップが失敗したことを示しています。

{{< img src="workflows/failed-step2.png" alt="ステップに失敗したワークフロー。" >}}

ワークフローの最初の **Debug** ビューには、過去のワークフロー実行のリストと各実行が成功したか失敗したかがパネルで表示されます。失敗したワークフローには、失敗したワークフローへのリンクが含まれます。リスト内のワークフローをクリックすることで、ワークフローを確認することができます。ワークフローキャンバスをクリックすることで、いつでも初期実行履歴に戻ることができます。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/workflows/access/#service-accounts
[2]: https://app.datadoghq.com/monitors/manage
[3]: https://app.datadoghq.com/security/configuration/rules
