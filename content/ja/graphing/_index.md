---
title: グラフの作成方法
kind: documentation
aliases:
  - /ja/guides/graphing
  - /ja/graphing/miscellaneous/metrics_arithmetic
  - /ja/graphing/faq/is-there-a-way-for-me-to-set-the-maximum-and-minimum-values-on-the-y-axis-of-a-graph
  - /ja/graphing/faq/is-it-possible-to-adjust-the-y-axis-for-my-graphs
description: データを可視化してインサイトを得る
further_reading:
  - link: 'https://learn.datadoghq.com/course/view.php?id=8'
    tag: ラーニング センター
    text: ダッシュボードの高度な活用法
---
グラフは、監視対象のシステムを見るための窓のようなものです。電子メール通知、Slack、他のチャットクライアントなど、Datadog のあらゆる場所で使用されます。監視と可観測性には欠かせない要素なので、しっかりと理解しましょう。

## グラフ作成エディター

グラフ作成エディターを操作するには 2 つの方法があります。1 つは GUI を使用する方法 (デフォルト)、もう 1 つは JSON を記述する方法 (より複雑な方法) です。このページでは、GUI を使用した方法について説明します。JSON を使う方法については、[JSON を使用したグラフ作成入門][1]を参照してください。

各グラフの鉛筆アイコンをクリックすると、グラフ作成エディターが開きます。

{{< img src="graphing/index/references-graphing-overview.png" alt="Graphing Overview" responsive="true" style="width:75%;" >}}

グラフ作成エディターには以下のタブがあります。

* **Share**: 任意の外部 Web ページにグラフを埋め込みます。
* **JSON**: グラフ定義言語の知識が必要な柔軟性の高いエディターです。
* **Edit**: グラフ作成オプションを示すデフォルトの GUI タブです。

最初にグラフエディターを開くと、**Edit** タブが表示されます。このタブから、UI を使用してほとんどの設定を選択できます。以下に例を示します。

{{< img src="graphing/index/references-graphing-edit-window-with-y.png" alt="Graphing Edit Tab" responsive="true" style="width:75%;" >}}

グラフを設定するには、以下に示す複数の手順を実行します。

1. [グラフ化するメトリクスを選択する](#choose-the-metric-to-graph)
2. [可視化に使用するウィジェットを選択する](#select-your-visualization)
3. [フィルタリングする](#filter)
4. [集計、ロールアップする](#aggregate-and-rollup)
5. [追加の関数を適用する](#advanced-graphing)
6. [グラフのタイトルを決める](#create-a-title)

## グラフ化するメトリクスを選択する

グラフを作成する際は、通常、表示するメトリクスが既に決まっています。その場合は、#2 の最初のドロップダウン **Graph your data** でメトリクスを選択します。使用するメトリクスがわからない場合は、[メトリクスエクスプローラー][2]または[ノートブック][3]を使用して作業を開始できます。また、[メトリクスの概要][4]でメトリクスのリストを参照することもできます。

メトリクスエクスプローラーを使用すると、さまざまなグラフ設定を実際に試してみることができます。メトリクスの概要には、メトリクスのタイプとデフォルトの単位が示されています。

## 可視化に使用するウィジェットを選択する

グラフに表示するメトリクスが決定している場合は、可視化を選択します。[可視化機能 (ウィジェット) の一覧][5] をご確認ください。

## フィルタリングする

メトリクスと可視化の準備ができたら、グラフ化するホストをフィルタリングすることができます。メトリクスの右側には **from** ドロップダウンがあり、デフォルトでは *(everywhere)* が選択されています。これをクリックして、フィルタリング条件となるタグを選択します。タグの詳細については、[タグ付けに関するドキュメント][6]を参照してください。

## 集計、ロールアップする
### 集計の方法

フィルタリングのドロップダウンの横には、集計方法が表示されています。デフォルトでは **avg by** に設定されていますが、これを **max by**、**min by**、または **sum by** に変更できます。ほとんどの場合、メトリクスの各時間間隔には、ホストまたはインスタンスから取得された多くの値が含まれています。選択した集計方法に応じて、メトリクスがどのように 1 本の線に集約されるかが決定されます。100 台のホストのメトリクスをグラフ化する場合は、**sum by** を選択すると、それらすべての値が合算されて合計値が表示されます。

### 集計グループ

集計方法を決定したら、グラフの線を構成する要素、つまりグループ化の方法を決定します。ホストを選択すると、各ホストにつき 1 本の線が折れ線グラフとして表示されます。ロールを選択すると、各ロールにつき 1 本の線が表示されます。この線は、そのロールの全ホストのメトリクスで構成されており、前の手順で選択した方法で集計されています。

### ロールアップして長期にわたる集計を表示する

前の手順で選択したオプションに関係なく、グラフを表示するウィンドウの物理的なサイズの制約から、データは常にある程度集約されます。メトリクスが毎秒更新される場合に 4 時間分のデータを表示すると、すべてのデータを表示するには 14,400 個のポイントが必要です。各グラフで同時に表示できるポイントの数は、常に約 300 個です。

前述の例では、画面に表示される各ポイントは 48 個のデータポイントを表しています。実際には、メトリクスは Agent によって 15 ～ 20 秒ごとに収集されます。このため、ある 1 日の分のデータは 4,320 個のデータポイントで表されます。ロールアップ関数を使用して 5 分または 10 分間に相当するデータを対象にすることで、グラフを細かく制御することもできます。

ロールアップ関数を使用するには、集計グループの右側にあるプラス記号をクリックして、ドロップダウンから `rollup` を選択します。次に、データの集計方法と間隔 (秒) を選択します。

60 秒のバケットにロールアップされた、全マシンの合計空きディスク容量の平均値を表す 1 本の線を作成するには、以下のようなクエリを使用します。

{{< img src="graphing/index/references-graphing-rollup-example.png" alt="rollup example" responsive="true" style="width:90%;">}}

JSON ビューに切り替えると、以下のようなクエリが表示されます。

```
"q": "avg:system.disk.free{*}.rollup(avg, 60)"
```

JSON ビューの使用方法については、[JSON を使用したグラフ作成入門][1]を参照してください。

## 高度なグラフの作成

分析のニーズに応じて、他の数学関数をクエリに適用することもできます。たとえば、割合、微分係数、平滑化などです。詳細は[使用可能な関数のリスト][7]をご参照ください。

また、Datadog UI では、さまざまな算術演算を使用して、メトリクスをグラフ化することができます。グラフに表示される 値を変更するには、`+`、`-`、`/`、`*` を使用します。この構文では、整数値、および複数のメトリクスを使用する計算の両方を使用できます。

### 整数を使用したメトリクスの計算

グラフでのメトリクス値の表示方法を変更するには、メトリクスに対して算術演算を実行します。たとえば、特定のメトリクスの 2 倍を可視化するには、グラフエディターで **Advanced...** リンクをクリックします。次に、`Formula` ボックスに計算式 (この場合は `a * 2`) を入力します。

{{< img src="graphing/index/arithmetic_2.png" alt="Arithmetic 2" responsive="true" style="width:75%;" >}}

### 2 つのメトリクス間の計算

メトリクスの割合を可視化するために、1 つのメトリクスをもう 1 つのメトリクスで除算します。たとえば、以下のとおりです。

`jvm.heap_memory / jvm.heap_memory_max`

この計算は、前述と同じ方法で、つまりグラフエディターで **Advanced...** オプションを使用して実行できます。このオプションを選択したら、**Add Query** を選択します。各クエリには文字が割り当てられます。つまり、最初のメトリクスは **a** で、2 つめのメトリクスは **b** で表されます。

次に、`Formula` ボックスに計算式 (この場合は `a / b`) を入力します。

{{< img src="graphing/index/arithmetic_3.png" alt="Arithmetic 3" responsive="true" style="width:75%;" >}}

数式のみの線を表示するには、メトリクス **a** および **b** のチェックを外します。

{{< img src="graphing/index/arithmetic_3_bis.png" alt="Arithmetic 3 bis" responsive="true" style="width:75%;" >}}

**注**: 数式には文字は割り当てられません。数式間で計算することはできません。

## タイトルの作成

タイトルを入力しない場合は、選択内容に基づいたタイトルが自動的に生成されます。ただし、グラフの目的を適切に表すタイトルを作成することをお勧めします。

## 保存

作業内容を保存してエディターを終了するには **Done** をクリックします。いつでもエディターに戻ってグラフを変更できます。変更を加えた一方で、その内容を保存しない場合は、**Cancel** をクリックします。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/graphing/graphing_json
[2]: https://app.datadoghq.com/metric/explorer
[3]: https://app.datadoghq.com/notebook/list
[4]: https://app.datadoghq.com/metric/summary
[5]: /ja/graphing/widgets
[6]: /ja/tagging
[7]: /ja/graphing/functions/#apply-functions-optional