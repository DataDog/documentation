---
title: ログエクスプローラー
kind: documentation
description: すべてのログを検索し、ログ分析を実行します
aliases:
  - /ja/logs/explore
  - /ja/logs/patterns
  - /ja/logs/graph
  - /ja/logs/analytics
  - /ja/logs/explorer/list
  - /ja/logs/explorer/patterns
  - /ja/logs/explorer/analytics
  - /ja/logs/explorer/transactions/
further_reading:
  - link: logs/processing
    tag: Documentation
    text: ログの処理方法
  - link: logs/explorer/live_tail
    tag: Documentation
    text: ログ Live Tail
  - link: logs/explorer/side_panel
    tag: Documentation
    text: ログサイドパネル
  - link: logs/explorer/saved_views
    tag: Documentation
    text: ログエクスプローラーの自動構成
  - link: 'https://www.datadoghq.com/blog/datadog-clipboard/'
    tag: ブログ
    text: ログエクスプローラーの URL をクリップボードに追加する
---
**ログエクスプローラー**は、ログのトラブルシューティングと調査のホームベースです。ゼロから開始する場合でも、[保存ビュー][1]から開始する場合でも、モニター通知やダッシュボードウィジェットなどの他のコンテキストからここに到達する場合でも、ログエクスプローラーは次を繰り返すために設計されています。

1. ログを[**フィルター**](#filters-logs)します。現在関心のあるログのサブセットに焦点を絞る、拡大する、またはシフトします。
2. 情報を取得または統合するために、クエリされたログを上位レベルのエンティティに[**集計**](#aggregations-and-measures)します。
3. フィルターと集計の結果を[**視覚化**](#visualizations)して、ログを正しい視点に置き、決定的な情報を特定します。

いつでも、ログエクスプローラービューを[**エクスポート**](#export)すれば、後でまたは別のコンテキストで再利用できます。

## ログのフィルター

検索フィルターは、時間範囲と、`key:value` と全文検索を組み合わせた検索クエリで構成されます。高度なユースケースの詳細については、[ログ検索構文][2]および[時間範囲][3]のドキュメントを参照してください。例: `Past 5 minutes` の時間範囲での検索クエリ `service:payment status:error rejected`:

{{< img src="logs/explorer/search_filter.png" alt="検索フィルター" style="width:100%;" >}}

[インデックス化されたログ][4]は、全文検索と `key:value` 検索クエリの両方をサポートします。

**注**: `key:value` クエリでは、事前に[ファセットを宣言][5]する必要があります。

## 集計して測定する

ログは個々のイベントとして価値がある場合がありますが、価値のある情報がイベントのサブセットに存在する場合もあります。この情報を公開するには、ログを集計します。

{{< img src="logs/explorer/aggregations.png" alt="ログ Livetail" style="width:100%;" >}}

**注**: 集計は**インデックス化されたログのみ**でサポートされます。インデックス化されていないログで集計を実行する必要がある場合は、[ログからメトリクス][6]を使用するか、アーカイブで[リハイドレート][7]を実行して、[除外フィルターを一時的に無効にする][3]ことを検討してください。

### フィールド

フィールド集計では、クエリフィルターに一致するすべてのログが、ログファセットの値に基づいてグループに集計されます。この集計に加えて、次のメジャーを抽出できます。

- グループごとの**ログの数**
- グループごとのファセットのコード化された値の**一意の数**
- グループごとのファセットの数値に対する**統計演算** (`min`、`max`、`avg`、`percentiles`)

**注**: 単一のファセットに対して複数の値を持つ個々のログは、その数の集計に属します。たとえば、`team:sre` タグと `team:marketplace` タグを持つログは、`team:sre` 集計で 1 回、`team:marketplace` 集計で 1 回カウントされます。

グループは、[時系列](#timeseries)、[上位リスト](#toplist)、[テーブル](#table)の視覚化をサポートします。

### パターン

パターン集計では、構造が類似した `message` を持ち、同じ `service` に属し、同じ `status` を持つログがまとめてグループ化されます。パターンビューは、他の問題を見逃す可能性のあるノイズの多いエラーパターンを検出してフィルタリングするのに役立ちます。

{{< img src="logs/explorer/aggregations_patterns.png" alt="ログ Livetail" style="width:80%;" >}}

**注**: パターンは、10,000 個のログサンプルに基づいて検出されます。ログを一部分に制限してパターンを表示するには、検索を絞り込みます。

パターンは、[リスト集計](#list-aggregates-of-logs)の視覚化をサポートします。リスト内のパターンをクリックすると、パターンのサイドパネルが開き、次のことができます。

- そのパターンからログのサンプルにアクセスする
- 検索フィルターを追加して、このパターンからのログのみにスコープを絞る
- [grok パースルール][7]のキックスタートを取得して、そのパターンの構造化された情報ログを抽出する

{{< img src="logs/explorer/patterns_side_panel.png" alt="ログ Livetail" style="width:80%;" >}}

### トランザクション

トランザクションは、ユーザーセッションや複数のマイクロサービスで処理されたリクエストなど、イベントの**シーケンス**のインスタンスに従ってインデックス化されたログを集計します。たとえば、e コマース Web サイトは、カタログ検索、カートへの追加、チェックアウトなどのさまざまなユーザーアクションにわたってログイベントをグループ化し、`requestId` や `orderId` などの共通属性を使用してトランザクションビューを構築します。

{{< img src="logs/explorer/aggregations_transactions.png" alt="ログ Livetail" style="width:80%;" >}}

**注**: トランザクションの集計は、クエリに一致するログだけでなく、関連するトランザクションに属するすべてのログも含まれるという意味で、自然なグループの集計とは異なります。

- **Duration**: トランザクションの最後のログと最初のログのタイムスタンプの差。_このメジャーは自動的に追加されます_。
- トランザクションのログで見つかった**最大重大度**。_このメジャーは自動的に追加されます_。
- **重要な項目の検索:** 文字列値を持つ任意の `facet` について、`count unique`、`latest`、`earliest`、`most frequent` の操作を使用して、特定のログイベント情報を計算します。
- **統計の取得:** 任意の `measure` について、`min`、`max`、`avg`、`sum`、`median`、`pc75`、`pc90`、`pc95`、`pc99` の操作を使用して統計情報を計算します。

トランザクションは、[リスト集計](#list-aggregates-of-logs)の視覚化をサポートします。リスト内のパターンをクリックすると、パターンのサイドパネルが開き、次のことができます。

- そのトランザクション内のすべてのログにアクセスする
- そのトランザクション内の特定のログを検索する

{{< img src="logs/explorer/transactions_side_panel.png" alt="ログ Livetail" style="width:80%;" >}}

## 視覚化

視覚化は、フィルターと集計の結果がどのように表示されるかを定義します。

### リスト

リストは、ログまたは集計の**ページ区切り**された結果です。これは個々の結果が重要だが、一致する結果を定義するものについての事前または明確な知識がない場合に役立ちます。リストを使用すると、結果のグループを調べることができます。

個々のログを表示するリストとログの集計を表示するリストには、わずかに異なる機能があります。

#### ログのリスト

個々のログのリストについては、列として表示する対象の情報を選択します。次のいずれかを使用して、テーブルの**列を管理**します。

- **テーブル**。最初の行でインタラクションを利用できます。これは、列を**並べ替え**、**再配置**、または**削除**するための推奨される方法です。
- 左側の**ファセットパネル**、または右側の_ログサイドパネル_。これは、フィールドの列を**追加**するための推奨されるオプションです。

**Options** ボタンを使用して、ログイベントごとにテーブルに表示される**行数**を制御します。

{{< img src="logs/explorer/table_controls.gif" alt="表示テーブルを構成する"  style="width:80%;">}}

リストの視覚化におけるログのデフォルトの**ソート**はタイムスタンプによるもので、最新のログが一番上に表示されます。これが最速なので、一般的な目的では推奨される並べ替え方法になります。最初にメジャーの値が最小または最大のログを表示するか、ファセットの一意の値について辞書式にログを並べ替え、そのファセットに従って列を並べ替えます。特定のフィールドに従ってテーブルを並べ替えるには、事前に[ファセットを宣言][5]する必要があることに注意してください。

ログテーブルのコンフィギュレーションは、トラブルシューティングコンテキストの他の要素と一緒に[保存ビュー][1]に保存されます。

#### ログのリスト集計

集計のリストに表示される列は、**集計から派生した**列です。

結果は次のように並べ替えられます。

- **パターン**集計の集計あたりの一致するイベントの数 (デフォルトは多いから少ないの降順)
- **トランザクション**集計のトランザクション ID の辞書式順序 (デフォルトは A から Z の昇順)

### Timeseries

選択した時間枠での単一の[メジャー][2] (または[ファセット][2]の一意の値のカウント) の進化を視覚化し、(オプションで) 使用可能な[ファセット][2]で分割します。

次の時系列ログ分析は、**ユニーククライアント IP** の数に基づいて、過去 1 か月の**上位 5 の URL パス**の動きを示しています。

{{< img src="logs/explorer/timeseries.png" alt="時系列の例"  style="width:90%;">}}

Choose additional display options for timeseries: the **roll-up interval**, whether you **display** results as **bars** (recommended for counts and unique counts), **lines** (recommended for statistical aggregations) or **areas**, and the **colorset**.

### 上位リスト

選択した[メジャー][2]に基づいて、[ファセット][2]から上位の値を可視化します。

たとえば、次の上位リストは、マーチャントの Web サイトの**上位 15 の顧客**を、前日に行った**一意のセッション**の数に応じて示しています。

{{< img src="logs/explorer/toplists.png" alt="上位リストの例"  style="width:90%;">}}

### ネストされたテーブル

選択した[メジャー][2] (リストで選択した最初のメジャー) に基づいて[ファセット][2]から上位の値を可視化し、この上位の値に現れる要素に対して他のメジャーの値を表示します。検索クエリを更新したり、いずれかのディメンションに対応するログをドリルスルーすることができます。

- 複数のディメンションがある場合、上位の値は最初のディメンションに基づき決定されます。その後最初のディメンション内の上位値内の 2 番めのディメンション、次に 2 番目のディメンション内の上位値内の 3 番めのディメンションに基づき決定されます。
- メジャーが複数ある場合、最初のメジャーに応じて上位または下位リストが決定されます。
- サブセット（上位または下位）のみが表示されるため、小計がグループ内の実際の合計値とは異なる場合があります。このディメンジョンに対する、値が null または空欄のイベントは、サブグループとして表示されません。

**注**: 単一のメジャーと単一のディメンジョンで使用されるテーブルの可視化は、表示が異なりますが、上位リストと同じです。

次の表のログ分析は、**上位 10 のアベイラビリティーゾーン**の進化を示しています。また、各アベイラビリティーゾーンについて、**数またはエラーログ**に応じた**上位 10 のバージョン**とそれぞれの**ホスト**と**コンテナ ID** の固有の数を示しています。

{{< img src="logs/explorer/nested_tables.png" alt="テーブルの例"  style="width:90%;">}}

## エクスポート

いつでも、現在の集計に応じて、探索を次のように**エクスポート**します。

- 将来の自身またはチームメイトの調査の開始点として使用する[**保存ビュー**][1]
- レポートまたは統合を目的とした[**ダッシュボードウィジェット**][8]
- 事前定義されたしきい値でアラートをトリガーするための[**監視**][9]
- ログが Datadog に取り込まれるときに、ログを長期 KPI に集計するための[**メトリクス**][6]
- **CSV** (個々のログとトランザクション用)。個々のログには一度に最大 5,000 個のログをエクスポートでき、トランザクションには 500 個のログをエクスポートできます。
- ビューの**共有**: メールや Slack などを通じて、現在のビューへのリンクをチームメートと共有します。この機能で利用可能なすべての[Datadog 通知インテグレーション][10]を参照してください。

{{< img src="logs/explorer/export.png" alt="検索フィルター" style="width:100%;" >}}

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/logs/explorer/saved_views/
[2]: /ja/logs/search-syntax
[3]: /ja/dashboards/guide/custom_time_frames
[4]: /ja/logs/indexes
[5]: /ja/logs/explorer/facets/
[6]: /ja/logs/logs_to_metrics
[7]: /ja/logs/processing/processors/#grok-parser
[8]: /ja/dashboards/
[9]: /ja/monitors/monitor_types/log/
[10]: /ja/integrations/#cat-notification