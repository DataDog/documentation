---
title: カウント
kind: documentation
further_reading:
  - link: developers/metrics
    tag: Documentation
    text: メトリクスの詳細
  - link: developers/libraries
    tag: Documentation
    text: 公式/コミュニティ寄稿の API および DogStatsD クライアントライブラリ
---
## 概要

カウンターは個数を数えるために使用されます。

## 送信

### Agent チェック

{{% table responsive="true" %}}

| メソッド | 概要 |
| :----- | :------- |
| self.increment()<br/><sup>非推奨</sup> | メトリクスキー文字列によって識別されるイベントのカウントを変更するために使用されます。<ul><li>チェックの実行中に複数回呼び出すことができます。</li><li>Datadog Web アプリケーションに RATE タイプとして保存されます。時系列に保存される値は、サンプル間のカウンターの値の差分です (集計間隔で時間正規化されます。Agent チェックの場合、デフォルトは 1 です。したがって、通常、この値は未加工のカウント値です)。</li><li>集計関数 Counter クラスによって処理されます。</li></ul> |
| self.decrement()<br /><sup>非推奨</sup> | メトリクスキー文字列によって識別されるイベントのカウントを変更するために使用されます。<ul><li>チェックの実行中に複数回呼び出すことができます。</li><li>Datadog Web アプリケーションに RATE タイプとして保存されます。時系列に保存される値は、サンプル間のカウンターの値の差分です (集計間隔で時間正規化されます。Agent チェックの場合、デフォルトは 1 です。したがって、通常、この値は未加工のカウント値です)。</li><li>集計関数 Counter クラスによって処理されます。</li></ul> |
| self.monotonic_count(...) | 増加を続ける未加工のカウンターを追跡します。送信前に値をレートに正規化したり、差分を計算しないでください。それはメソッドによって行われます。直前のサンプルより小さな値を持つサンプルは無視されます (これは通常、基になる未加工のカウンターがリセットされたことを意味します)。<ul><li>チェックの実行中に複数回呼び出すことができます。<br> 例: サンプル 2、3、6、7 を送信すると、最初のチェックの実行中に 5 (7-2) が送信されます。次に、サンプル 10、11 を同じ monotonic_count で送信すると、次のチェックの実行中に 4 (11-7) が送信されます。</li><li>Datadog に COUNT タイプとして保存されます。時系列に保存される値は、(時間正規化されない) サンプル間のカウンター値の差分です。</li></ul> |
| self.count(...) | チェック間隔の間に発生したイベントの数を送信します。<ul><li>チェックの実行中に複数回呼び出すことができます。各サンプルは、送信される値に追加されます。</li><li>Datadog に COUNT タイプとして保存されます。</li></ul> |

{{% /table %}}

### DogStatsD

{{% table responsive="true" %}}

| 方法 | 概要 |
| :----- | :------- |
| dog.increment(...) | イベントのカウンターをインクリメントするために使用されます。<ul><li>Datadog Web アプリケーションに RATE タイプとして保存されます。時系列に保存される値は、その StatsD フラッシュ期間全体のカウンター値の時間正規化された差分です。</li></ul> |
| dog.decrement(...) | イベントのカウンターをデクリメントするために使用されます。<ul><li>Datadog Web アプリケーションに RATE タイプとして保存されます。時系列に保存される値は、その StatsD フラッシュ期間全体のカウンター値の時間正規化された差分です。</li></ul> |
{{% /table %}}

#### 例

コードサンプルについては、[DogStatsD 固有のドキュメント][1]を参照してください。

## アプリ内モディファイアー

* `as_count()` の効果
    * 時間集計関数を SUM に設定します。
* `as_rate()` の効果
    * 時間集計関数を SUM に設定します。
    * 入力時系列値をクエリ (ロールアップ) 間隔で正規化します。たとえば、ロールアップ間隔 20s の [1,1,1,1].as_rate() は [0.05, 0.05, 0.05, 0.05] を生成します。
* 未加工のメトリクス自体のデフォルトは時間集計関数 AVG なので、`as_rate()` または `as_count()` を使用しないでメトリクスを問い合わせることは、時間集計が適用される場合無意味になります。
* 間隔が非常に短くて時間集計が発生しない場合、正規化は行われず、未加工のメトリクス値カウントが取得されます。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/developers/dogstatsd/data_types#counters