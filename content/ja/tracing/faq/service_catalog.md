---
further_reading:
- link: /tracing/faq/service_definition_api/
  tag: ドキュメント
  text: サービス定義 API
is_beta: true
kind: faq
title: Datadog サービスカタログ
---

<div class="alert alert-warning">この機能は非公開ベータ版で、エンドポイントは変更される可能性があります。</div>

{{< img src="tracing/service_catalog/service_catalog.mp4" video=true alt="サービスカタログのナビゲーション" style="width:100%;" >}}

## 概要

Datadog サービスカタログは、組織内のすべてのサービスに関する重要な情報にアクセスするための一元的な場所です。大規模なエンドツーエンドのサービスオーナシップの実現、リアルタイムのパフォーマンスインサイトの取得、信頼性とセキュリティリスクの検出と対処、アプリケーションの依存関係の管理などをすべて 1 箇所で行うことができます。Slack などのチームコミュニケーションツール、GitHub などのソース管理、Datadog ダッシュボード、各サービスのテレメトリーデータを受信して監視する Datadog ビューにアクセスできます。

APM サービスリストと比較して、サービスカタログには、トレースメトリクスを積極的に放出しないサービスが含まれているため、サービスを表示するためにインスツルメンテーションする必要がないことを意味します。また、トレースデータを持つべきサービスのインスツルメンテーションの問題を調べることもできます。

サービスカタログは、以下のような場合に有効です。
- すべてのサービス、その構造、詳細情報へのリンクをわかりやすく表示することで、新しい開発者やサイトの信頼性エンジニアを育成する。
- 正しい所有者情報とコミュニケーションチャンネルを確立し、モニタリングとトラブルシューティングの詳細へのアクセスを容易にすることで、すべての人のオンコール経験を向上させる。
- エンジニアが既に使用している可観測性ツールに、ランブックやドキュメントなどのソリューションやトラブルシューティングツールへのリンクを直接埋め込む。
- 信頼性を高め、上流と下流のサービスや依存関係の所有者を簡単に特定することで、インシデントの復旧をスピードアップする。
- 可観測性データを報告していないサービスや、そのデータを監視していないサービスを検出する。
- テレメトリー間のインサイトを最適化するために、良いタグ付けの実践を促進する。
- エンジニアリングリーダーシップに、チームやサービス全体の信頼性プラクティスの概要を提供する。
- SLO、モニター、オーナーシップのないサービスなどの問題を発見する。

## サービスカタログの閲覧

[サービスカタログページ][1]では、収集したデータから検出された、または誰かが[サービスを登録](#registering-a-new-service)して定義した Datadog 組織内のサービスの一覧を見ることができます。特定のサービスを見つけるには、その名前で検索します。リストをフィルターするには、1 つまたは複数のファセットを選択します。例えば、まだサービス定義がない検出されたサービスを見るには、**Ownership Info > Telemetry Only** ファセットをクリックします。リスト内の一致するサービスのみを表示するために、チーム名でフィルターをかけたり、表示されるメトリクスを特定の環境やクラスターにスコープすると便利な場合があります。

サービスカタログのリストは、サービスタイプ、サービス名、および他の多くの列でソート可能です。Ownership ビューでチームごとにソートし、空白を探すことで、所有権の欠落を見つけることができます。また、Reliability ビューで緊急度別にソートして、最もトリガーされたモニターがあるサービスを見ることができます。

サービス定義や可観測性データを収集する Datadog 製品によって提供されるサービスに関する情報は、Ownership、Reliability、Performance の 3 つのビューに整理されます。

### Ownership ビュー

**Ownership** タブでは、**Contact** と **</>** 列のアイコンをクリックすると、サービス定義で指定されたツールやプロジェクトに移動することができます。例えば、所有するチームの Slack チャンネルや、サービスコードを含む GitHub リポジトリにアクセスすることができます。

**Telemetry** 列には、Datadog がサービスに対して収集しているテレメトリーデータの種類が表示されます。アイコンをクリックすると、対応する Datadog 製品のビューに誘導されます。例えば、Agent は Datadog にトレースを送信し、**Traces** アイコンをクリックすると APM でそれらを表示することができます。

右側のケバブメニューをクリックして、サービス定義を編集するか (存在する場合)、サービスが定義されていない場合は、サービスにリンクします。最初に[ソースコードシステムとのインテグレーションをセットアップする][2]必要があるかもしれません。

**Team** または **On Call** の列で表を並べ替えると、各チームがどのサービスを担当しているかがわかり、所有権と責任がまだ特定されていないサービスを特定できます。

### Reliability ビュー

**Reliability** タブには、サービスの安定性に関する情報が表示されます。リスト内の列をクリックして表をソートすると、以下のことがわかります。

- 最近デプロイされたサービス、または長い間デプロイされていないサービスはどれか。
- どのサービスでエラーが多く報告されているか、またそれが新しい問題であるかどうか。
- どのサービスでインシデントが発生しているか。
- どのサービスがトリガーされるモニターを持っているか。

右側の設定アイコンをクリックすると、サービスリストから列を非表示にすることができます。

### Performance ビュー

**Performance** タブでは、サービスのパフォーマンスや最も注意を払う必要があるものを表示する方法がいくつか用意されています。列をクリックして表をソートすると、以下のことがわかります。

- 最近デプロイされたサービス、または長い間デプロイされていないサービス
- 1 秒間に最も多くのリクエストを受信している、またはトラフィックを受信していないサービス
- 様々なパーセンタイルで最も高いレイテンシーを持つサービス
- 最も高いエラー数またはエラー率を持っているサービス
- 最も多くのポッド、ホスト、またはサーバーレス環境上で動作しているサービス
- 関連するダッシュボードがあるサービス。関連するダッシュボードでは、より多くのパフォーマンスデータの内訳を確認でき、サービス定義にダッシュボードを追加する必要があるものを特定することができます
- [Apdex スコア][3]が最高または最低であるサービス
- トリガーされるモニターを持つサービス

右側の設定アイコンをクリックすると、サービスリストからメトリクス列を非表示にすることができます。

## サービスを調査する

サービスをクリックすると、サイドパネルが開き、以下のような詳細が表示されます。

- チームの連絡先、ソースコード、ドキュメントやダッシュボードなどの補足情報へのリンクなど、サービス定義にある**所有権情報**。
- デプロイステータス、SLO、進行中のインシデント、エラー情報などの**信頼性情報**。
- リクエスト、エラー、レイテンシー、ダウンストリームサービスが費やした時間を示す**パフォーマンスグラフ**。
- サービスのデータを収集できる Datadog 製品の**構成の完全性ステータス**。
- YAML による**サービス定義**と、そのサービスのソースコードへのリンク。
- このサービスの上流と下流にあるサービスを表示するインタラクティブなサービスマップ。


**View Related** をクリックし、ドロップダウンメニューからページを選択すると、APM サービスページやこのサービスのサービスマップなど、Datadog の関連ページ、または分散型トレーシング、インフラストラクチャー、ネットワークパフォーマンス、ログ管理、RUM、Continuous Profiler などの関連テレメトリーデータページにナビゲートします。

## サービス定義

サービスとは、独立した、デプロイ可能なソフトウェアの単位です。Datadog [統合サービスタグ付け][4]と `DD_SERVICE` タグは、インフラストラクチャーのメトリクス、ログ、トレースなど複数のテレメトリータイプで一貫してサービスを管理・監視するための標準的な方法を提供します。追加の基準を使用してサービスを定義するには、アーキテクチャーのスタイルに合うようにサービス定義をカスタマイズすることができます。

サービス定義には以下の要素が含まれ、すべて任意です (サービス名を除く)。

Service name
: サービスの識別子で、Datadog 内で一意のもの。デフォルトでは、受信データの `DD_SERVICE` の値です。

Team
: サービスの開発・保守を担当するチーム名。

Contacts
: Slack チャンネルやメールアドレスなど、チームと連絡を取るための 1 つ以上の方法。

Links
: ランブックなど、サービスに関する重要なリソースへのリンクのリスト。

Repos
: サービスの保守、テスト、デプロイのためのソースコードと関連ファイルを含むソースコントロールリポジトリーのリスト。

Docs
: サービスに関するドキュメントへのリンク。

Tags
: Datadog の他のタグと同様に、サービス定義など、適用されるものの検索、フィルター、グループ化を支援します。

Integrations
: PagerDuty などのインテグレーションを接続し、オンコールサービスを特定するためのカスタム文字列。

### リストサービスを充実させる

テレメトリー製品 (Trace、Logs、Profiles、Infrastructure、Network Performance、RUM) のいずれかを通じて Datadog にデータを送信するサービスは、当初、`UNDEFINED` ラベルでリストされ、これは、まだサービス定義がサービスに関連付けされていないことを意味します。

チーム名、Slack チャンネル、ソースコードレポジトリなどのサービス所有権情報を追加するには、[サービス定義 API][5] を使用します。

### 新規サービスの登録

また、Datadog テレメトリーを発信しないサービスの所有権情報を管理することも可能です。サービスを登録するには、[サービス定義 API][5] を使用して、サービスの所有権、オンコール情報、およびカスタムタグを指定します。

以下のサービス定義の YAML 例を参照してください。

```yaml
---
schema-version: v2
dd-service: product-recommendation-lite
team: Shopist
contacts:
  - type: slack
    contact: https://exampleco.slack.com/archives/S319HSDB32
links: 
  - name: Demo Dashboard
    type: dashboard
    url: https://app.datadoghq.com/dashboard/abc-def-ghi
repos: 
  - name: Source 
    provider: github 
    url: https://github.com/DataDog/shopist/tree/prod/product-recommendation-lite
  - name: Deployment 
    provider: github 
    url: https://github.com/DataDog/shopist/blob/prod/k8s/dd-trace-demo/templates/product-recommendation-lite-deployment.yaml
docs: 
  - name: Datadog Doc
    provider: link
    url: https://docs.datadoghq.com/tracing/faq/service_catalog/
tags: []
```

1 つの YAML ファイルに複数のサービスを登録するには、各サービスの定義をハイフン 3 つで区切った行、`---` で記述します。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://app.datadoghq.com/services
[2]: /ja/integrations/github/
[3]: /ja/tracing/guide/configure_an_apdex_for_your_traces_with_datadog_apm/
[4]: https://www.datadoghq.com/blog/unified-service-tagging/
[5]: /ja/tracing/faq/service_definition_api/