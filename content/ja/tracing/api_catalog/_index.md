---
further_reading:
- link: /tracing/service_catalog/
  tag: ドキュメント
  text: Datadog サービスカタログ
is_beta: true
kind: documentation
title: Datadog API カタログ
---

{{< beta-callout url="https://forms.gle/TgezmEhUPXzebvv27" d-toggle="modal" d_target="#signupModal" custom_class="sign-up-trigger">}}
  Datadog API カタログはベータ版です。このフォームでアクセスをリクエストしてください。
{{< /beta-callout >}} 

{{< img src="tracing/api_catalog/api-catalog-overview.png" alt="API カタログは、API エンドポイントのリストと、そのエラー率、P99 レイテンシー、リクエスト数、および所有チームを表示し、検索、フィルター、スコープ機能を備えています。" style="width:100%;" >}}

## 概要

API カタログは、すべての API エンドポイントのパフォーマンス、信頼性、所有権を一括して調査するための単一のビューとエントリーポイントを提供します。社内サービス (非公開 API) や外部ユーザー (公開 API) で使用されている API の特性に関する最新情報を、全社的に確認できる中心的な場所です。

ミッションクリティカルな API 駆動型のビジネス機能を監視し、API の期待性能を標準化して検証し、パフォーマンスが期待値から逸脱した場合にアラートを発します。

API カタログを使用すると、チームで以下のことが可能になります。
- 重要な API と、それに依存して機能するビジネス機能の高可用性とアップタイムを提供する。
- API 回帰や不安定性の問題を防止する。
- インシデントを迅速にトリアージする。

API カタログは、Datadog 全体からデータを結合して、意見を述べるワークフローを提供し、1 つの統一ビューで異なるソースから API を調査および監視することができます。API カタログは、以下を提供します。

- **自動発見性** - 公開、非公開、パートナー API すべてのための、_エンドポイント_が組織的な原則である 1 つのインベントリ。
- Datadog の異なるソースからの**すべての API メタデータの相関**。
- パフォーマンスの問題を特定し、API の健全性を追跡するための、**Last Seen**、**Requests**、**Latency**、**Errors** などの **API エンドポイントメトリクス**。
- 定義されたパフォーマンス期待値やしきい値から逸脱したエンドポイントに対して、**アラート**を出す。
- 各エンドポイントに直接関連付けられた API **所有権情報** (チーム、オンコール、通信チャンネル) により、何か問題が発生したときに誰に連絡すればよいかがわかるため、インシデントを迅速に解決できる

<div class="alert alert-info">API カタログが行うことを理解する上で重要な概念の背景については、<a href="#key-terminology">主要な用語</a>を参照してください。</div>

## エンドポイントの確認

[API カタログ][1]ビューには、Datadog 組織内のすべての環境におけるすべてのエンドポイントが表示されます。各エンドポイントに表示されるパフォーマンスデータは、選択した環境と時間枠にスコープされます。より正確な結果を得るために、ファセットやタグを使って素早くフィルターをかけながら、異なるプロパティやメトリクスをクエリすることで、閲覧したり質問したりすることができます。

リスト表で、ヘッダーをクリックして、任意の列で**ソート**します。たとえば、レイテンシーの 99 パーセンタイルが最も高いエンドポイントを表示するには、**P99** をクリックします。

この表は、API の**チーム所有権**も示しています。この情報は、[サービスカタログ][2]の関連するサービス定義から継承されます。サービス所有者は、そのサービスに接続されているすべてのエンドポイントを所有します。

エンドポイントの**リストにフィルターをかけたり**、関心のある特定のエンドポイントを検索するには、**Search** フィールドにクエリを入力します。サービス、パス、またはその他の主要なタグで検索します。

また、左側のファセットを組み合わせて、所有している**サービス**や所属している**チーム**でフィルターをかけて選択することも可能です。

表中の**データをスコープする**には、環境、別のプライマリータグ (データセンターなど)、および時間枠を指定します。

{{< img src="tracing/api_catalog/api-catalog-scope.mp4" alt="スコープの設定を変更することで、API カタログに表示されるメトリクスがどのように変化するかを示す" video="true" >}}

[タグを定義](#group-apis-to-express-a-feature-or-business-logic)してファセットとして使用すれば、最も関心のあるエンドポイントのグループを容易に見つけることができます。



## エンドポイントの詳細を調査する

エンドポイントを確認する際、API エンドポイントの詳細をより高解像度で表示させることは有効です。

リスト内のエンドポイントをクリックすると、Datadog の様々なエリアから収集したエンドポイントのパフォーマンス、所有権、メタデータ情報を 1 つの場所に表示する詳細ページが表示されます。ここでは、短い名前と説明を編集し、カスタムタグを追加することができます。また、Datadog の他のエリアへのリンクを使用して、様々なタイプのテレメトリーの詳細な調査を開始することができます。

たとえば、次のようなことができます。
- 高いエラー率と高いリクエスト数を示したときに、パスによって特定のエンドポイント(たとえば `/checkout`) を調べる。
- Error/Hits グラフと相関する Response Code グラフを表示し、問題を特定する。
- トレースやログなど、関連するテレメトリーに移動する。

{{< img src="tracing/api_catalog/endpoint-details-pivot-to-traces.mp4" alt="エンドポイントをクリックするとエラーグラフが表示され、クリックすると関連するトレースが表示され、調査することができます。" video="true" >}}

ページ上のパフォーマンスグラフは、初期状態では API カタログページと同じ設定にスコープされており、詳細ページで時間枠セレクタやその他のスコープのドロップダウンを使用して、調査に合わせてそれらの設定を変更することができます。


## インシデント発生時のエンドポイントの確認

インシデントを調査する際、API エンドポイントの詳細な解決ビューを取得することで、根本原因の迅速な把握につながります。

さらに、特定の API エンドポイントに関連するインシデントを解決するために、各エンドポイントの所有チーム、オンコールエンジニア、連絡方法 (メール、Slack、PagerDuty) を迅速に特定することができます。

所有権情報 (チーム、オンコール情報、コミュニケーション詳細) は、サービスカタログから供給されるサービス定義から導き出されます。

{{< img src="tracing/api_catalog/api-catalog-team-details.png" alt="エンドポイント詳細ページのチーム詳細パネル。サービスカタログで定義された、エンドポイントを所有するチームの名前と通信情報が表示されます" style="width:100%;" >}}

## 機能やビジネスロジックを表現する API のグループ化

エンドポイントの詳細ページでのタグ付けに加えて、**複数のエンドポイントに一度にタグを追加してエンドポイントをグループ化する**ことができます。複数のエンドポイントのチェックボックスを選択し、**Edit tags** をクリックして、ビジネスロジック、重要性、またはその他の有用なグループ化情報を説明するラベルを提供します。これらのラベルを適用すると、独自の基準で定義されたエンドポイントのグループをすばやく表示およびアクセスしたり、共通の基盤と期待を持つエンドポイントグループのモニターやダッシュボードなどのアセットを作成したりするのに役立ちます。

たとえば、パフォーマンスの問題に特に敏感なエンドポイントに対してレイテンシーアラートを作成したい場合、それらのエンドポイントに `Latency sensitive` のようなタグを付けます。

<!-- screen cap of making the "Latency sensitive" group tktk  -->

あるいは、機密データを扱うエンドポイントに `PII` のようなタグを付けて、そのタグを持つエンドポイントが `401 Unauthorized` 応答をしたときにアラートを出すようにします。その他の便利なタグの例:

- `critical to feature X`
- `newly added - V2`
- `contains password`
- `contains PII`
- ビジネスロジック (例: `payments`)
- 特定の顧客グループ (`subscribers`)

タグを追加すると、カタログの左側にあるファセットのリストに表示されます。ファセットをクリックすると、リストがフィルターされ、タグが Search query フィールドに追加されます。


## 設定

APM データに基づいて自動的に構築される API カタログは、既存の APM インスタンスでオンにすることができ、他の設定は必要ありません。APM インスツルメントされたサービスとサポートされているライブラリのみが検出可能です。

API カタログリストを設定するには
- APM で[サービスをインツルメント][3]します。
- サービスカタログを利用して[サービス所有権情報を定義][2]します。

### 重要な用語

API
: 2 つのアプリケーションが通信できるようにするためのプロトコルとツールのセット。

API エンドポイント
: API で定義された一連のルールを実装するサーバーやサービスのリソースのアドレス (URL) で、多くの場合、HTTP、RESTful API インターフェイスを通じて提供されます。API 呼び出しの応答を行う責任を負う API エンドポイント。<br /><br/>
API カタログでは、API エンドポイントを、HTTP メソッド (たとえば `GET`)、URL パス (`/payment/{shop_id}/purchase` のようなリソースの場所の構造)、このリソースが提供するサービス名 (たとえば `Payments`) として表示しています。<br /><br/>
**ベータ版**の API カタログは、**HTTP** エンドポイントのみをサポートしています。

公開 API
: インターネットからアクセス可能な顧客向け API エンドポイント。

非公開 API
: 内部 API とも呼ばれます。企業や組織内の内部利用のみを目的とし、主にバックエンドのサービス通信に使用されます。最も一般的な API の種類です。

パートナー API
: サードパーティ API とも呼ばれます。組織がサービスを提供するために使用する他の組織の公開エンドポイント (たとえば、Stripe、Google、Facebook など)。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://app.datadoghq.com/apis/catalog
[2]: /ja/tracing/service_catalog/
[3]: /ja/tracing/trace_collection/