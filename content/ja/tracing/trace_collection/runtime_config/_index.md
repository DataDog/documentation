---
further_reading:
- link: /agent/remote_config/
  tag: ドキュメント
  text: Remote Configuration
title: 実行時の構成
---

<div class="alert alert-info">これは公開ベータ版の機能です。</div>

## 概要

ランタイムでの構成を使用すると、アプリケーションやサービスを再起動することなく、Datadog UI から APM ライブラリの構成を変更できます。構成を更新するために新しいデプロイメントやコードの変更を待つ必要はありません。その代わりに、ランタイムでの構成ですぐに更新できます。

{{< img src="/tracing/runtime_config/runtime-config-nav.mp4" alt="ランタイムでの構成を利用するためのサービスカタログのウォークスルー。" video="true" style="width:100%;">}}

## 前提条件

- [Datadog Agent][2] 7.41.1 以降。
- Agent で[リモート構成][1]が有効になっていること。
- `APM Remote Configuration Read` および `APM Remote Configuration Write` [権限][4]。
  **注**: これらの権限がない場合、組織設定を通じて権限の更新を Datadog の管理者に依頼してください。

## ランタイムでの構成の使用

ランタイムでのサービスの構成を変更するには

1. APM の[サービスカタログ][3]にアクセスします。
1. 構成を更新したいサービスにカーソルを合わせます。
1. サービス名の横にある **Full Page** をクリックします。
1. **Service Info** をクリックします。
1. **Setup Guidance** タブで、**Edit** をクリックします。
1. 必要に応じて構成オプションを変更してください。詳しくは[サポートされる構成オプション](#supported-configuration-options)を参照してください。
1. **Apply Configuration** をクリックします。

**Active Library Configuration** では、このサービスと選択した環境でどのオプションが構成されているかを確認できます。

{{< img src="/tracing/runtime_config/active-library-config.png" alt="Setup Guidance タブで、アクティブなライブラリ構成を確認できます。" style="width:100%;">}}

この例では、2 つのインスタンスにまたがるステージング環境でログ注入が有効になっていることがわかります。インスタンスとは、リモート構成クライアントのインスタンスのことです。アプリケーションのプロセスごとに 1 つのインスタンスが必要です。

構成変更が正常に適用されたことを確認するには、**X Applied** テキストを参照します。この例では、構成が 2 つのインスタンスすべてに正常に適用されています。

## サポートされる構成オプション

以下のオプションは、実行時の構成でサポートされています。各言語に必要なトレーサーのバージョンが記載されています。

| オプション                                                                                                                                 | Java      | Javascript              | Python   | .NET      | Ruby      | Go        | C++ |
|----------------------------------------------------------------------------------------------------------------------------------------|-----------|-------------------------|----------|-----------|-----------|-----------|-|
| <h5>カスタムサンプリングレート</h5>`DD_TRACE_SAMPLE_RATE` を使用してライブラリのグローバルサンプリングレートを設定します。                                  | `1.17.0+` | `4.11+` `3.32+` `2.45+` | `2.4.0+` | `2.33.0+` | `1.13.0+` | `1.59.0+` | `0.2.0+` |
| <h5>ログ注入</h5>`DD_LOGS_INJECTION` を有効にすることで、トレース相関識別子を自動的に注入してログとトレースを相関させます。 | `1.17.0+` | `4.11+` `3.32+` `2.45+` | `2.6.0+` | `2.33.0+` | `1.13.0+` |           | |
| <h5>HTTP ヘッダータグ</h5>`DD_TRACE_HEADER_TAGS` を使用して、HTTP ヘッダーの値をタグとしてトレースに追加します。                                        | `1.17.0+` | `4.11+` `3.32+` `2.45+` | `2.6.0+` | `2.33.0+` | `1.13.0+` | `1.59.0+` | |
| <h5>カスタムスパンタグ</h5>各スパンに `DD_TAGS` を使用して指定したタグを追加します。                                                              | `1.31.0+` | `4.23.0+` `3.44.0+`     | `2.5.0+` | `2.44.0+` |           | `1.59.0+` | `0.2.0+` |

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/agent/remote_config/
[2]: /ja/agent/
[3]: /ja/tracing/service_catalog/
[4]: /ja/account_management/rbac/permissions/
[5]: /ja/tracing/trace_explorer/trace_view