---
algolia:
  tags:
  - サービスカタログ
aliases:
- /ja/tracing/faq/service_catalog/
further_reading:
- link: /tracing/service_catalog/service_definition_api/
  tag: ドキュメント
  text: Service Definition API によるサービスの登録
- link: /tracing/service_catalog/guides/understanding-service-configuration
  tag: ガイド
  text: サービス構成を理解する
- link: /tracing/service_catalog/guides/upstream-downstream-dependencies
  tag: ガイド
  text: アクティブインシデント時の上流と下流の依存関係を見る
- link: https://www.datadoghq.com/blog/manage-service-catalog-categories-with-service-definition-json-schema/
  tag: ブログ
  text: サービス定義 JSON スキーマによるサービスカタログエントリーの管理
- link: https://www.datadoghq.com/blog/apm-security-view/
  tag: ブログ
  text: APM セキュリティビューでリスク、脆弱性、攻撃を視覚化する
- link: https://www.datadoghq.com/blog/service-catalog-setup/
  tag: ブログ
  text: サービスカタログの設定を簡素化することで、サービスにタグやメタデータを簡単に追加できます
- link: https://www.datadoghq.com/blog/github-actions-service-catalog/
  tag: ブログ
  text: 私は GitHub Actions を Datadog のサービスカタログに使っています。あなたもそうするべきですよ
kind: documentation
title: Datadog サービスカタログ
---

{{< img src="tracing/service_catalog/service_catalog.mp4" video=true alt="サービスカタログのナビゲーション" style="width:100%;" >}}

## 概要

Datadog サービスカタログは、組織内のすべてのサービスに関する重要な情報にアクセスするための一元的な場所です。大規模なエンドツーエンドのサービスオーナシップの実現、リアルタイムのパフォーマンスインサイトの取得、信頼性とセキュリティリスクの検出と対処、アプリケーションの依存関係の管理などをすべて 1 箇所で行うことができます。Slack などのチームコミュニケーションツール、GitHub などのソース管理、Datadog ダッシュボード、各サービスのテレメトリーデータを受信して監視する Datadog ビューにアクセスできます。

APM サービスリストと比較して、サービスカタログには、トレースメトリクスを積極的に送信しないサービスが含まれています。これは、サービスを表示するためのインスツルメンテーションが必要ないことを意味します。また、サービスカタログには、USM と RUM により検出されたサービスも自動的に含まれます。サービスカタログは 1 時間の振り返り時間をサポートしています。サービスカタログに APM サービスが表示されていない場合、直近の 1 時間でアクティブなトレースメトリクスを送信していなかった可能性が高いです。APM サービスリストでは、これらのサービスを引き続き確認できます。

サービスカタログは、以下のような場合に有効です。
- すべてのサービス、その構造、詳細情報へのリンクをわかりやすく表示することで、新しい開発者やサイトの信頼性エンジニアを育成する。
- 正しい所有者情報とコミュニケーションチャンネルを確立し、モニタリングとトラブルシューティングの詳細へのアクセスを容易にすることで、すべての人のオンコール経験を向上させる。
- エンジニアが既に使用している可観測性ツールに、ランブックやドキュメントなどのソリューションやトラブルシューティングツールへのリンクを直接埋め込む。
- 信頼性を高め、上流と下流のサービスや依存関係の所有者を簡単に特定することで、インシデントの復旧をスピードアップする。
- 可観測性データを報告していないサービスや、そのデータを監視していないサービスを検出する。
- テレメトリー間のインサイトを最適化するために、良いタグ付けの実践を促進する。
- エンジニアリングリーダーシップに、チームやサービス全体の信頼性プラクティスの概要を提供する。
- SLO、モニター、オーナーシップのないサービスなどの問題を発見する。
- アプリケーション攻撃にさらされるサービスをプロアクティブに特定します。
- サービスの依存関係の中に存在する既知のセキュリティ脆弱性を見つけて修正することで、アプリケーションのリスクを低減する。
- インフラストラクチャーに対する変更がコストに与える経時的な影響を視覚化する。
- トレンドを理解し、サービス関連コストの非効率性を特定する。

## サービスカタログの閲覧

[サービスカタログページ][1]では、収集したデータから検出された、または誰かが[サービスを登録][8]して手動で宣言した Datadog 組織内のサービスの一覧を見ることができます。特定のサービスを見つけるには、その名前で検索します。リストをフィルターするには、1 つまたは複数のファセットを選択します。例えば、まだサービス定義がない検出されたサービスを見るには、**Ownership Info > Telemetry Only** ファセットをクリックします。リスト内の一致するサービスのみを表示するために、チーム名でフィルターをかけたり、表示されるメトリクスを特定の環境やクラスターにスコープすると便利な場合があります。

サービスカタログのリストは、サービスタイプ、サービス名、および他の多くの列でソート可能です。Ownership ビューでチームごとにソートし、空白を探すことで、所有権の欠落を見つけることができます。また、Reliability ビューで緊急度別にソートして、最もトリガーされたモニターがあるサービスを見ることができます。

サービス定義や可観測性データを収集する Datadog 製品によって提供されるサービスに関する情報は、Ownership、Reliability、Performance、Security のビューに整理されます。

### Ownership ビュー

**Ownership** タブでは、**Contact** と **Repo** 列のアイコンをクリックすると、サービス定義で指定されたツールやプロジェクトに移動することができます。例えば、所有するチームの Slack チャンネルや、サービスコードを含む GitHub リポジトリにアクセスすることができます。

**Telemetry** 列には、Datadog がサービスに対して収集しているテレメトリーデータの種類が表示されます。アイコンをクリックすると、対応する Datadog 製品のビューに誘導されます。例えば、Agent は Datadog にトレースを送信し、**Traces** アイコンをクリックすると APM でそれらを表示することができます。

**Team** または **On Call** の列で表を並べ替えると、各チームがどのサービスを担当しているかがわかり、所有権と責任がまだ特定されていないサービスを特定できます。

### Reliability ビュー

**Reliability** タブには、サービスの安定性に関する情報が表示されます。リスト内の列をクリックして表をソートすると、以下のことがわかります。

- 最近デプロイされたサービス、または長い間デプロイされていないサービスはどれか。
- どのサービスでエラーが多く報告されているか、またそれが新しい問題であるかどうか。
- どのサービスでインシデントが発生しているか。
- どのサービスがトリガーされるモニターを持っているか。

右側の設定アイコンをクリックすると、サービスリストから列を非表示にすることができます。

### Performance ビュー

**Performance** タブでは、サービスのパフォーマンスや最も注意を払う必要があるものを表示する方法がいくつか用意されています。

環境のドロップダウンはフィルターとして機能します。例えば、`env:prod` を選択すると、直近 1 時間に `env:prod` でパフォーマンスデータ (APM/USM テレメトリー) を有するサービスだけがリストに表示されます。`env:*` を選択すると、サービスがテレメトリーを発するすべての環境を一目で確認でき、展開すると環境ごとの詳細なパフォーマンスメトリクスを見ることができます。
2 つ目のドロップダウンでは、Performance ビューにある APM データを、APM の[トレースメトリクス][13]の[第 2 プライマリタグ][12]に再スコープすることができます。このドロップダウンは、リストに表示されるサービスの数には影響しません。 RUM アプリケーションは (APM や USM とは異なり) 特定の環境と関連付けられておらず、環境ドロップダウンで `env*` オプションを選択した場合にのみ表示されます。

デフォルトの環境は、**APM > Setup & Configuration > Settings** で変更できます。

{{< img src="tracing/service_catalog/svc-cat-perf-view.png" alt="env:* でフィルターされ、cluster-name にスコープされたパフォーマンスビュー:*" style="width:100%;" >}}

パフォーマンスメトリクスはサービスの[プライマリオペレーション][14]に紐付いています。サービスが APM によってのみ検出される場合、パフォーマンスビューには APM の[トレースメトリクス][13]が表示されます。サービスが USM によってのみ検出される場合、パフォーマンスビューには [USM メトリクス][15]が表示されます。サービスが USM と APM によって検出された場合、パフォーマンスビューには USM メトリクスの代わりにトレースメトリクスが表示されます。

列をクリックしてテーブルを並べ替えると、以下が表示されます。
- 最近デプロイされたサービス、または長い間デプロイされていないサービス
- 1 秒間に最も多くのリクエストを受信している、またはトラフィックを受信していないサービス
- 様々なパーセンタイルで最も高いレイテンシーを持つサービス
- 最も高いエラー数またはエラー率を持っているサービス
- 最も多くのポッド、ホスト、またはサーバーレス環境上で動作しているサービス
- 関連するダッシュボードがあるサービス。関連するダッシュボードでは、より多くのパフォーマンスデータの内訳を確認でき、サービス定義にダッシュボードを追加する必要があるものを特定することができます
- [Apdex スコア][5]が最高または最低であるサービス
- トリガーされるモニターを持つサービス

右側の設定アイコンをクリックすると、リストからメトリクス列を非表示にすることができます。

### Security ビュー
*Security** タブでは、サービスのセキュリティポスチャを評価し、改善するためのいくつかの方法が用意されています。これには、オープンソースライブラリに存在する既知のセキュリティ脆弱性の数と重大度を理解する方法や、サービスが攻撃者からどのように狙われているかを確認する方法が含まれます。列をクリックして表をソートすると、以下のことがわかります。

- 既知のセキュリティ脆弱性を示しているサービス (個別の重大性を含む)。
- 攻撃を最も多く受けているサービス。
- 最も多くの攻撃者に狙われているサービス。
- 最も重大な脅威があるサービスで、サービスが攻撃によって影響を受ける。
- [Application Security Management][11] によって監視され、保護されているサービス

セキュリティ脆弱性とシグナルの詳細な説明にアクセスするには、該当サービスの行をクリックして、詳細サイドパネルを開きます。あるいは、ポップオーバー表示された **View Service Details** ボタンをクリックして、サービス詳細画面のセキュリティタブを開きます。

右側の設定アイコンをクリックすると、サービスリストからメトリクス列を非表示にすることができます。

### コストビュー
**Costs タブ**は、サービスに関連するコストを理解するための手段を複数提供してくれます。[クラウドコストマネジメント][19]を活用して、潜在的な非効率性、コスト削減の機会、そして経時的な変化を特定することができます。コストデータをサービスカタログで利用可能なメトリクスと並べることで、エンジニアリングの変更がクラウド支出に与える全般的な影響をよりうまく可視化することができます。列をクリックして表を並び替えることで、以下のようなサービスを明らかにすることができます。

- 前月の償却済み AWS コストが最も高いサービス
- 経時的なクラウド支出に大幅な変化が見られるサービス

サービスコストの変化に関する詳細については、サービスの行をクリックして、詳細なサイドパネルを開きます。Cloud Costs ページでこの情報を見るには、**View in Analytics** ボタンをクリックします。

この情報は、クラウドコストマネジメントをご利用で、必要な [AWS インテグレーション][20]と[タグパイプライン][21]の構成を行ったお客様のみ利用可能です。

右側の設定アイコンをクリックすると、サービスリストからメトリクス列を非表示にすることができます。

## サービスを調査する

サービスをクリックすると、サイドパネルが開き、以下のような詳細が表示されます。

- チームの連絡先、ソースコード、ドキュメントやダッシュボードなどの補足情報へのリンクなど、サービス定義にある**所有権情報**。
- デプロイステータス、SLO、進行中のインシデント、エラー情報などの**信頼性情報**。
- リクエスト、エラー、レイテンシー、ダウンストリームサービスが費やした時間を示す**パフォーマンスグラフ**。
- サービスのライブラリに存在する既知の脆弱性、攻撃の時期や種類、攻撃者の特定、サービスに影響を及ぼすセキュリティの脅威、ライブラリタブからソフトウェア部品表 (SBOM) をダウンロードする機能などの**セキュリティ情報**。

  {{< img src="tracing/service_catalog/libraries_sbom.png" alt="サービスカタログから個々のサービスを表示し、ライブラリタブと SBOM のダウンロード機能をハイライト" style="width:100%;" >}}

- サービスのデータを収集できる Datadog 製品の**構成の完全性ステータス**。
- YAML による**サービス定義**と、そのサービスのソースコードへのリンク。
- このサービスの上流と下流にあるサービスを表示するインタラクティブなサービスマップ。
- **ベータ版**: [リモート構成][16]を有効にして最新の Agent を構成した Java と .NET サービス用のアクティブライブラリ構成では、[トレースサンプリングレート][18]を調整し (0.0 から 1.0)、[ログ挿入][17]を有効にしてトレースとログデータを相関させ、このサービスから Datadog に入力されるすべてのトレースに適用する HTTP ヘッダータグを指定することができます。Setup Guidance タブの **Active Library Configuration** の横にある **Edit** をクリックして、これらの設定を変更し、サービスを再起動せずにすぐに適用します。

  {{< img src="tracing/service_catalog/service_details_remote_config.png" alt="Datadog UI でのサービスの構成オプション" style="width:80%;" >}}

**View Related** をクリックし、ドロップダウンメニューからページを選択すると、APM サービスページやこのサービスのサービスマップなど、Datadog の関連ページ、または分散型トレーシング、インフラストラクチャー、ネットワークパフォーマンス、ログ管理、RUM、Continuous Profiler などの関連テレメトリーデータページにナビゲートします。

## ロールベースアクセスおよび権限

一般的な情報は、[ロールベースアクセスコントロール][9]および[ロール権限][10]を参照してください。
### 読み取り権限

サービスカタログの読み取り権限により、サービスカタログのデータを読み取ることができ、以下の機能が有効になります。
- サービスカタログ一覧
- Discover UI
- サービス定義エンドポイント: `/api/v2/services/definition/<service_name>`

この権限は、**Datadog Read Only Role** および **Datadog Standard Role** でデフォルトで有効になっています。

### 書き込み権限

サービスカタログの書き込み権限は、ユーザーがサービスカタログのデータを変更することを許可します。書き込み権限は、以下の機能に対して必要です。
- `POST /api/v2/services/definitions` エンドポイントを使ったサービス定義の挿入または更新
- `DELETE /api/v2/services/definition/<service_name>` エンドポイントを使ったサービス定義の削除
- Discover Services UI でオンボーディングプロセスを完了する
- UI でのサービスメタデータの更新

この権限は、**Datadog Admin Role** および **Datadog Standard Role** でデフォルトで有効になっています。

## 参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://app.datadoghq.com/services
[2]: /ja/integrations/github/
[5]: /ja/tracing/guide/configure_an_apdex_for_your_traces_with_datadog_apm/
[6]: https://www.datadoghq.com/blog/unified-service-tagging/
[7]: /ja/tracing/service_catalog/service_definition_api/
[8]: /ja/tracing/service_catalog/setup/
[9]: /ja/account_management/rbac/
[10]: /ja/account_management/rbac/permissions/
[11]: /ja/security/application_security/how-appsec-works/
[12]: /ja/tracing/guide/setting_primary_tags_to_scope/?tab=helm#add-a-second-primary-tag-in-datadog
[13]: /ja/tracing/metrics/metrics_namespace/
[14]: /ja/tracing/guide/configuring-primary-operation/
[15]: /ja/universal_service_monitoring/guide/using_usm_metrics/#usm-metrics-vs-apm-metrics
[16]: /ja/agent/remote_config/
[17]: /ja/tracing/other_telemetry/connect_logs_and_traces/
[18]: /ja/tracing/trace_pipeline/ingestion_mechanisms/#head-based-sampling
[19]: /ja/cloud_cost_management/
[20]: /ja/cloud_cost_management/?tab=aws
[21]: /ja/cloud_cost_management/tag_pipelines