---
title: 補間
kind: documentation
aliases:
  - /ja/graphing/functions/interpolation/
---
## フィル

| 関数 | 説明                                       | 例                                    |
| :----    | :-------                                          | :---------                                 |
| `fill()` | メトリクスに欠落しているメトリクス値を補間します。 | `<METRIC_NAME>{*}.fill(<METHOD>, <LIMIT>)` |

`fill()` 関数は 2 つのパラメーターを持ちます。

* **`METHOD`**: 補間方法として使用する関数。以下から選択します。
    * **linear**: ギャップの最初から最後までを線形補間します。
    * **last**: ギャップの最後の値でギャップを埋めます。
    * **zero**: ゼロ値でギャップを埋めます。
    * **null**: 補間を無効にします。

* `LIMIT` [*任意*、*デフォルト*=**300**、*最大*=**600**]: 補間するギャップの最大サイズを表す補間制限 (秒単位)。

## デフォルトゼロ

| 関数         | 説明                             | 例                          |
| ---------------- | --------------------------------------- | -------------------------------- |
| `default_zero()` | 疎なメトリクスにデフォルト値を追加します。 | `default_zero(system.load.1{*})` |

`default_zero()` 関数は、値 0 を使用して空の間隔を埋めます。補間が有効の場合は、補間を使用します。`GAUGE` タイプのメトリクスには、デフォルトで補間が有効になっています。大部分の関数と同様、`default_zero()` は[時間集計と空間集計][1]の**後**に評価されます。

### ユースケース

`default_zero()` 関数は、次のような使用例に対応します (使用例は他にもあります)。

- 疎なメトリクスに対して算術演算を行う際にゲージを 0 に揃える (注: `as_count()` または `as_rate()` としてクエリされる `COUNT` または `RATE` タイプのメトリクスは、_常に_ 0 に揃えられます。したがって、`default_zero()` を使用しても揃え方に変更はありません。これは `GAUGE` タイプのメトリクスにのみ影響します)。
- モニターのデータなし状態を解消する。これは、単純なアラートとマルチアラートの両方で機能しますが、値 0 によってモニターがトリガーされてはなりません。たとえば、`avg(last_10m):avg:system.cpu.idle{*} < 10` というクエリを使用したモニターでは正しく機能しません。値が 0 と評価されると、このモニターが (解消ではなく) トリガーされるためです。`as_count()` クエリを使用したエラー率モニターにはこの関数を使用しないでください (詳細については[こちらの記事][2]を参照)。
- (空ではないが) 疎な系列内の空の間隔を埋める。これには、視覚的な理由またはモニター評価で時系列の最小/最大/平均を調整する目的があります。
- クエリ値ウィジェットで、データがない場合に値 0 を表示する。

### 例

`default_zero()` 関数の具体的な動作を示すために、以下のような [DogStatsD を使用した][3]カスタムメトリクスに対して単一のポイントが作成されるとします。

```text
$ echo -n "custom_metric:1|g" | nc -4u -w0 127.0.0.1 8125
```

このメトリクスを過去 30 分間クエリすると、タイムスタンプは 1 つです。クエリのロールアップ間隔のうち、1 つにしかポイントがないためです。

```text
avg:custom_metric{*}

+---------------------+---------------+
| Timestamp           | custom_metric |
+---------------------+---------------+
| ---------           | ---------     |
| 2019-04-17 17:45:00 | 1             |
+---------------------+---------------+
```

`default_zero()` 関数は、このポイントを前方に 5 分間 (ゲージの補間制限のデフォルト値) 補間してから、残りの空の間隔を 0 で埋めます。

```text
default_zero(avg:custom_metric{*})

+---------------------+-----------------------------+
| Timestamp           | default_zero(custom_metric) |
+---------------------+-----------------------------+
| ---------           | ---------                   |
| 2019-04-17 17:30:00 | 0                           |
| 2019-04-17 17:31:00 | 0                           |
...
| 2019-04-17 17:44:00 | 0                           |
| 2019-04-17 17:45:00 | 1                           |
| 2019-04-17 17:46:00 | 1                           |
| 2019-04-17 17:47:00 | 1                           |
| 2019-04-17 17:48:00 | 1                           |
| 2019-04-17 17:49:00 | 1                           |
| 2019-04-17 17:50:00 | 1                           |
| 2019-04-17 17:51:00 | 0                           |
| 2019-04-17 17:52:00 | 0                           |
...
+---------------------+-----------------------------+
```

## その他の関数

{{< whatsnext desc="他に利用できる関数を参照します。" >}}
    {{< nextlink href="/dashboards/functions/algorithms" >}}アルゴリズム: メトリクスに異常値や外れ値の検出機能を実装します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/arithmetic" >}}算術: メトリクスに対して算術演算を実行します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/count" >}}カウント: メトリクスの 0 以外または null 以外の値をカウントします。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/exclusion" >}}除外: メトリクスの特定の値を除外します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/rank" >}}ランク: メトリクスの一部のみを選択します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/rate" >}}レート: メトリクスに対してカスタム微分係数を計算します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/regression" >}}回帰: メトリクスに何らかの機械学習関数を適用します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/rollup" >}}ロールアップ: メトリクスに使用される元ポイントの数を制御します。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/smoothing" >}}スムーシング: メトリクスの変動を滑らかにします。{{< /nextlink >}}
    {{< nextlink href="/dashboards/functions/timeshift" >}}タイムシフト: メトリクスのデータポイントをタイムラインに沿って移動させます。{{< /nextlink >}}
{{< /whatsnext >}}

[1]: /ja/getting_started/from_the_query_to_the_graph/#proceed-to-space-aggregation
[2]: /ja/monitors/guide/as-count-in-monitor-evaluations/
[3]: /ja/developers/metrics/