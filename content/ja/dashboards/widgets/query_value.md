---
aliases:
- /ja/graphing/widgets/query_value/
description: 1 つのメトリクスクエリの集計値を表示する
further_reading:
- link: /ja/dashboards/graphing_json/
  tag: ドキュメント
  text: JSON を使用したダッシュボードの構築
title: クエリ値ウィジェット
widget_type: query_value
---

クエリ値は、1 つのメトリクス、APM、またはログクエリの現在の値を表示します。値は条件付き書式 (緑/黄/赤色の背景など) を使用して表示され、値が期待される範囲内にあるかどうかを示します。これに、オプションで時系列データの背景を追加することができます。クエリ値によって表示される値は、必ずしもある瞬間の測定値を必要としません。

このウィジェットは、最新の報告値を表示することも、タイムウィンドウ全体のすべてのクエリ値から計算された集計値を表示することもできます。この可視化機能は、小さくてもはっきりとしたインフラストラクチャークエリへのウィンドウを提供します。

{{< img src="dashboards/widgets/query_value/query_value1.png" alt="クエリ値ウィジェット" style="width:80%;" >}}

## セットアップ

{{< img src="dashboards/widgets/query_value/query-value-widget-setup1.png" alt="クエリ値ウィジェットのセットアップ" style="width:80%;">}}

### 構成

1. グラフ化するデータを選択します。
    * メトリクス: メトリクスクエリの構成については、[クエリ作成のドキュメント][1]を参照してください。
    * Indexed Span: Indexed Span クエリの構成については、[トレース検索に関するドキュメント][2]を参照してください。
    * ログイベント: ログイベントクエリの構成については、[ログ検索に関するドキュメント][3]を参照してください。
2. クエリの値は、指定した期間内のすべてのデータポイントを `avg`、`min`、`sum`、`max`、または `last` のいずれかで集約し、単一の値として表すことができます。サポートされている場合は、`p75` や `p90` のようなパーセンタイル値も使用できます。
3. 単位とフォーマットを選択します。自動フォーマットは、単位に基づいてダッシュボードをスケーリングします。
4. オプションで、表示される値に応じて条件付き書式を構成できます。詳しくは、[ビジュアルフォーマットルール](#visual-formatting-rules)を参照してください。
5. オプションで、時系列の背景をオーバーレイ表示します。
    * Min to Max: 最小から最大までのスケールグラフ。
    * Line: ゼロ (0) を含むためのスケールグラフ。
    * Bars: 離散的、周期的な測定値を表示します。

### オプション

#### ビジュアルフォーマットルール

<div class="alert alert-info">ビジュアルフォーマットルールは、メトリクスの生の値に基づく必要があります。メトリクスの基本単位がナノ秒であり、Query Value が秒に自動フォーマットされる場合、条件付きルールはナノ秒に基づく必要があります。</div>

条件付きルールを使用して、 Query Value ウィジェットの背景をカスタマイズできます。背景色、フォント カラー、またはカスタム イメージを追加できます。カスタム イメージを使用する場合は、ローカル コンピューターから画像をアップロードするか、パブリック インターネット上の画像を参照できます。内部画像を参照するためのクロス オリジン リクエストをサポートするように、内部サーバーを更新する必要があります。

{{< img src="dashboards/widgets/query_value/visual_formatting_rules_custom_img.png" alt="カスタムイメージの背景を持つ Query Value ウィジェットのビジュアルフォーマットルール" style="width:90%;" >}}

#### コンテキストリンク

[コンテキストリンク][1]は、デフォルトで有効になっており、オンまたはオフに切り替えることができます。コンテキストリンクは、ダッシュボードウィジェットと Datadog の他のページまたはサードパーティアプリケーションの橋渡しをします。

#### グローバルタイム

ウィジェットにカスタムタイムフレームがあるか、ダッシュボードのグローバルタイムフレームがあるかを選択します。

## API

このウィジェットは **[Dashboards API][5]** で使用できます。[ウィジェット JSON スキーマ定義][6]については、以下の表を参照してください。

{{< dashboards-widgets-api >}}

### トラブルシューティング
 - クエリでパーセンタイル値を用いて基礎データポイントを集約している場合、ウィジェット上で異なる期間を選択しても返される値が変わらないことがあります。これは、基礎となるデータポイントのサンプルサイズが非常に大きい場合に想定される挙動です。このような値の変化は、通常、より短い期間を選ぶことで確認しやすくなります。この概念の詳細については、[大数の法則][7]をご覧ください。

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/dashboards/querying/#overview
[2]: /ja/tracing/trace_explorer/query_syntax/#search-bar
[3]: /ja/logs/search_syntax/
[4]: /ja/dashboards/guide/context-links/
[5]: /ja/api/latest/dashboards/
[6]: /ja/dashboards/graphing_json/widget_json/
[7]: https://en.wikipedia.org/wiki/Law_of_large_numbers