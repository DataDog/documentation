---
aliases:
- /ja/graphing/widgets/heat_map/
description: 特定のメトリクスの時系列ヒートマップを構築する
further_reading:
- link: /ja/dashboards/graphing_json/
  tag: ドキュメント
  text: JSON を使用したダッシュボードの構築
kind: documentation
title: ヒートマップウィジェット
widget_type: ヒートマップ
---

ヒートマップ可視化機能は、多数のタグ (hosts など) に対して集計されたメトリクスを表示します。特定の値を持つホストが多いほど、四角形の色が濃く表示されます。

この可視化機能は、1 つのメトリクスクエリのみを表示します。追加のクエリは無視されます。

**注**: この可視化で外れ値の検出を行うことはできません。

{{< img src="dashboards/widgets/heat_map/heat_map.png" alt="ヒートマップ" >}}

## セットアップ

{{< img src="dashboards/widgets/heat_map/heat_map_setup.png" alt="ヒートマップの設定" style="width:80%;">}}

### コンフィギュレーション

通常どおりにメトリクスクエリを構成します。**注**: この可視化タイプは、メトリクスが `host` ごとなどの複数のタグキーに対して集計される場合にのみ有用です。

`avg`/`max`/`min`/`sum by` のコントロールで選択を行い、関連付けられているタグのデータを表示します。

### オプション

#### イベントオーバーレイ

関連するシステムからのイベントを追加して、グラフにさらにコンテキストを追加します。たとえば、GitHub のコミット、ステージング環境のイベント、またはプレフィックスに一致するコンテナのイベントを追加できます。**Event Overlays** セクションを展開し、これらのイベントを表示するためのクエリを入力します。[イベントエクスプローラー][1]と同じクエリ形式を使用します。以下の表の例を参照してください。

| クエリ                     | 説明                                                      |
|---------------------------|------------------------------------------------------------------|
| `source:(github OR chef)` | GitHub または Chef からのイベントを表示します。                                 |
| `env:staging`             | `env:staging` というタグのついたイベントを表示します。                          |
| `container_id:foo*`       | ID が `foo` で始まるすべてのコンテナからのイベントを表示します。 |

#### Y 軸コントロール

Y 軸の制御は、UI または JSON エディターから使用できます。

以下を実行できます。

* Y 軸を特定の範囲にクリップできます。
* パーセンテージしきい値または絶対しきい値に基づいて Y 軸の境界を自動的に変更できます。このしきい値をグラフの両端 (下側と上側) の一方に適用することで、「外れ値」系列を除外できます。
* Y 軸の目盛を線形から対数、累乗、または平方根に変更できます。

Y 軸の目盛を変更するには、Y-Axis Controls ボタンを展開します。

使用できる構成オプションは、次のとおりです。

| オプション                | 必須 | 説明                                                                                                                                                                                                       |
|-----------------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Min`/`Max`           | ✕       | Y 軸に表示する最小値または最大値、またはその両方を指定します。数値または `Auto` (デフォルト値を使用) を指定します。                                                                                                   |
| `Scale`               | ✕       | 目盛のタイプを指定します。使用可能な値:<br>- linear: 線形目盛 (デフォルト)<br>- log: 対数目盛<br>- pow: 2 の累乗目盛 (2 はデフォルトです。JSON で変更できます)<br>- sqrt: 平方根目盛 |
| `Always include zero` | ✕       | 常に 0 を含めるか、軸をデータの範囲に合わせるかを指定します。デフォルトは、常に 0 を含めます。                                                                                                                     |

**注**: 対数関数には負の値を適用できないため、Datadog の対数目盛は、値の符号がすべて同じ (すべて正またはすべて負) の場合にのみ機能します。そうでない場合は、空のグラフが返されます。

## API

このウィジェットは、**ダッシュボード API** とともに使用できます。詳しくは、[ダッシュボード API][2] を参照してください。

ヒートマップウィジェットの[ウィジェット JSON スキーマ定義][3]は、以下の表を参照してください。

{{< dashboards-widgets-api >}}

## その他の参考資料

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ja/events/explorer/#search-syntax
[2]: /ja/api/v1/dashboards/
[3]: /ja/dashboards/graphing_json/widget_json/