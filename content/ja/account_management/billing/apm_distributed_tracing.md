---
title: APM 料金
kind: ドキュメント
---
[APM と分散型トレーシング][1]を利用すると、マイクロサービスアーキテクチャにおけるサービスのボトルネックを見つけ出し、分散型トレースを分析することができます。また、APM と [Tracing without Limits][2] を使用することで、[タグベースのカスタム保持フィルター][3]でインデックス化されたスパンを含むアプリケーションデータを詳細に確認することができます。

**注:** Analyzed Span は、2020 年 10 月 20 日の Tracing Without Limits のローンチに伴い、Indexed Span と改名しました。

| 請求パラメーター  | 料金                                      | Indexed Span                                                                 | 課金                                                                                                                                                                                                                                                                                                                          |
|--------------------|--------------------------------------------|-------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [APM ホスト][4]      | 基底の [APM ホスト][4] あたり 31 ドル / 月 | 各 APM ホストに対し、月 100 万件の Indexed Span と 150 GB の Ingested Spans を含む   | お客様が Datadog APM サービスで同時に監視している [APM ホスト][5]数を 1 時間に一度記録します。最高水準プラン (HWMP) では、月末にこの 1 時間ごとの測定結果が最高から最低まで順序付けられ、そのうち 8 番目に高い測定値に基づき課金されます。[詳しくはこちら。][5] |
| [Fargate][4]       | 1 件の同時タスクあたり 2 ドル / 月           | 65,000 の Indexed Span と 10 GB と Ingested Spans を価格に含む。                                        | お客様が Datadog APM サービスで監視しているタスクのインスタンス数を 5 分間隔で記録します。月末にこの間隔に基づく測定値を集計し、アプリケーションが実行されて監視された合計時間数に基づいて課金されます。[詳しくはこちら][4]              |
| [Indexed span][5] | Indexed Span 100 万件あたり 1.70 ドル / 月 | すべての APM ホストで使用される Indexed Span の数が超過すると料金が発生 | Indexed Span は、スタック内の個々のサービスに対する個別のリクエストです。保持フィルターを使用してインデックス化されたスパンまたは Datadog APM サービスに送信された レガシー Analyzed Span の合計数に基づき月末に課金されます。[詳しくはこちら。][5]                                                                                          |
| [Ingested span][5] | Ingested Span 1 GB あたり 0.1 ドル / 月 | すべての APM ホストで使用される Ingested Span の数が超過すると料金が発生 | Ingested Span は、スタック内の個々のサービスに対する個別のリクエストです。Datadog に取り込まれたスパンのギガバイトの総数に基づき月末に課金されます。[詳しくはこちら][5]                                                                                          |

注: コンテナベースの環境を使用している場合、Agent をデプロイしている基底の APM ホストに対して課金されます。

詳細については、[料金ページ][6
]を参照してください。

## デプロイのサンプルシナリオ

**以下に、デフォルトで 15 日の保存期間を持つ Indexed Span の年間請求レートについて、サンプルケースを使用して説明します。アカウントのボリュームディスカウントについては、[営業担当者][6]または[カスタマーサクセス][7]マネージャーまでお問い合わせください。**

### ケース 1: ホスト、Indexed Span、追加の Ingested Span

ホストを 5 つ使用し、合計 900 GB の Ingested Span で 3,000 万件の Indexed Span を送信。

| 対象ユニット  | 数量   | 料金                                                                                           | 計算式       | 小計              |
|----------------|------------|-------------------------------------------------------------------------------------------------|---------------|-----------------------|
| APM ホスト      | 5          | 31 ドル / ホスト                                                                                    | 5 × 31 ドル       | 155 ドル                  |
| Indexed Span | 3,000 万件 | 5 つの APM ホストに 500 万件の Indexed Span が含まれるため、残りの 2,500 万件に対し 1.70 ドル / 100 万件 | 25 × 1.70 ドル    | 42.50 ドル                |
| Ingested Span | 900 GB          | 5 つの APM ホストに 750 GB の Ingested Span が含まれるため、残りの 150 GB に対し 0.10 ドル / 1 GB                                                                                 | 150 * 0.10 ドル      | 15 ドル                  |
| 合計          |            |                                                                                                 | 155 ドル + 42.50 ドル + 15 ドル | **月額 212.50 ドル** |

### ケース 2: ホスト、Fargate、Indexed Span

5 つのホストを使用し、2,000 万件の Indexed Span を送信。1 か月に平均 20 の Fargate タスクに APM をデプロイ。

| 対象ユニット  | 数量   | 料金                                                                                           | 計算式             | 小計              |
|----------------|------------|-------------------------------------------------------------------------------------------------|---------------------|-----------------------|
| APM ホスト      | 5          | 31 ドル / ホスト                                                                                    | 5 × 31 ドル             | 155 ドル                  |
| Fargate タスク  | 20         | 2 ドル / タスク                                                                                     | 20 × 2 ドル             | 40 ドル                   |
| Indexed Span | 2,000 万件 | 5 つの APM ホストに 500 万件の Indexed Span が含まれます。20のFargateタスクに130万含まれています。残りの 1,370万件のIndexed Spanに対し1.70 ドル / 100 万件 | 13.7 × 1.70 ドル          | 23.29 ドル                |
| 合計          |            |                                                                                                 | 155 ドル + 40 ドル + 23.29 ドル | **月額 218.29 ドル** |

### ケース 3: サービス、コンテナ、Indexed Span

サービス 1 はコンテナ 1 で、サービス 2 はコンテナ 2 で稼働するが、どちらも 1 つのホストで動作し、App Analytics で 2,000 万件の Indexed Span を送信。

| 対象ユニット  | 数量   | 料金                                                                                          | 計算式      | 小計             |
|----------------|------------|------------------------------------------------------------------------------------------------|--------------|----------------------|
| APM ホスト      | 1          | 31 ドル / ホスト                                                                                   | 1 × 31 ドル      | 31 ドル                  |
| Indexed Span | 2,000 万件 | 1 つの APM ホストに 100 万件の Indexed Span が含まれるため、残りの 1,900 万件に対し 1.70 ドル / 100 万件 | 19 × 1.70 ドル   | 32.30 ドル               |
| 合計          |            |                                                                                                | 31ドル  + 32.30ドル | **月額 63.30 ドル** |

### ケース 4: 動的スケーリングのホスト、コンテナ、Fargate、Indexed Span なし

アプリ 1 は 4～8 のホストインスタンスにデプロイされた 20～40 個のコンテナ上で稼働し、アプリ 2 は 10～30 の Fargate タスク上で稼働。App Analytics は使用しない。使用量が 99 パーセンタイルまでの EC2 インスタンスの数は 7、Fargate タスクの月ごとの平均数は 28 と仮定する。

| 対象ユニット | 数量 | 料金        | 計算式    | 小計           |
|---------------|----------|--------------|------------|--------------------|
| APM ホスト     | 7        | 31 ドル / ホスト | 7 × 31 ドル    | 217 ドル               |
| Fargate タスク | 28       | 2 ドル / タスク  | 28 × 2 ドル    | 56 ドル                |
| 合計         |          |              | 217ドル + 56ドル | **月額 273 ドル** |

EC2 インスタンスに Agent がデプロイされている場合、コンテナの数は料金に影響しません。

### ケース 5: Kubernetes ノードと Indexed Span

Agent は Kubernetes の 20 件のワーカーノード上で稼働し、2,000 万件の Indexed Span を送信。

| 対象ユニット     | 数量   | 料金                                                                       | 計算式   | 小計           |
|-------------------|------------|-----------------------------------------------------------------------------|-----------|--------------------|
| APM ホスト (ノード) | 20         | 31 ドル / ホスト                                                                | 20 × 31 ドル  | 620 ドル               |
| Indexed Span    | 2,000 万件 | 20 の APM ホスト (ノード) に 2,000 万件の Indexed Span が含まれるため、追加はなし | 0 × 1.70 ドル | 0                  |
| 合計             |            |                                                                             | 620 ドル + 0 ドル | **月額 620 ドル** |

Kubernetes の場合、APM はポッドではなくノードごとに課金されます。

### ケース 6: Lambda 関数と Indexed Span

1,000万個のIndexed Spansを送信しながら、1時間ごとに20個のLambda関数を1ヶ月間継続的に呼び出す。

| 対象ユニット     | 数量   | 料金                                                                       | 計算式   | 小計           |
|-------------------|------------|-----------------------------------------------------------------------------|-----------|--------------------|
| Lambda 関数   | 20          | [月額 5 ドル][8]                                               | 20 × 5 ドル  | 100 ドル               |
| Indexed Span    | 1,000 万 | 各ラムダ関数には150,000個のIndexed Spanが含まれています。追加のIndexed Span 100万個あたり1.70ドル | 7 × 1.70 ドル | 11.90 ドル               |
| 合計             |            |                                                                             | 100 ドル + 11.90 ドル | **月額 119.90 ドル** |


## よくあるご質問

**1. APM の請求対象となるホストとは？**

[ホスト][4]とは、1 つの物理的または仮想のオペレーティングシステムインスタンスです。Datadog では、お客様が Datadog インフラストラクチャーサービスで同時に監視しているホスト数を 1 時間に一度記録します。APM の請求には、[APM がインストール][9]され、トレースを送信しているホストの数が 1 時間ごとに計算されます。使用量が 99 パーセンタイルまでの [APM ホスト][5]の数を基に、月末に請求いたします。

**2. コンテナごとに 1 つの Agent をデプロイする場合、料金はどのように計算されますか**

コンテナをデプロイする場合は、基底のホストにつき 1 つの Agent を[稼働させるよう設定][10]することをお勧めします。1 つのコンテナごとに 1 つの Agent を稼働させると、各コンテナが 1 つのホストとして扱われるため、APM ホストあたりの料金にコンテナの数をかけた金額が請求されます。

**3. 請求対象となる APM Fargate タスクとは？**

Fargate タスクとは、AWS Fargate でサーバーレスコンピューターエンジンとして実行するようスケジュールされた一連のコンテナのことです。現在 Datadog で監視しているタスクの数が 5 分間隔で記録されます。APM の請求については、アカウント内でその月に Datadog へトレースを送信した Fargate タスクの 1 時間当たりの平均数に基づき算出されます。

**4. 使用量が急激に増加した場合、料金はどうなりますか**

APM の料金は、トレースを送信しているアクティブな (上位 99 パーセンタイルまでの) Agent の数を 1 時間ごとに測定し、それを基準として毎月計算します（月末に請求）。上位 1 %の使用量を無視することで、予期しない使用量の急激な増加を課金の対象から除外しています。

**5. Kubernetes の pause コンテナに対して課金されますか**

Kubernetes は、ポッドの IP アドレスを取得し、そのポッドに加わる他のコンテナに使用されるネットワークネームスペースを設定するために pause コンテナを作成します。すべての pause コンテナはクオータから除外されるため、pause コンテナに対する課金はありません (Agent 5.8 以降が必要)。Kubernetes では、APM がポッドごとではなくノードごとに課金されます。

**6. 利用するサービスの数とホスト数は、請求にどのように影響しますか**

APM では、サービスではなく、Agent をデプロイしてトレースを送信する[ホスト][4]の数に基づいて請求が発生します。App Analytics では、[Indexed Span][11] の件数に基づき請求が発生します。各サービスで送信可能な Indexed Span を推計するには、[Event Estimator][10] をご利用ください。

**7. 既存の App Analytics フィルターはどうなりますか**

2020 年 10 月 20 日現在、既存のすべての App Analytics フィルターは、自動的に Retention Filters に移行されています。フィルターは、未変更のままにするか、必要に応じて修正することができます。移行されたフィルターには、[保持フィルター][3]ページで App Analytics のレガシーフィルターであることを示す *i* が付けられます。

**8. Ingested Span のボリュームを見積もるにはどうすればよいですか？**

Datadogは、Ingested Span のボリュームを監視するためのメトリクス `datadog.estimated_usage.apm.ingested_bytes` および `datadog.estimated_usage.apm.ingested_spans` を提供します。詳細については、[使用量メトリクス][6]のドキュメントをご覧ください。

## その他の参考資料

{{< whatsnext >}}
    {{< nextlink href="account_management/billing/usage_monitor_apm/" >}}APM 使用量の表示とアラート{{< /nextlink >}}
    {{< nextlink href="account_management/billing/usage_control_apm/" >}}APM 使用量の推計と制御{{< /nextlink >}}
{{< /whatsnext >}}



[1]: /ja/tracing/
[2]: /ja/tracing/trace_search_and_analytics/
[3]: /ja/tracing/trace_retention_and_ingestion/#retention-filters
[4]: /ja/account_management/billing/pricing/#infrastructure-monitoring
[5]: /ja/account_management/billing/pricing/#apm
[6]: https://www.datadoghq.com/pricing/
[7]: mailto:success@datadoghq.com
[8]: https://docs.datadoghq.com/ja/account_management/billing/serverless/#serverless-functions
[9]: /ja/tracing/send_traces/#datadog-agent
[10]: /ja/account_management/billing/
[11]: /ja/tracing/visualization/