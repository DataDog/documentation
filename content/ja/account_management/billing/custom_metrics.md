---
aliases:
- /ja/integrations/faq/what-standard-integrations-emit-custom-metrics/
kind: documentation
title: カスタムメトリクスの課金
---

メトリクスが [{{< translate key="integration_count" >}} 種以上の Datadog インテグレーション][1]以外から送信された場合、そのメトリクスは[カスタムメトリクス][2]<sup>[(1)](#標準インテグレーション)</sup>とみなされます。

**カスタムメトリクスはメトリクス名とタグ値 (ホストタグを含む) の組み合わせにより、一意に識別されます。**

カスタムメトリクスの月間請求対象数 (使用量ページに反映) は、ある月の各時間のすべての個別カスタムメトリクスを合計し、それを月の時間数で割って月間平均値を算出します。

Metrics without LimitsTM のユーザーは、インジェストおよびインデックスされたカスタムメトリクスの月間課金量を Usage ページで確認できます。インジェストおよびインデックスされたカスタムメトリクスと [Metrics without LimitsTM][3] について詳しくはこちら。

## カスタムメトリクスの数え方

特定のメトリクス名に関連付けられたカスタムメトリクスの数は、メトリクスの[送信タイプ][4]により異なります。次のシナリオを使って、カスタムメトリクスの数え方をいくつかご紹介します。

エンドポイントリクエストのレイテンシーを測定する 2 つのホスト (`host:A` と `host:B`) から、`request.Latency` というメトリクスを送信しているとします。このメトリクスを 2 つのタグキーと共に送信します。

- `endpoint` の値は `endpoint:X` または `endpoint:Y` とします。
- `status` の値は `status:200` または `status:400` とします。

下記に示すように、データの `endpoint:X` は両ホストでサポートされていますが、`host:B` でのみ失敗するとします。また、`endpoint:Y` へのリクエストは常に成功し、`host:B` でのみ表示されます。

{{< img src="account_management/billing/custom_metrics/request_latency.png" alt="リクエストのレイテンシー" style="width:80%;">}}

{{< tabs >}}
{{% tab "Count, Rate"%}}

[COUNT][1] と [RATE][2] のカスタムメトリクスの数は、同じロジックで計算されます。

このタグスキームで RATE メトリクスに送信された一意のタグ値の組み合わせ数は **4** です。

- `host:A`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:400`
- `host:B`、`endpoint:Y`、`status:200`

これにより、`request.Latency` では **4 つのカスタムメトリクス**が報告されます。

### タグ追加の影響

タグを追加してもカスタムメトリクスが増えるとは**限りません**。カスタムメトリクス数は、一般的に、最小粒度または最も詳細なタグに対応します。例えば、米国の気温を測定しており、国と地域ごとに `temperature` メトリクスでタグ付けしたとします。その場合、次のように Datadog に送信します。

| メトリクス名   | タグ値                         |
|---------------|------------------------------------|
| `temperature` | `country:USA`、`region: Northeast` |
| `temperature` | `country:USA`、`region: Southeast` |

3 つの値 `NYC`、`Miami`、`Orlando`  を持つ `city` という タグを追加するとします。 このタグを追加すると、以下の表に示すように、より詳細でより粒度の小さい情報をデータセットに加えることになるため、カスタムメトリクスの数が増えます。

| メトリクス名   | タグ値                                          |
|---------------|-----------------------------------------------------|
| `temperature` | `country:USA`、`region: Northeast`、`city: NYC`     |
| `temperature` | `country:USA`、`region: Southeast`、`city: Orlando` |
| `temperature` | `country:USA`、`region: Southeast`、`city: Miami`   |

`temperature` から報告されるカスタムメトリクス数は、最小粒度のタグ `city` に対応します。

temperature メトリクスを `state` メトリクス (`NY` と `Florida` の 2 つの値を持つ) でタグ付けするとします。この場合、`country`、`region`、`state`、`city` で temperature をタグ付けしていることになります。state タグを追加しても、データセットにすでに存在する city タグの粒度レベルは変わりません。

Florida の気温を入手するには、次のようにカスタムメトリクスの組み合わせを変更します。

- `temperature{country:USA, state:Florida, city:Orlando}`
- `temperature{country:USA, state:Florida, city:Miami}`

**注意**: タグ値の順序を変えても一意性は増えません。次の組み合わせは共に同じカスタムメトリクスです。

- `temperature{country:USA, state:Florida, city:Miami}`
- `temperature{state:Florida, city:Miami, country:USA}`

### Metrics without LimitsTM でタグと集計を構成する

カスタムメトリクスのボリュームは、[Metrics without LimitsTM][3] を使用してタグと集計を構成することによって影響を受ける可能性があります。Metrics without LimitsTM は、インジェストコストとインデキシングコストを切り離すので、Datadog に全てのデータを送り続けることができ (全てインジェストされます)、Datadog プラットフォームでクエリ可能に残しておきたいタグの許可リストを指定することができます。Datadog が構成したメトリクスにインジェストするデータ量は、インデックスを作成した残りのデータ量とは異なるため、Usage ページと Metrics Summary ページには 2 つの異なるボリュームが表示されます。

- **Ingested Custom Metrics**: インジェストされたすべてのタグに基づくカスタムメトリクスの元となる量 (コード経由で送信されます)。
- **Indexed Custom Metrics**: Datadog プラットフォームでクエリ可能なカスタムメトリクスの量 (Metrics without LimitsTM のコンフィギュレーションに基づく) 

**注: 構成されたメトリクスのみが、Ingested custom metrics ボリュームに寄与します。**Metrics without LimitsTM でメトリクスが構成されていない場合、そのインデックスされたカスタムメトリクスボリュームに対してのみ課金されます。

#### インジェストされたカスタムメトリクスとインデックスされたカスタムメトリクスは、いつ課金されるのですか？
Metrics without LimitsTM で構成されていないメトリクスについては、インデックスされたカスタムメトリクスの代金をお支払いいただきます。

|                                      | インデックスされたカスタムメトリクス<br>(1 時間あたりの月平均カスタムメトリクス数ベース)                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| アカウントの割り当て                    | - Pro: 1 ホストあたり 100 のインデックスされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインデックスされたカスタムメトリクス                             |
| 使用量がアカウントの割り当てを超える | アカウントの割り当てを超えるインデックスされたカスタムメトリクス 100 個ごとに、現在の契約で指定された金額をお支払いいただきます。 |

Metrics without LimitsTM で構成されたメトリクス (タグ/集計が構成されている) の場合、インジェストされたカスタムメトリクスとインデックスされたカスタムメトリクスに対してお支払いいただきます。

|                                      | Ingested Custom Metrics                                                                           | インデックス付きカスタムメトリクス                                                                                                        |
|--------------------------------------|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| アカウントの割り当て                    | - Pro: 1 ホストあたり 100 のインジェストされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインジェストされたカスタムメトリクス | - Pro: 1 ホストあたり 100 のインデックスされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインデックスされたカスタムメトリクス                               |
| 使用量がアカウントの割り当てを超える | カスタムメトリクスを 100 個インジェストするごとに、アカウントの割り当てを超える場合は、0.10 ドルをお支払いいただきます。                   | アカウントの割り当てを超えるインデックスされたカスタムメトリクス 100 個ごとに、現在の契約で指定された金額をお支払いいただきます。 |

Metrics without LimitsTM を使って、`endpoint` と `status` のタグだけを残して `request.Latency` メトリクスのサイズを小さくしたいとします。その結果、以下の 3 つの一意のタグの組み合わせになります。

- `endpoint:X`、`status:200`
- `endpoint:X`、`status:400`
- `endpoint:Y`、`status:200`

タグ構成の結果、`request.Latency` は合計で **3 つのインデックスされたカスタムメトリクス**を報告しています。このメトリクスに送信されたオリジナルのタグに基づくと、`request.Latency` のオリジナルの**インジェストされた**カスタムメトリクス量は、**4 個のインジェストされたカスタムメトリクス**となります。

デフォルトでは、Datadog は、構成したメトリクスのクエリの数学的精度を維持するために、メトリクスのタイプに応じて、最も頻繁にクエリされる集計の組み合わせを保存します。

- 構成されたカウント/レートは `SUM` の時間/空間集計でクエリ可能です

クエリにとって価値がある場合は、より多くの集計にオプトインできます。インデックスされたカスタムメトリクスの数は、有効な集計の数に比例します。

[Metrics without LimitsTM][3] の詳細についてはこちらをご覧ください。

[1]: /ja/metrics/types/?tab=count#metric-types
[2]: /ja/metrics/types/?tab=rate#metric-types
[3]: /ja/metrics/metrics-without-limits
{{% /tab %}}
{{% tab "Gauge" %}}
このタグスキームで GAUGE メトリクスに送信された一意のタグ値の組み合わせ数は **4** です。

- `host:A`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:400`
- `host:B`、`endpoint:Y`、`status:200`

これにより、`request.Latency` では **4 つのカスタムメトリクス**が報告されます。

### タグ追加の影響

タグを追加してもカスタムメトリクスが増えるとは**限りません**。カスタムメトリクス数は、一般的に、最小粒度または最も詳細なタグに対応します。例えば、米国の気温を測定しており、国と地域ごとに `temperature` メトリクスでタグ付けしたとします。その場合、次のように Datadog に送信します。

| メトリクス名   | タグ値                         |
|---------------|------------------------------------|
| `temperature` | `country:USA`、`region: Northeast` |
| `temperature` | `country:USA`、`region: Southeast` |

3 つの値 `NYC`、`Miami`、`Orlando`  を持つ `city` という タグを追加するとします。 このタグを追加すると、以下の表に示すように、より詳細でより粒度の小さい情報をデータセットに加えることになるため、カスタムメトリクスの数が増えます。

| メトリクス名   | タグ値                                          |
|---------------|-----------------------------------------------------|
| `temperature` | `country:USA`、`region: Northeast`、`city: NYC`     |
| `temperature` | `country:USA`、`region: Southeast`、`city: Orlando` |
| `temperature` | `country:USA`、`region: Southeast`、`city: Miami`   |

`temperature` から報告されるカスタムメトリクス数は、最小粒度のタグ `city` に対応します。

temperature メトリクスを `state` メトリクス (`NY` と `Florida` の 2 つの値を持つ) でタグ付けするとします。この場合、`country`、`region`、`state`、`city` で temperature をタグ付けしていることになります。state タグを追加しても、データセットにすでに存在する city タグの粒度レベルは変わりません。

Florida の気温を入手するには、次のようにカスタムメトリクスの組み合わせを変更します。

- `temperature{country:USA, state:Florida, city:Orlando}`
- `temperature{country:USA, state:Florida, city:Miami}`

**注意**: タグ値の順序を変えても一意性は増えません。次の組み合わせは共に同じカスタムメトリクスです。

- `temperature{country:USA, state:Florida, city:Miami}`
- `temperature{state:Florida, city:Miami, country:USA}`

### Metrics without LimitsTM でタグと集計を構成する

カスタムメトリクスのボリュームは、[Metrics without LimitsTM][4] を使用してタグと集計を構成することによって影響を受ける可能性があります。Metrics without LimitsTM は、インジェストコストとインデキシングコストを切り離すので、Datadog に全てのデータを送り続けることができ (全てインジェストされます)、Datadog プラットフォームでクエリ可能に残しておきたいタグの許可リストを指定することができます。Datadog が構成したメトリクスにインジェストするデータ量は、インデックスを作成した残りのデータ量とは異なるため、Usage ページと Metrics Summary ページには 2 つの異なるボリュームが表示されます。

- **Ingested Custom Metrics**: インジェストされたすべてのタグに基づくカスタムメトリクスの元となる量 (コード経由で送信されます)。
- **Indexed Custom Metrics**: Datadog プラットフォームでクエリ可能なカスタムメトリクスの量 (Metrics without LimitsTM のコンフィギュレーションに基づく) 

**注: 構成されたメトリクスのみが、Ingested custom metrics ボリュームに寄与します。**Metrics without LimitsTM でメトリクスが構成されていない場合、そのインデックスされたカスタムメトリクスボリュームに対してのみ課金されます。

#### インジェストされたカスタムメトリクスとインデックスされたカスタムメトリクスは、いつ課金されるのですか？
Metrics without LimitsTM で構成されていないメトリクスについては、インデックスされたカスタムメトリクスの代金を支払います。

|                                      | インデックスされたカスタムメトリクス<br>(1 時間あたりの月平均カスタムメトリクス数ベース)                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| アカウントの割り当て                    | - Pro: 1 ホストあたり 100 のインデックスされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインデックスされたカスタムメトリクス                             |
| 使用量がアカウントの割り当てを超える | アカウントの割り当てを超えるインデックスされたカスタムメトリクス 100 個ごとに、現在の契約で指定された金額をお支払いいただきます。 |

Metrics without LimitsTM で構成されたメトリクス (タグ/集計が構成されている) の場合、インジェストされたカスタムメトリクスとインデックスされたカスタムメトリクスに対してお支払いいただきます。

|                                      | Ingested Custom Metrics                                                                           | インデックス付きカスタムメトリクス                                                                                                        |
|--------------------------------------|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| アカウントの割り当て                    | - Pro: 1 ホストあたり 100 のインジェストされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインジェストされたカスタムメトリクス | - Pro: 1 ホストあたり 100 のインデックスされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインデックスされたカスタムメトリクス                               |
| 使用量がアカウントの割り当てを超える | カスタムメトリクスを 100 個インジェストするごとに、アカウントの割り当てを超える場合は、0.10 ドルをお支払いいただきます。                   | アカウントの割り当てを超えるインデックスされたカスタムメトリクス 100 個ごとに、現在の契約で指定された金額をお支払いいただきます。 |

デフォルトでは、Datadog は、構成したメトリクスのクエリの数学的精度を維持するために、メトリクスのタイプに応じて、最も頻繁にクエリされる集計の組み合わせを以下のように保存します。

- 構成されたゲージは `AVG/AVG` の時間/空間集計ででクエリ可能です

クエリにとって価値がある場合は、より多くの集計にオプトインできます。インデックスされたカスタムメトリクスの数は、有効な集計の数に比例します。

[Metrics without LimitsTM][1] の詳細についてはこちらをご覧ください。

[1]: /ja/metrics/metrics-without-limits
{{% /tab %}}
{{% tab "Histogram" %}}

**HISTOGRAM メトリクスは、一意のメトリクス名とタグ値の組み合わせごとに 5 つのカスタムメトリクスをデフォルトで生成し、Agent 側の `max`、`median`、`avg`、`95pc`、`count` の集計をサポートします。詳細については、[HISTOGRAM メトリクスタイプ][1]をご参照ください。

このタグスキームで HISTOGRAM メトリクスに送信された一意のタグ値の組み合わせ数は **4** です。

- `host:A`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:400`
- `host:B`、`endpoint:Y`、`status:200`

デフォルトでは、Agent は元の 4 つのタグ値の組み合わせそれぞれに 5 つのカスタムメトリクスを生成して、`avg`、`count`、`median`、`95percentile`、`max` の [Agent 側の各集計を有効にします][2]。結果的に、`request.Latency` から報告される**カスタムメトリクスの総数は 4×*5 = 20** になります。

**注意**: HISTOGRAM メトリクスに集計を追加すると、個別のカスタムメトリクスの報告数が増えます。集計を削除すると、カスタムメトリクスの報告数が減ります。

- どの集計を Datadog に送信するかは、[datadog.yaml 構成ファイル][3]の `histogram_aggregates` パラメーターで構成します。デフォルトでは、`max`、`median`、`avg`、`count` の集計だけが Datadog に送信されます。必要に応じて `sum` および `min` も利用できます。
- Datadog に送信するパーセンタイル集計を、[datadog.yaml 構成ファイル][3]の `histogram_percentiles` パラメーターで構成します。デフォルトでは、パーセンタイル順位が 95 の `95percentile` だけが Datadog に送信されます。


[1]: /ja/metrics/types/?tab=histogram#metric-types
[2]: /ja/metrics/types/?tab=histogram#definition
[3]: /ja/agent/guide/agent-configuration-files/#agent-main-configuration-file
{{% /tab %}}
{{% tab "Distribution" %}}

**DISTRIBUTION メトリクスは、一意のメトリクス名とタグ値の組み合わせごとに 5 つのカスタムメトリクスをデフォルトで生成し**、値の全体的な分布を表示します。これら 5 つのカスタムメトリクスは、サーバー側の `count`、`sum`、`min`、`max`、`avg` の集計をサポートします。詳細については、[DISTRIBUTION メトリクスタイプ][1]をご参照ください。

このタグスキームで分布メトリクスに送信された一意のタグ値の組み合わせ数は **4** です。

- `host:A`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:200`
- `host:B`、`endpoint:X`、`status:400`
- `host:B`、`endpoint:Y`、`status:200`

[DISTRIBUTION メトリクス][1]のカスタムメトリクス数は、メトリクス名とタグ値の一意の組み合わせ数に 5 を掛けた数になります。結果として、`request.Latency` から報告される**カスタムメトリクスの総数は 5×*4 = 20** になります。

##### パーセンタイル集計の追加

パーセンタイル集計 (`p50`、`p75`、`p90`、`p95`、`p99`) をディストリビューションメトリクスに含めることができます。これら追加のパーセンタイル集計を含めることで、メトリクス名とタグ値の一意の組み合わせ数に 5 を掛けた数字になります。(**5\*4 = 20 カスタムメトリクス**)。そのため、パーセンタイル集計付きのこのディストリビューションメトリクスから送信されるカスタムメトリクスは、次のとおりです。**2 * (5\*4) = 40 カスタムメトリクス** 。

この表は、パーセンタイル集計をディストリビューションメトリクスに追加した場合の効果をまとめたものです。

| メトリクス                                                                                   | 課金対象となるカスタムメトリクスの数 |
|-------------------------------------------------------------------------------------------|-----------------------------------|
| ベースラインディストリビューションからのカスタムメトリクスの数 (count、sum、min、max、avg)         | `5*(tag value combinations)`      |
| パーセンタイル集計（p50、p75、p90、p95、p99）を含むカスタムメトリクスの数 | `5*(tag value combinations)`      |
| 合計                                                                                     | `2*5(tag value combinations)`     |

### Metrics without LimitsTM でタグを構成する

カスタムメトリクスのボリュームは、[Metrics without LimitsTM][2] を使用してタグと集計を構成することによって影響を受ける可能性があります。Metrics without LimitsTM は、インジェストコストとインデキシングコストを切り離すので、Datadog に全てのデータを送り続けることができ (全てインジェストされます)、Datadog プラットフォームでクエリ可能に残しておきたいタグの許可リストを指定することができます。Datadog が構成したメトリクスにインジェストするデータ量は、インデックスを作成した残りのデータ量とは異なるため、Usage ページと Metrics Summary ページには 2 つの異なるボリュームが表示されます。

- **Ingested Custom Metrics**: インジェストされたすべてのタグに基づくカスタムメトリクスの元となる量 (コード経由で送信されます)。
- **Indexed Custom Metrics**: Datadog プラットフォームでクエリ可能なカスタムメトリクスの量 (Metrics without LimitsTM のコンフィギュレーションに基づく) 

**注: 構成されたメトリクスのみが、Ingested custom metrics ボリュームに寄与します。**Metrics without LimitsTM でメトリクスが構成されていない場合、そのインデックスされたカスタムメトリクスボリュームに対してのみ課金されます。

#### インジェストされたカスタムメトリクスとインデックスされたカスタムメトリクスは、いつ課金されるのですか？
Metrics without LimitsTM で構成されていないメトリクスについては、インデックスされたカスタムメトリクスの代金を支払います。

|                                      | インデックスされたカスタムメトリクス<br>(1 時間あたりの月平均カスタムメトリクス数ベース)                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| アカウントの割り当て                    | - Pro: 1 ホストあたり 100 のインデックスされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインデックスされたカスタムメトリクス                             |
| 使用量がアカウントの割り当てを超える | アカウントの割り当てを超えるインデックスされたカスタムメトリクス 100 個ごとに、現在の契約で指定された金額をお支払いいただきます。 |

Metrics without LimitsTM で構成されたメトリクス (タグ/集計が構成されている) の場合、インジェストされたカスタムメトリクスとインデックスされたカスタムメトリクスに対してお支払いいただきます。

|                                      | Ingested Custom Metrics                                                                           | インデックス付きカスタムメトリクス                                                                                                        |
|--------------------------------------|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| アカウントの割り当て                    | - Pro: 1 ホストあたり 100 のインジェストされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインジェストされたカスタムメトリクス | - Pro: 1 ホストあたり 100 のインデックスされたカスタムメトリクス <br>- Enterprise: 1 ホストあたり 200 のインデックスされたカスタムメトリクス                               |
| 使用量がアカウントの割り当てを超える | カスタムメトリクスを 100 個インジェストするごとに、アカウントの割り当てを超える場合は、0.10 ドルをお支払いいただきます。                   | アカウントの割り当てを超えるインデックスされたカスタムメトリクス 100 個ごとに、現在の契約で指定された金額をお支払いいただきます。 |

`request.Latency` メトリクスに関連付けられた `endpoint` タグと `status` タグのみを維持すると、結果として次の 3 つのタグの組み合わせができます。

- `endpoint:X`、`status:200`
- `endpoint:X`、`status:400`
- `endpoint:Y`、`status:200`

[DISTRIBUTION メトリクス][1]からのカスタムメトリクスの数は、メトリクス名とタグ値の一意の組み合わせの 5 倍となります。タグのカスタマイズの結果、`request.Latency` は合計 **5\*3 = 15 個のインデックスされたカスタムメトリクス**を報告しています。このメトリクスで送信されたオリジナルのタグに基づくと、`request.Latency` のオリジナルの**インジェストされた**カスタムメトリクス量は、**20 個のインジェストされたカスタムメトリクス**となります。

[Metrics without LimitsTM][2] の詳細についてはこちらをご覧ください。

[1]: /ja/metrics/types/?tab=distribution#definition
[2]: /ja/metrics/metrics-without-limits
{{% /tab %}}
{{< /tabs >}}

## カスタムメトリクスの追跡

管理者ユーザー ([Datadog Admin ロール][5]を持つユーザー) は、1 時間あたりの**インジェスト**および**インデックス**されたカスタムメトリクスの月平均数を確認することができます。また、カスタムメトリクスのトップテーブルでは、[使用量の詳細ページ][6]で**インデックスされた**カスタムメトリクスの平均数を一覧で確認できます。詳細については、[使用量の詳細][7]のドキュメントを参照してください。

特定のメトリクス名のカスタムメトリクスの数をよりリアルタイムに追跡するには、[Metrics Summary ページ][8]でメトリクス名をクリックします。メトリクスの詳細サイドパネルで、**インジェストされた**カスタムメトリクスと**インデックスされた**カスタムメトリクスの数を確認することができます。
{{< img src="account_management/billing/custom_metrics/mwl_sidepanel_ingested.jpg" alt="Metrics Summary サイドパネル" style="width:80%;">}}


## 割り当て

Datadog では、料金プランごとに一定数の**インジェスト**および**インデックス**されたカスタムメトリクスが割り当てられています。

- Pro: 1 ホストあたり 100 のインジェストされたカスタムメトリクスと、1 ホストあたり 100 のインデックスされたカスタムメトリクス
- Enterprise: 1 ホストあたり 200 のインジェストされたカスタムメトリクスと、1 ホストあたり 200 のインデックスされたカスタムメトリクス

割り当ては、インフラストラクチャー全体でカウントされます。たとえば、プロプランを利用しており、3 ホスト分のライセンスを取得している場合、300 個のインデックスされたカスタムメトリクスが割り当てられます。300 個のインデックスされたカスタムメトリクスは、ホストごとに均等に振り分けることも、1 つのホストでのみ使用することもできます。例として、割り当てられたカスタムメトリクス数を超えないシナリオを下記に示しています。

{{< img src="account_management/billing/custom_metrics/host_custom_metrics.png" alt="カスタムメトリクスの割り当て"  >}}

課金されるインデックスされたカスタムメトリクスの数は、特定の月の (有料ホストすべての) カスタムメトリクスの 1 時間当たりの平均に基づきます。Metrics without LimitsTM を使用してメトリクスを構成した場合のみ、インジェストされたカスタムメトリクスの請求対象数が増加します。アカウントのカスタムメトリクスについてのご相談や、カスタムメトリクスパッケージの追加購入については、[セールス][9]チームまたは担当の[カスタマーサクセス][10]マネージャーまでお問い合わせください。

## 標準インテグレーション

以下の標準インテグレーションでは、カスタムメトリクスを生成することができます。

| インテグレーションの種類                           | インテグレーション                                                                       |
|------------------------------------------------|------------------------------------------------------------------------------------|
| デフォルトで上限 350 個のカスタムメトリクス。      | [ActiveMQ XML][11] / [Go-Expvar][12] / [Java-JMX][13]                              |
| カスタムメトリクスの収集では既定の上限なし。 | [Nagios][14] /[PDH チェック][15] /[OpenMetrics][16] /[Windows Services][17] /[WMI][18] |
| カスタムメトリクス収集の構成が可能。   | [MySQL][19] /[Oracle][20] /[Postgres][21] /[SQL Server][22]                        |
| クラウドインテグレーションから送信されたカスタムメトリクス    | [AWS][23]                                                                          |

## トラブルシューティング

技術的な質問については、[Datadog サポートチーム][24]にお問い合わせください。

課金に関するご質問は、[カスタマーサクセス][10]マネージャーにお問い合わせください。


[1]: /ja/integrations/
[2]: /ja/metrics/custom_metrics/
[3]: /ja/metrics/metrics-without-limits
[4]: /ja/metrics/types/#metric-types
[5]: /ja/account_management/users/default_roles/
[6]: https://app.datadoghq.com/billing/usage
[7]: /ja/account_management/billing/usage_details/
[8]: https://app.datadoghq.com/metric/summary
[9]: mailto:sales@datadoghq.com
[10]: mailto:success@datadoghq.com
[11]: /ja/integrations/activemq/#activemq-xml-integration
[12]: /ja/integrations/go_expvar/
[13]: /ja/integrations/java/
[14]: /ja/integrations/nagios/
[15]: /ja/integrations/pdh_check/
[16]: /ja/integrations/openmetrics/
[17]: /ja/integrations/windows_service/
[18]: /ja/integrations/wmi_check/
[19]: /ja/integrations/mysql/
[20]: /ja/integrations/oracle/
[21]: /ja/integrations/postgres/
[22]: /ja/integrations/sqlserver/
[23]: /ja/integrations/amazon_web_services/
[24]: /ja/help/