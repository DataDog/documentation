---
is_beta: false
kind: faq
title: メトリクスタグを設定する際に、”Save" ボタンが無効になるのはなぜですか？
---
提案された構成によって、インデックスが作成されたカスタムメトリクスのボリュームが、元の取り込みボリュームより大きくなる可能性があります。”Save" ボタンは、Metrics without Limits™ を使用せずにメトリクスを完全に未設定のままにした方がコスト効率が良いという、まれなシナリオでは意図的に無効になっています。

[Metrics without Limits™][1] を使用すると、コードレベルの変更なしに、元々送信した大量のメトリクスを Datadog に送信し続け、タグ構成を定義して、より少ないカスタムメトリクスのサブセットのみをインデックスに残すことができます。

Metrics without Limits™ を使用すると、数学的に正確なクエリ結果を保持するために、元の生のメトリクスデータを再結合して再集計し、インデックス化されたカスタムメトリクスのより少ないボリュームに対して保存する必要があります。したがって、残りのインデックス化されたカスタムメトリクスのそれぞれについて、Datadog は指定された数の時間/空間集計を保存します。

Metrics without Limits™ の構成でインデックス化されるカスタムメトリクスの数は、(`タグの構成で指定された残りのタグ値の組み合わせの数`) × (`集計のカスタマイズセクションで指定された時間/空間集計の数`) になります。

**例**
例えば、Metrics without Limits™ を使って `shopist.basket.size` メトリクスのカーディナリティを減らしたい場合を考えてみましょう。

{{< img src="metrics/faq/all-tags.jpg" alt="全タグ構成">}}

仮に `shopist.basket.size` が {host: a, region: us, env: prod} のような 4 つのタグ値の組み合わせに対して値を報告するとします。つまり、`shopist.basket.size` はもともと以下の図のような **4 つのカスタムメトリクス**を出力していることになります。

{{< img src="metrics/faq/all-tags-diagram.jpg" alt="全タグ構成のカスタムメトリクス内訳">}}

Metrics without Limits™ を使って `{region, env}` タグだけをタグ構成すると、3 つのタグの値の組み合わせだけが残ります。
* `{region:us, env:prod}`
* `{region:eu, env:prod}`
* `{region:us, env:dev}`

{{< img src="metrics/faq/disabled-save.png" alt="無効な保存構成">}}

この構成案から得られるカスタムメトリクスの数は、(`残りのタグ値の組み合わせ数`) x (`時間/空間集計数`) = `(3) x (2)` = **6 カスタムメトリクス**です。

{{< img src="metrics/faq/mwl-diagram.jpg" alt="MWL 構成のカスタムメトリクス内訳">}}

したがって、提案された構成では、インデックス化されたカスタムメトリクスのボリューム (6 つのカスタムメトリクス) が、元の取り込みボリューム (4 つのカスタムメトリクス) より大きくなる可能性があります。**このような場合、このメトリクスの最もコスト最適化された構成のために、“All Tags” トグルオプションを使用して、このメトリクスを未構成のままにする方がよいです。**

[1]: /ja/metrics/metrics-without-limits/