---
description: 모니터를 사용하여 서비스 수준 목표(Service Level Objectives) 정의하기
further_reading:
- link: /monitors/
  tag: 설명서
  text: 모니터에 대해 더 알아보기
- link: https://www.datadoghq.com/blog/define-and-manage-slos/#monitor-based-slo
  tag: 블로그
  text: Datadog으로 SLO를 관리한 모범 사례
kind: 설명서
title: 모니터 기반 SLO
---

## 개요
새로운 또는 기존의 Datadog 모니터에서 SLO를 만들려면 모니터 기반 SLO를 생성합니다.

시간 기반 데이터 세트는 모니터 기반 SLO에서 원활하게 매핑됩니다. 모니터 기반 SLO를 사용하면 시스템이 양호하게 작동되는 시간을 총 시간으로 나누어 서비스 수준 표시기(SLI)를 계산할 수 있습니다.

{{< img src="monitors/service_level_objectives/grouped_monitor_based_slo.png" alt="monitor-based SLO example"  >}}

## 전제 조건

모니터 기반 SLO를 생성하려면 기존 Datadog 모니터가 필요합니다. 새 모니터를 설정하려면 [모니터 생성 페이지][1]로 이동합니다.

Datadog 모니터 기반 SLO는 다음 모니터 유형을 지원합니다:
- 메트릭 모니터 유형 (메트릭, 통합, APM 메트릭, 이상 징후, 예측, 아웃라이어)
- 신서틱(Synthetic)
- 서비스 점검 (오픈 베타)

## 구성

[SLO 상태 페이지][2]에서 **새 SLO**를 선택합니다.

**소스 정의**에서 **모니터 기반**을 선택합니다.

### 쿼리 정의

검색 상자에 모니터 이름을 입력하면 일치하는 모니터 목록이 나타납니다. 모니터 이름을 클릭하여 소스 목록에 추가합니다.

SLO에서 단일 다중 경보 모니터만 사용하는 경우 "선택한 그룹에서 계산"을 선택하면 최대 20개의 그룹을 선택할 수 있습니다. 여러 모니터가 포함된 SLO에서는 그룹 선택이 지원되지 않습니다.


### SLO 목표 설정

**목표** 백분율, **시간 창** 및 선택 사항인 **경고** 수준을 선택합니다.

목표 백분율은 SLO의 기본 모니터가 ALERT 상태가 되지 않아야 하는 시간을 지정합니다.

시간 창은 SLO가 계산을 실행하는 주기를 지정합니다.

SLI 값에 따라 Datadog UI는 SLO 상태를 다른 색으로 표시합니다:
- SLI가 목푯값 이상이면 SLO 상태가 녹색으로 표시됩니다.
- SLI가 목푯값 미만이면 SLO 상태가 빨간색으로 표시됩니다.
- 경고 수준을 포함하는 경우 SLI가 경고 수준보다는 낮고 목표 수준보다 높으면 SLO 상태가 노란색으로 표시됩니다.

선택한 시간 창에 따라 모니터 기반 SLO에서 사용 가능한 정확도가 달라집니다:
- 7일 및 30일 시간 창은 소수점 이하 두 자리까지 허용합니다.
- 90일 시간 창은 소수점 이하 세 자리까지 허용합니다.

Datadog은 SLO 세부 정보 UI에서  7일 및 30일 시간 창에서는 소수점 이하 두 자리, 90일 시간 창에서는 소수점 이하 세 자리까지 표시합니다.

다음 예제는 SLO 계산 시 소수 자릿수를 제한하는 이유를 보여 줍니다. 7일 또는 30일 시간 창에 대해 99.999%의 목표를 설정하면 각각 6초 또는 26초의 오류가 발생합니다. 모니터는 1분마다 평가하므로 모니터 기반 SLO의 단위 역시 1분입니다. 따라서 하나의 경고는 6초 또는 26초의 오류 예산을 완전히 소비한 후 초과 지출합니다. 실제로 이러한 작은 오류 예산을 채우는 것은 불가능합니다. 


분당 1회의 모니터 평가보다 더 정밀한 단위가 필요한 경우 [메트릭 기반 SLO][3]를 사용하는 것이 좋습니다.

### 이름 및 태그 추가 

SLO의 이름과 확장된 설명을 선택한 후 연결할 태그를 선택합니다.

**저장 & 종료**를 선택하여 새 SLO를 저장합니다.

## 상태 계산 

{{< img src="monitors/service_level_objectives/aggregate_slo.jpg" alt="SLO detail showing 99 percent green with 8 groups aggregated"  >}}

Datadog은 특정 그룹 미선택 시 모든 모니터 또는 모니터 그룹의 가동 시간 백분율을 사용하여 전체 SLO 상태를 계산합니다. 특정 그룹을 선택한 경우 해당 그룹만 사용하여 SLO 상태를 계산하고, 그렇지 않은 경우 상태가 가장 불량한 5개의 그룹을 보여줍니다.

모니터 기반 SLO는 `WARN`상태를 `OK`로 처리합니다. SLO의 정의는 양호한 동작과 불량한 동작을 이진법으로 구별합니다. SLO 계산은 `WARN`이 불량한 동작으로 간주될 만큼 심각하지 않기 때문에 `WARN`을 양호한 동작으로 간주합니다.

3개의 모니터가 포함된 모니터 기반 SLO의 경우 다음 예를 참고하세요. 단일 다중 경보 모니터를 기반으로 한 모니터 기반 SLO 계산과 유사합니다.

| 모니터            | t1 | t2 | t3    | t4 | t5    | t6 | t7 | t8 | t9    | t10 | 상태 |
|--------------------|----|----|-------|----|-------|----|----|----|-------|-----|--------|
| 모니터 1          | OK | OK | OK    | OK | ALERT | OK | OK | OK | OK    | OK  | 90%    |
| 모니터 2          | OK | OK | OK    | OK | OK    | OK | OK | OK | ALERT | OK  | 90%    |
| 모니터 3          | OK | OK | ALERT | OK | ALERT | OK | OK | OK | OK    | OK  | 80%    |
| **전체 상태** | OK | OK | ALERT | OK | ALERT | OK | OK | OK | ALERT | OK  | 70%    |

이 예시에서는 전체 상태가 개별 상태의 평균보다 낮습니다.

### 신서틱(Synthetic) 테스트의 예외 사항
모니터 기반 SLO가 하나의 그룹화된 신서틱(Synthetic) 테스트로 구성될 시 상태 계산에서 예외가 발생할 수 있습니다. 신서틱(Synthetic) 테스트에는 ALERT 상태로 전환될 때 동작을 변경하여 전체 가동 시간에 영향을 미치는 특수한 경고 조건(선택 사항)이 있습니다:

- 지정된 시간(분) 동안 그룹에 장애가 발생할 때까지 기다립니다 (기본값: 0)
- 지정된 수의 그룹에 장애가 발생할 때까지 기다립니다 (기본값: 1)
- 위치 테스트가 실패로 간주될 때까지 지정된 횟수만큼 재시도합니다 (기본값: 0)

어느 조건이든 기본값이 아닌 다른 조건으로 변경하면 하나의 신서틱(Synthetic) 테스트를 사용하는 모니터 기반 SLO의 전체 상태가 개별 그룹의 집계 상태보다 더 나을 수 있습니다.

신서틱(Synthetic) 테스트 경고 조건에 대한 자세한 내용은 [신서틱(Synthetic) 모니터링][4]을 참조하시기 바랍니다.

### 수동 및 자동 모니터 업데이트의 영향

모니터가 수동으로 해결될 때 또는 다음 설정 **_x 시간 후 트리거 된 상태에서 이 모니터를 자동으로 해결함_**의 결과가 나타나도 SLO 계산은 변경되지 않습니다. 작업에 있어 중요한 도구라면 모니터 복제, 자동 해결 설정 및 `@-notification` 설정 제거,  SLO 복제본 사용을 고려하시기 바랍니다.

SLO의 기반이 되는 `Alert Recovery Threshold` 모니터와 `Warning Recovery Threshold`모니터를 함께 사용할 경우 SLI의 양호한 동작과 불량한 동작의 구별이 어려워지므로 Datadog은 이를 권장하지 않습니다.

모니터 음소거는 SLO 계산에 영향을 주지 않습니다.

SLO 계산에서 기간을 제외하려면 [SLO 상태 수정][5] 기능을 사용합니다.

### 누락된 데이터
메트릭 모니터 또는 서비스 점검을 생성할 때 데이터가 누락된 경우 알림을 보낼지 여부를 선택합니다. 이 설정은 모니터 기반의 SLO 계산이 누락된 데이터를 해석하는 방식에 영향을 미칩니다. 누락된 데이터를 무시하도록 설정된 모니터에서는 누락된 데이터가 있는 기간이 SLO에 의해 OK(가동 시간)로 처리됩니다. 누락된 데이터에 대해 경고하도록 구성된 모니터에서는 누락된 데이터가 있는 기간이 SLO에 의해 ALERT(비 가동 시간)로 처리됩니다.

신서틱(Synthetic) 테스트를 일시 중지하면 SLO는 누락된 데이터가 있는 기간을 계산에서 제거합니다. 이 기간은 SLO 상태 표시줄에서 회색으로 표시됩니다.


## 기본 모니터 및 SLO 기록

메트릭 모니터 유형 기반의 SLO에는 SLO 상태를 기본 모니터의 메트릭 및 쿼리 설정에서 가져온 기록 데이터로 다시 채우는 SLO 재생이 있습니다. 따라서 새 메트릭 모니터를 생성하고 SLO를 설정한 후 SLO 상태를 보기 위해 7일, 30일 또는 90일을 기다릴 필요가 없습니다. SLO 재생은 새 SLO를 생성할 때 작동되며 모니터의 기본 메트릭 및 쿼리 기록을 확인하여 상태를 채웁니다.

새 모니터 설정대로 상태를 수정하기 위해 기본 메트릭 모니터의 쿼리를 변경할 때에도 SLO 재생이 작동됩니다. SLO 재생에서 SLO 상태 기록을 다시 계산하면 모니터 업데이트 후 모니터의 상태 기록과 SLO의 상태 기록이 일치하지 않을 수 있습니다.

**참고:** 신서틱(Synthetic) 테스트 또는 서비스 점검을 기반으로 하는 SLO는 SLO 재생을 지원하지 않습니다.

## 기타 고려 사항

사용 목적에 적합한 SLI 유형을 사용하고 있는지 확인해 보세요. Datadog은 모니터 기반 SLI와 [메트릭 기반][3] SLI를 지원합니다.

## 참고 자료

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://app.datadoghq.com/monitors#create
[2]: https://app.datadoghq.com/slo
[3]: /kr/monitors/service_level_objectives/metric/
[4]: /kr/synthetics/api_tests/?tab=httptest#alert-conditions
[5]: /kr/monitors/service_level_objectives/#slo-status-corrections