---
aliases:
- /es/continuous_integration/setup_tests/go
- /es/continuous_integration/tests/go
- /es/continuous_integration/tests/setup/go
code_lang: go
code_lang_weight: 60
further_reading:
- link: /continuous_integration/tests/containers/
  tag: Documentación
  text: Reenvío de variables de entorno para tests en contenedores
- link: /continuous_integration/tests
  tag: Documentación
  text: Exploración de los resultados de tests y del rendimiento
- link: /tests/test_impact_analysis/go
  tag: Documentación
  text: Acelera tus tests con Test Impact Analysis
- link: /continuous_integration/troubleshooting/
  tag: Documentación
  text: Solucionar problemas de CI Visibility
title: Tests de Go
type: lenguaje de código múltiple
---

## Compatibilidad

Marcos para tests compatibles:

- Paquete de `testing`

## Configuración del método de notificación

Para informar de los resultados de test a Datadog, debes configurar la biblioteca de Go Datadog:

{{< tabs >}}

{{% tab "CI Provider with Auto-Instrumentation Support" %}}
{{% ci-autoinstrumentation %}}
{{% /tab %}}

{{% tab "Cloud CI Provider" %}}
{{% ci-agentless %}}
{{% /tab %}}

{{% tab "On-Premises CI Provider" %}}
{{% ci-agent %}}
{{% /tab %}}

{{< /tabs >}}

## Instalación de Orchestrion

Orchestrion es una herramienta para procesar código fuente de Go en tiempo de compilación e insertar automáticamente instrumentación mediante `dd-trace-go`.

Instala `orchestrion` desde [https://github.com/datadog/orchestrion][1] con el comando:

```bash
$ go install github.com/DataDog/orchestrion@latest
```

  - <details><summary>Optional: project <tt>go.mod</tt> registration</summary>

    >  You can automatically add `orchestrion` to your project's dependencies by running:
    > ```bash
    > $ orchestrion pin
    > ```
    > This command has the following effects:
    > 1. Create a new `orchestrion.tool.go` file containing content similar to:
    >     ```go
    >     // Code generated by `orchestrion pin`; DO NOT EDIT.
    >
    >     // This file is generated by `orchestrion pin`, and is used to include a blank import of the
    >     // orchestrion package(s) so that `go mod tidy` does not remove the requirements rom go.mod.
    >     // This file should be checked into source control.
    >
    >     //go:build tools
    >
    >     package tools
    >
    >     import _ "github.com/DataDog/orchestrion"
    >     ```
    > 2. Run `go get github.com/DataDog/orchstrion@<current-release>` to make sure the project version corresponds to the
    >    one currently being used
    > 3. Run `go mod tidy` to make sure your `go.mod` and `go.sum` files are up-to-date
    >
    > If you do not run this command, it is done automatically when required. Once done, the version of `orchestrion`
    > used by this project can be controlled directly using the `go.mod` file, as you would control any other dependency.
    </details>


Orchestrion es compatible con las dos versiones más recientes de Go, que coinciden con la [política oficial de versiones][go-releases] de Go. Puede
funcionar correctamente con versiones anteriores de Go, pero Datadog no puede dar soporte a versiones anteriores que no funcionen.

Además, Orchestrion solo admite proyectos que utilicen [módulos de Go][go-modules].

[go-releases]: https://go.dev/doc/devel/release#policy
[go-modules]: https://pkg.go.dev/cmd/go#hdr-Modules__module_versions__and_more

## Instrumentación de tests

Establece las siguientes variables de entorno para configurar la biblioteca:

`DD_CIVISIBILITY_ENABLED=true` (Obligatorio)
: Activa el producto Test Optimization.

`DD_ENV` (Obligatorio)
: entorno donde se ejecutan los tests (por ejemplo: `local` cuando se ejecutan tests en una estación de trabajo de desarrollador o `ci` cuando se ejecutan en un proveedor de CI).

Prefija tu comando de test de go con `orchestrion`:

```bash
$ orchestrion go test -race ./...
```

Si no has ejecutado `orchestrion pin`, es posible que aparezca un mensaje similar al siguiente, ya que `orchestrion pin` se ejecuta automáticamente:

```
  ╭──────────────────────────────────────────────────────────────────────────────╮
  │                                                                              │
  │  Warning: github.com/DataDog/orchestrion is not present in your go.mod       │
  │  file.                                                                       │
  │  In order to ensure build reliability and reproductibility, orchestrion      │
  │  will now add itself in your go.mod file by:                                 │
  │                                                                              │
  │      1. creating a new file named orchestrion.tool.go                        │
  │      2. running go get github.com/DataDog/orchestrion@v0.9.4                 │
  │      3. running go mod tidy                                                  │
  │                                                                              │
  │  You should commit the resulting changes into your source control system.    │
  │                                                                              │
  ╰──────────────────────────────────────────────────────────────────────────────╯
```

### Alternativa

_Orchestrion_ en el núcleo es un proxy estándar de la cadena de herramientas de Go `-toolexec`. En lugar de utilizar `orchestrion go`, también puedes
proporcionar manualmente el argumento `-toolexec` a los comandos `go` que lo acepten:

```console
$ go build -toolexec 'orchestrion toolexec' .
$ go test -toolexec 'orchestrion toolexec' -race .
```

[1]: https://github.com/datadog/orchestrion

## Referencias adicionales
{{< partial name="whats-next/whats-next.html" >}}