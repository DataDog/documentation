---
is_beta: false
kind: faq
title: 백분위수가 포함된 분포 메트릭에 대한 롤업 업데이트?
---
**이 FAQ는 지정된 기간 동안 분포에 대한 백분위수를 쿼리하는 사용자 또는 지정된 기간 내의 특정 간격에 대한 백분위수를 쿼리하려는 사용자에게 유용합니다.**

시간 집계 `(.rollup(<aggregator>, <time interval>)` 및 백분위수 집계가 포함된 분포에서 시간 집계의 작동 방식이 변경되었습니다.

## 롤업 업데이트가 백분위수가 있는 분포에 대한 기존 쿼리 값을 변경하나요?
아니요. 기존 쿼리는 영향을 받지 않습니다. `.rollup <aggregator>` 파라미터는 쿼리 결과에 영향을 미치지 않지만 결과 값이 계산되는 방식에 대해 사용자의 혼란을 야기하여 제거되었습니다. 

## 백분위수 분포에 대해 무엇이 업데이트되었나요?
이미 `p50`, `p75`, `p90`, `p95` 또는 `p99`을 선택한 경우, 추가 시간 애그리게이터(`.rollup(avg)`에서와 같이)를 더 이상 지정할 필요가 없습니다. 데이터가 집계되는 시간 간격을 결정하는 롤업 `<time interval>`만 지정하면 됩니다.

**이전 UI**
{{< img src="metrics/faq/old-rollup-distUI.jpg" alt="이전 롤업 UI">}}

**새로운 UI**
{{< img src="metrics/faq/new-rollup-distUI.jpg" alt="새 롤업 UI">}}

## 백분위수를 사용한 분포에서 더 이상 롤업/시간 애그리게이터를 지정할 수 없는 이유는 무엇인가요?
롤업 `<aggregator>` 파라미터는 백분위수로 쿼리된 분포 메트릭에 영향을 주지 않습니다. 즉, 이 두 쿼리는 모두 1분 롤업 간격으로 계산된 동일한 99번째 백분위수 값을 반환합니다.
쿼리 #1: `p99:distribution.rollup(avg, 60)`
쿼리 #2: `p99:distribution.rollup(60)`

시간적으로 먼저 집계한 다음 공간적으로 집계하는 COUNT, GAUGE 및 RATE 메트릭 유형과 달리 분포 메트릭 유형은 DDSketches로 저장됩니다. 백분위수가 있는 분포는 시간과 공간에서 동시에 병합됩니다. `p99 by`을 선택하면 시간과 공간의 99번째 백분위수로 분포 메트릭이 집계됩니다.

_예: 지난 4시간의 대시보드 시간 범위인 p99:distribution.rollup(60)에 대해 그래프를 작성한다고 가정합니다._
Datadog은 서버측 스케치 데이터를 병합하여 1분의 롤업 간격을 나타냅니다(4시간의 대시보드 시간 내 매분마다). 롤업이 계산된 후, Datadog은 각 분 간격에 대해 99번째 백분위수 값을 계산합니다.