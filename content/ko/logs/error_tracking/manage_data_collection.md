---
description: 오류 추적에서 비용을 관리하는 방법을 알아보세요.
further_reading:
- link: /monitors/types/error_tracking
  tag: 설명서
  text: 오류 추적 모니터에 대해 알아보세요.
- link: /tracing/error_tracking
  tag: 설명서
  text: 백엔드 서비스 오류 추적에 대해 알아보기
is_beta: true
private: true
title: 데이터 수집 관리
---

## 개요

오류 추적 기능은 수집할 오류를 세밀하게 제어할 수 있어 노이즈를 줄이고 예상치 못한 비용을 방지할 수 있습니다.

오류 추적에 포함할 데이터를 두 가지 방법으로 정의할 수 있습니다:

1. [규칙](#rules-inclusion)
2. [요금 제한](#rate-limits)

규칙과 요금 제한은 [**로그** > **오류 추적** > **설정**][1] 페이지에서 모두 설정할 수 있습니다. 

## 규칙

규칙을 사용하면 오류 추적에 수집할 오류를 선택할 수 있습니다.

각 규칙은 다음으로 구성됩니다:
- [로그 검색 쿼리][3]를 포함하는 포함 필터(예: `service:my-web-store`)
- 선택적으로 하나 이상의 중첩된 제외 필터를 사용하여 규칙을 더욱 세분화할 수 있습니다. 예를 들어, 제외 필터는 `env:staging` 쿼리를 사용하여 스테이징 로그를 제외할 수 있습니다.

특정 규칙은 켜거나 끌 수 있습니다. 활성 포함 필터 중 하나에서 쿼리와 일치하고 활성 중첩 제외 쿼리와 일치하지 않는 경우 오류 이벤트가 포함됩니다.

**참고: 규칙에 의해 허용되는 오류 이벤트는 [필수 속성][2]이 없는 경우 오류 추적에서 제외될 수 있습니다.

### 평가 순서

규칙은 순서대로 평가되며, 첫 번째 일치하는 규칙에서 평가가 중지됩니다. 규칙과 중첩된 필터의 우선 순위는 목록의 순서에 따라 달라집니다.

### 기본 규칙

기본적으로 오류 추적에는 `*` 포함 필터가 있고 제외 필터는 없습니다. 즉, 핑거프린팅할 [요구 사항][2]이 있는 모든 오류 로그가 오류 추적에 수집됩니다.

### 규칙 추가하기

규칙(포함 필터)을 추가하려면 다음을 수행하세요.
1. [오류 추적 설정][1]으로 이동합니다.
1. **새 규칙 추가**를 클릭합니다.
1. **이름** 필드에 이름을 입력합니다.
1. **규칙 정의 쿼리** 필드에 [로그 검색 쿼리][3]를 입력합니다.
1. **새 규칙 추가**를 클릭합니다.
1. 원하는 경우 규칙의 순서를 변경하여 [평가 순서](#evaluation-order)를 변경합니다. 지정된 규칙에서 점 6개 아이콘을 클릭하고 드래그하여 목록 에서 규칙을 위 또는 아래로 이동합니다.

{{< img src="logs/error_tracking/reorder_filters.png" alt="각 규칙의 오른쪽에는 6개의 점 아이콘이 있으며, 이를 세로로 끌어서 규칙을 재정렬할 수 있습니다." style="width:80%;">}}

### 규칙에 중첩된 제외 필터 추가하기

1. 제외 필터를 추가할 규칙을 펼칩니다. 
1. **제외 필터 추가**를 클릭합니다.
    {{< img src="log/error_tracking/filters.png" alt="제외 필터 추가 옵션을 보려면 규칙을 펼치세요." style="width:70%;">}}
1. **이름** 필드에 이름을 입력합니다.
1. **제외 필터 정의 쿼리** 필드에 [로그 검색 쿼리 ][3]을 입력합니다.
1. **제외 필터 저장**을 클릭합니다.

## 요금 제한

속도 제한을 사용하면 하루에 오류 추적에 포함되는 인덱싱된 오류 로그 수를 제어할 수 있습니다. 이 제한은 [규칙](#rules)의 포함 필터와 일치하는 모든 인덱싱된 오류 로그 에 적용됩니다.

일일 한도에 도달하면 다음 날까지 수집이 중단됩니다. 언제든지 한도를 수정하거나 제거할 수 있습니다.

### 요금 한도 설정

요금 한도를 설정하려면:
1. [**로그** > **오류 추적** > **설정**][1]으로 이동합니다.
1. **요금 한도**를 클릭합니다.
1. **오류/월** 필드를 편집합니다.
1. **요금 한도 저장**을 클릭합니다.

로그{{< img src="logs/error_tracking/rate_limit.png" alt="이 페이지 왼쪽의 '아래 요금 한도 설정' 아래에 요금 한도를 설정할 수 있는 드롭다운 메뉴가 있습니다." style="width:70%;">}}

요금 한도에 도달하면 `Rate limit applied` 이벤트 이 생성됩니다. 이벤트 보기 및 사용에 대한 자세한 내용은 [이벤트 관리 문서][4]를 참조하세요.

{{< img src="logs/error_tracking/rate_limit_reached_event.png" alt="이벤트 탐색기에서 '요금 제한 적용' <txprotected>이벤트의 스크린샷입니다. 이벤트의 상태는 정보, 출처는 오류 추적, 타임스탬프는 '6시간 전', 제목은 '요금 제한이 적용됨'입니다. <txprotected>이벤트의 태그는 'source:error_tracking'입니다. 메시지에는 '60000000 로그 오류 이벤트가 오류 추적에 전송되었으므로 요금 제한이 적용되었습니다'라는 문구가 표시됩니다. 속도 제한은 수집 제어 페이지에서 변경할 수 있습니다. " style="width:70%;">}}

## 모니터링 사용법

수집된 오류 수를 추적하는 `datadog.estimated_usage.error_tracking.logs.events` 메트릭에 대한 모니터 및 알림을 설정하여 오류 추적 사용을 모니터링하다 할 수 있습니다 로그. 

이 메트릭은 기본적으로 추가 비용 없이 사용할 수 있으며, 데이터는 15개월 동안 보관됩니다.

## 참고 자료

{{< partial name="whats-next/whats-next.html" >}}

[1]: https://app.datadoghq.com/error-tracking/settings/rules
[2]: /ko/logs/error_tracking/#setup
[3]: /ko/logs/explorer/search_syntax/
[4]: /ko/service_management/events/