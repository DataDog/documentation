---
algolia:
  tags:
  - 커스텀 메트릭 빌링
aliases:
- /integrations/faq/what-standard-integrations-emit-custom-metrics/
title: 커스텀 메트릭 빌링
---

[Datadog 통합 {{< translate key="integration_count" >}}개 중 하나][1]에서 전송된 메트릭이 아니면 [커스텀 메트릭][2]으로  간주됩니다. 일부 표준 통합에서도 커스텀 메트릭을 전송할 수 있습니다. 자세한 정보는 [커스텀 메트릭 및 표준 통합][14]을 참고하세요.

**커스텀 메트릭은 메트릭 이름과 태그 값의 고유한 조합(호스트 태그 포함)**으로 식별됩니다. 일반적으로 [DogStatsD][3] 또는 [커스텀 에이전트 점검][4]으로 전송하는 메트릭은 커스텀 메트릭입니다.

월별 요금으로 청구되는 커스텀 메트릭 개수(Usage 페이지에 반영)는 해당 월의 시간별 고유 커스텀 메트릭 총 수를 월별 총 시간 수로 나눠 월 평균 값으로 결정됩니다.

제한 없는 메트릭TM 사용자의 경우 Usage 페이지에서 _수집되고_ _인덱싱되었으며_ 청구 가능한 월별 커스텀 메트릭 볼륨을 확인할 수 있습니다. 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭과 [제한 없는 메트릭TM][5]에 관해 자세히 알아보세요.

## 커스텀 메트릭 개수

특정 메트릭 이름과 연결된 커스텀 메트릭 수는 해당 메트릭의 [제출 유형][6]에 따라 결정됩니다. 다음은 각 시나리오에 따른 커스텀 메트릭 개수를 세는 방법 예시입니다.

예를 들어 호스트 2개(`host:A`, `host:B`)에서 `request.Latency`라는 메트릭을 전송했다고 합시다. 이 메트릭은 엔드포인트 요청의 대기 시간을 측정합니다. 이 메트릭을 다음 태그 키 두 개와 함께 전송했습니다.

- `endpoint:X` 또는 `endpoint:Y` 값이 있는 `endpoint`
- `status:200` 또는 `status:400` 값이 있는 `status`

데이터에서 `endpoint:X`는 호스트 두 개 모두에서 지원되는 것인데 `host:B`에서만 실패한다고 해봅시다. 또 `endpoint:Y`로 가는 요청이 항상 성공해서 `host:B`에만 아래와 같이 표시된다고 합시다.

{{< img src="account_management/billing/custom_metrics/request_latency.png" alt="Request latency" style="width:80%;">}}

{{< tabs >}}
{{% tab "Count, Rate"%}}

[COUNT][1]와 [RATE][2]의 커스텀 메트릭 개수도 같은 방법으로 계산됩니다.

이 태깅 체계에서 RATE 메트릭으로 전송된 고유 태그 값 조합의 개수는 **4개**입니다.

- `host:A`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:400`
- `host:B`, `endpoint:Y`, `status:200`

따라서 `request.Latency`의 경우 **커스텀 메트릭 4개**를 보고한 것입니다.

### 태그 추가로 발생하는 영향

태그를 추가한다고 해서 반드시 커스텀 메트릭이 더 많이 발생하는 것이 **아닙니다**. 커스텀 메트릭 개수는 보통 가장 세분화되거나 상세한 태그를 사용할 때 늘어납니다. 예를 들어 미국의 기온을 측정하기 위해 미국의 카운티와 리전별로 `temperature` 메트릭을 태그했다고 합시다. 그러면 다음을 Datadog에 전송하게 됩니다.

| 메트릭 이름   | 태그 값                         |
|---------------|------------------------------------|
| `temperature` | `country:USA`, `region: Northeast` |
| `temperature` | `country:USA`, `region: Southeast` |

`NYC`, `Miami`, `Orlando` 값에 `city` 태그를 추가한다고 합시다. 이 태그를 추가하면 아래와 같이 데이터세트에 더 상세하고 세분화된 정보를 제공하기 때문에 커스텀 메트릭 개수가 늘어납니다.

| 메트릭 이름   | 태그 값                                          |
|---------------|-----------------------------------------------------|
| `temperature` | `country:USA`, `region: Northeast`, `city: NYC`     |
| `temperature` | `country:USA`, `region: Southeast`, `city: Orlando` |
| `temperature` | `country:USA`, `region: Southeast`, `city: Miami`   |

`temperature`에서 전송되는 커스텀 메트릭 개수가 세부화 태그인 `city`가 더해져 규모가 늘어나게 됩니다.

추가로 `state`별로 기온 메트릭을 태그한다고 합시다(값은 `NY`와 `Florida`가 있음). 이 경우 기온이 `country`, `region`, `state`, `city` 태그로 태깅됩니다. State 태그를 추가하더라도 데이터세트에 City 태그로 이미 존재하는 세분성 수준이 늘어나지 않습니다.

플로리다의 기온 데이터를 얻으려면 다음 커스텀 메트릭을 다시 결합할 수 있습니다.

- `temperature{country:USA, state:Florida, city:Orlando}`
- `temperature{country:USA, state:Florida, city:Miami}`

**참고**: 태그 값을 재정렬해도 고유 값이 추가되지 않습니다. 다음 조합도 동일한 커스텀 메트릭입니다.

- `temperature{country:USA, state:Florida, city:Miami}`
- `temperature{state:Florida, city:Miami, country:USA}`

### 제한 없는 메트릭TM으로 태그 및 집계 구성

[제한 없는 메트릭TM][3]을 사용해 태그와 집계를 구성할 경우 커스텀 메트릭 볼륨에 영향을 줄 수 있습니다. 제한 없는 메트릭 수집TM을 이용하면 인덱스 비용과 수집 비용이 분리됩니다. 따라서 모든 데이터(모두 수집)를 Datadog에 계속 전송하면서 Datadog 플랫폼에서 쿼리 가능한 태그 허용 목록을 지정할 수 있습니다. 메트릭 구성에 따라 Datadog에서 수집하는 데이터 볼륨과 이보다 적은 나머지 인덱싱된 데이터 볼륨이 다르므로 Usage 페이지와 Metrics Summary 페이지에 값이 다른 볼륨 두 개가 따로 표시됩니다.

- **수집된 커스텀 메트릭**: 수집 태그 전체(코드를 통해 전송됨)를 기준으로 한 커스텀 메트릭 원 볼륨입니다.
- **인덱싱된 커스텀 메트릭**: Datadog 플랫폼에서 쿼리 가능한 커스텀 메트릭 볼륨(제한 없는 메트릭 수집TM 설정 기준)입니다.

**참고: 설정된 메트릭만 수집된 커스텀 메트릭 볼륨에 영향을 줍니다.** 메트릭이 제한 없는 메트릭 수집TM으로 설정되지 않은 경우, 인덱싱된 커스텀 메트릭 볼륨에만 요금이 부과됩니다.

#### 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭 요금이 청구되는 시기는 언제인가요?
제한 없는 메트릭TM으로 구성되지 않은 메트릭의 경우 인덱싱된 커스텀 메트릭 요금이 부과됩니다.

|                                      | 인덱싱된 커스텀 메트릭<br>(월별 시간당 평균 커스텀 메트릭 개수 기반)                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 계정 할당                    | - 프로: 호스트당 인덱싱된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 인덱싱된 커스텀 메트릭 200개                             |
| 사용량이 계정 할당량을 초과할 경우 | 계정 할당량을 기준으로 인덱싱된 커스텀 메트릭 개수가 100개를 초과할 때마다 현재 계약에 명시된 금액이 부과됩니다. |

제한 없는 메트릭TM으로 구성된 메트릭의 경우(태그/집계 구성됨) 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭 요금이 부과됩니다.

|                                      | 수집된 커스텀 메트릭                                                                           | 인덱싱된 커스텀 메트릭                                                                                                        |
|--------------------------------------|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 계정 할당                    | - 프로: 호스트당 수집된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 수집된 커스텀 메트릭 200개 | - 프로: 호스트당 인덱싱된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 인덱싱된 커스텀 메트릭 200개                               |
| 사용량이 계정 할당량을 초과할 경우 | 계정 할당량을 기준으로 수집된 커스텀 메트릭 100개를 초과할 때마다 요금 $0.10가 부과됩니다.                   | 계정 할당량을 기준으로 인덱싱된 커스텀 메트릭 개수가 100개를 초과할 때마다 현재 계약에 명시된 금액이 부과됩니다. |

제한 없는 메트릭TM을 사용해 `endpoint`와 `status` 태그만 남겨서 `request.Latency` 메트릭 크기를 줄이고 싶다고 합시다. 그러면 다음의 고유한 태그 조합 세 개가 생성됩니다.

- `endpoint:X`, `status:200`
- `endpoint:X`, `status:400`
- `endpoint:Y`, `status:200`

태그 구성 결과로 `request.Latency`에서는 총 **인덱싱된 커스텀 메트릭 3개**를 보고하게 됩니다. 이 메트릭에서 전송된 원 태그에 기반해 `request.Latency`의 원래 **수집된** 커스텀 메트릭 볼륨은 **수집된 커스텀 메트릭 4개**입니다.

기본적으로 Datadog에서는 구성된 메트릭 쿼리의 수학적 정확도를 유지하기 위해 메트릭 유형에 따라 가장 자주 쿼리된 집계 조합을 저장합니다.

- 설정된 개수/비율은 `SUM` 시간/공간 집계를 사용해 쿼리할 수 있습니다.

집계가 쿼리에 유용할 경우 집계를 더 추가할 수도 있습니다. 인덱싱된 커스텀 메트릭 개수는 활성화한 집계 수가 늘어남에 따라 증가합니다.

[제한 없는 메트릭TM][3]에 대해 더 알아보기

[1]: /ko/metrics/types/?tab=count#metric-types
[2]: /ko/metrics/types/?tab=rate#metric-types
[3]: /ko/metrics/metrics-without-limits
{{% /tab %}}
{{% tab "Gauge" %}}
이 태깅 체계에서 GAUGE 메트릭으로 전송된 고유 태그 값 조합 개수는 **4개**입니다.

- `host:A`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:400`
- `host:B`, `endpoint:Y`, `status:200`

따라서 `request.Latency`의 경우 **커스텀 메트릭 4개**를 보고합니다.

### 태그 추가로 발생하는 영향

태그를 추가한다고 해서 반드시 커스텀 메트릭이 더 많이 발생하는 것이 **아닙니다**. 커스텀 메트릭 개수는 보통 가장 세분화되거나 상세한 태그를 사용할 때 늘어납니다. 예를 들어 미국의 기온을 측정하기 위해 미국의 카운티와 리전별로 `temperature` 메트릭을 태깅했다고 합시다. 그러면 다음을 Datadog에 전송하게 됩니다.

| 메트릭 이름   | 태그 값                         |
|---------------|------------------------------------|
| `temperature` | `country:USA`, `region: Northeast` |
| `temperature` | `country:USA`, `region: Southeast` |

`NYC`, `Miami`, `Orlando` 값에 `city` 태그를 추가한다고 합시다. 이 태그를 추가하면 아래와 같이 데이터세트에 더 상세하고 세분화된 정보를 제공하기 때문에 커스텀 메트릭 개수가 늘어납니다.

| 메트릭 이름   | 태그 값                                          |
|---------------|-----------------------------------------------------|
| `temperature` | `country:USA`, `region: Northeast`, `city: NYC`     |
| `temperature` | `country:USA`, `region: Southeast`, `city: Orlando` |
| `temperature` | `country:USA`, `region: Southeast`, `city: Miami`   |

`temperature`에서 전송되는 커스텀 메트릭 개수가 세부화 태그인 `city`가 더해져 규모가 늘어나게 됩니다.

추가로 `state`별로 기온 메트릭을 태그한다고 합시다(값은 `NY`와 `Florida`가 있음). 이 경우 기온이 `country`, `region`, `state`, `city`로 태깅됩니다. State 태그를 추가하더라도 데이터세트에 City 태그로 이미 존재하는 세분성 수준이 늘어나지 않습니다.

플로리다의 기온 데이터를 얻으려면 다음 커스텀 메트릭을 다시 결합할 수 있습니다.

- `temperature{country:USA, state:Florida, city:Orlando}`
- `temperature{country:USA, state:Florida, city:Miami}`

**참고**: 태그 값을 재정렬해도 고유 값이 추가되지 않습니다. 다음 조합도 동일한 커스텀 메트릭입니다.

- `temperature{country:USA, state:Florida, city:Miami}`
- `temperature{state:Florida, city:Miami, country:USA}`

### 제한 없는 메트릭TM으로 태그 및 집계 구성

[제한 없는 메트릭TM][4]을 사용해 태그와 집계를 구성할 경우 커스텀 메트릭 볼륨에 영향을 줄 수 있습니다. 제한 없는 메트릭 수집TM을 이용하면 인덱스 비용과 수집 비용이 분리됩니다. 따라서 모든 데이터(모두 수집)를 Datadog에 계속 전송하면서 Datadog 플랫폼에서 쿼리 가능한 태그 허용 목록을 지정할 수 있습니다. 메트릭 구성에 따라 Datadog에서 수집하는 데이터 볼륨과 이보다 적은 나머지 인덱싱된 데이터 볼륨이 다르므로 Usage 페이지와 Metrics Summary 페이지에 값이 다른 볼륨 두 개가 따로 표시됩니다.

- **수집된 커스텀 메트릭**: 수집 태그 전체(코드를 통해 전송됨)를 기준으로 한 커스텀 메트릭 원 볼륨입니다.
- **인덱스된 커스텀 메트릭**: Datadog 플랫폼에서 쿼리 가능한 커스텀 메트릭 볼륨(모든 제한없는 메트릭 수집TM 설정 기준)입니다.

**참고: 설정된 메트릭만 수집된 커스텀 메트릭 볼륨에 기여하게 됩니다.** 제한없는 메트릭 수집TM으로 메트릭이 설정되지 않은 경우, 인덱스된 커스텀 메트릭 볼륨에 대해서만 요금이 부과됩니다.

#### 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭 요금이 청구되는 시기는 언제인가요?
제한 없는 메트릭TM으로 구성되지 않은 메트릭의 경우 인덱싱된 커스텀 메트릭 요금이 부과됩니다.

|                                      | 인덱싱된 커스텀 메트릭<br>(월별 시간당 평균 커스텀 메트릭 개수 기반)                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 계정 할당                    | - 프로: 호스트당 인덱싱된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 인덱싱된 커스텀 메트릭 200개                             |
| 사용량이 계정 할당량을 초과할 경우 | 계정 할당량을 기준으로 인덱싱된 커스텀 메트릭 개수가 100개를 초과할 때마다 현재 계약에 명시된 금액이 부과됩니다. |

제한 없는 메트릭TM으로 구성된 메트릭의 경우(태그/집계 구성됨) 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭 요금이 부과됩니다.

|                                      | 수집된 커스텀 메트릭                                                                           | 인덱스된 커스텀 메트릭                                                                                                        |
|--------------------------------------|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 계정 할당                    | - 프로: 호스트당 수집된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 수집된 커스텀 메트릭 200개 | - Pro: 호스트당 인덱싱된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 인덱싱된 커스텀 메트릭 200개                               |
| 사용량이 계정 할당량을 초과할 경우 | 계정 할당량을 기준으로 수집된 커스텀 메트릭 100개를 초과할 때마다 요금 $0.10가 부과됩니다.                   | 계정 할당량을 기준으로 인덱싱된 커스텀 메트릭 개수가 100개를 초과할 때마다 현재 계약에 명시된 금액이 부과됩니다. |

기본적으로 Datadog에서는 구성된 메트릭 쿼리의 수학적 정확도를 유지하기 위해 다음과 같이 메트릭 유형에 따라 가장 자주 쿼리된 집계 조합을 저장합니다.

- 구성된 게이지를 `AVG/AVG`의 시간/공간 집계에서 쿼리할 수 있습니다.

집계가 쿼리에 유용할 경우 집계를 더 추가할 수도 있습니다. 인덱싱된 커스텀 메트릭 개수는 활성화한 집계 수가 늘어남에 따라 증가합니다.

[제한 없는 메트릭TM][1]에 대해 더 알아보기

[1]: /ko/metrics/metrics-without-limits
{{% /tab %}}
{{% tab "Histogram" %}}

**기본적으로 HISTOGRAM 메트릭은 고유한 각 메트릭 이름 및 태그 값 조합에 커스텀 메트릭 다섯 개를 생성해** 에이전트측 집계 `max`, `median`, `avg`, `95pc`, `count`를 지원합니다. [HISTOGRAM 메트릭 유형에 대해 더 알아보세요][1].

이 태깅 체계에서 HISTOGRAM 메트릭으로 전송된 고유 태그 값 조합의 개수는 **4개**입니다.

- `host:A`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:400`
- `host:B`, `endpoint:Y`, `status:200`

기본적으로 에이전트는 원래의 고유한 각 태그 값 조합 네 개에 커스텀 메트릭 다섯 개를 생성해 [활성화된 각 에이전트측 집계][2]인 `avg`, `count`, `median`, `95percentile`, `max`를 표시합니다. 따라서 `request.Latency`에서 총 **4\*5 = 20개 커스텀 메트릭을 보고합니다**.

**참고**: HISTOGRAM 메트릭에 집계를 추가하면 보고하는 커스텀 메트릭 개수가 늘어납니다. 집계를 제거하면 보고하는 커스텀 메트릭 개수가 줄어듭니다.

-  [datadog.yaml 구성 파일][3]에서 `histogram_aggregates` 파라미터를 사용해 Datadog로 전송하려는 집계를 구성하세요. 기본적으로 `max`, `median`, `avg`, `count` 집계만 Datadog로 전송됩니다. 원할 경우 `sum`과 `min`도 사용할 수 있습니다.
- [datadog.yaml 구성 파일][3]에서 `histogram_percentiles` 파라미터를 사용해 Datadog로 전송하려는 백분위수 집계를 설정하세요. 기본적으로 95번째 백분위수인 `95percentile`만 Datadog로 전송됩니다.


[1]: /ko/metrics/types/?tab=histogram#metric-types
[2]: /ko/metrics/types/?tab=histogram#definition
[3]: /ko/agent/configuration/agent-configuration-files/#agent-main-configuration-file
{{% /tab %}}
{{% tab "Distribution" %}}

**기본적으로 DISTRIBUTION 메트릭은 고유한 각 메트릭 이름 및 태그 값 조합에 커스텀 메트릭 다섯 개를 생성해** 값의 전역 통계 분포를 나타냅니다. 이 커스텀 메트릭 다섯 개가 `count`, `sum`, `min`, `max`, `avg`의 서버측 집계를 나타냅니다. [DISTRIBUTION 메트릭 유형에 대해 자세히 알아보세요][1].

이 태깅 체계에서 HISTOGRAM 메트릭으로 전송된 고유 태그 값 조합의 개수는 **4개**입니다.

- `host:A`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:200`
- `host:B`, `endpoint:X`, `status:400`
- `host:B`, `endpoint:Y`, `status:200`

[DISTRIBUTION 메트릭][1]의 커스텀 메트릭 개수는 메트릭 이름과 태그 값의 고유한 조합 개수의 다섯 배입니다. 따라서 `request.Latency`에서 총 **5\*4 = 20개 커스텀 메트릭**을 보고합니다.

##### 백분위수 집계 추가

분포 메트릭에 백분위수 집계(`p50`, `p75`, `p90`, `p95` 및 `p99`)를 포함할 수 있습니다. 이러한 추가 백분위수 집계를 포함하면 메트릭 이름 및 태그 값(**5\*4 = 20개 커스텀 메트릭**) 고유 조합의 5배에 해당하는 추가 볼륨이 생성됩니다. 그러므로 백분위수 집계를 사용한 이 분포 메트릭에 따른 커스텀 메트릭 총 수는 **2 * (5\*4) = 40개 커스텀 메트릭**입니다.

이 표는 분포 메트릭에 백분위수 추가했을 때 발생하는 영향을 요약한 것입니다.

| 메트릭                                                                                   | 요금 청구가 가능한 커스텀 메트릭 개수 |
|-------------------------------------------------------------------------------------------|-----------------------------------|
| 기준 배포의 커스텀 메트릭 개수(count, sum, min, max, avg)         | `5*(tag value combinations)`      |
| 백분위수 집계를 포함한 커스텀 메트릭 개수(p50, p75, p90, p95, p99) | `5*(tag value combinations)`      |
| 총계                                                                                     | `2*5(tag value combinations)`     |

### 제한 없는 메트릭TM을 사용한 태그 구성

[제한 없는 메트릭TM][2]을 사용해 태그와 집계를 구성할 경우 커스텀 메트릭 볼륨에 영향을 줄 수 있습니다. 제한 없는 메트릭 수집TM을 이용하면 인덱스 비용과 수집 비용이 분리됩니다. 따라서 모든 데이터(모두 수집)를 Datadog에 계속 전송하면서 Datadog 플랫폼에서 쿼리 가능한 태그 허용 목록을 지정할 수 있습니다. 메트릭 구성에 따라 Datadog에서 수집하는 데이터 볼륨과 이보다 적은 나머지 인덱싱된 데이터 볼륨이 다르므로 Usage 페이지와 Metrics Summary 페이지에 값이 다른 볼륨 두 개가 따로 표시됩니다.

- **수집된 커스텀 메트릭**: 수집 태그 전체(코드를 통해 전송됨)를 기준으로 한 커스텀 메트릭 원 볼륨입니다.
- **인덱스된 커스텀 메트릭**: Datadog 플랫폼에서 쿼리 가능한 커스텀 메트릭 볼륨(모든 제한없는 메트릭 수집TM 설정 기준)입니다.

**참고: 설정된 메트릭만 수집된 커스텀 메트릭 볼륨에 기여하게 됩니다.** 제한없는 메트릭 수집TM으로 메트릭이 설정되지 않은 경우, 인덱스된 커스텀 메트릭 볼륨에 대해서만 요금이 부과됩니다.

#### 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭 요금이 청구되는 시기는 언제인가요?
제한 없는 메트릭TM으로 구성되지 않은 메트릭의 경우 인덱싱된 커스텀 메트릭 요금이 부과됩니다.

|                                      | 인덱싱된 커스텀 메트릭<br>(월별 시간당 평균 커스텀 메트릭 개수 기반)                                        |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 계정 할당                    | - 프로: 호스트당 인덱싱된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 인덱싱된 커스텀 메트릭 200개                             |
| 사용량이 계정 할당량을 초과할 경우 | 계정 할당량을 기준으로 인덱싱된 커스텀 메트릭 개수가 100개를 초과할 때마다 현재 계약에 명시된 금액이 부과됩니다. |

제한 없는 메트릭TM으로 구성된 메트릭의 경우(태그/집계 구성됨) 수집된 커스텀 메트릭과 인덱싱된 커스텀 메트릭 요금이 부과됩니다.

|                                      | 수집된 커스텀 메트릭                                                                           | 인덱스된 커스텀 메트릭                                                                                                        |
|--------------------------------------|---------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 계정 할당                    | - 프로: 호스트당 수집된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 수집된 커스텀 메트릭 200개 | - Pro: 호스트당 인덱싱된 커스텀 메트릭 100개 <br>- 엔터프라이즈: 호스트당 인덱싱된 커스텀 메트릭 200개                               |
| 사용량이 계정 할당량을 초과할 경우 | 계정 할당량을 기준으로 수집된 커스텀 메트릭 100개를 초과할 때마다 요금 $0.10가 부과됩니다.                   | 계정 할당량을 기준으로 인덱싱된 커스텀 메트릭 개수가 100개를 초과할 때마다 현재 계약에 명시된 금액이 부과됩니다. |

예를 들어 `request.Latency` 메트릭과 연결된 `endpoint`와 `status` 태그만 유지하고 싶다고 합시다. 그러면 다음 고유한 태그 조합 세 개가 생성됩니다.

- `endpoint:X`, `status:200`
- `endpoint:X`, `status:400`
- `endpoint:Y`, `status:200`

[DISTRIBUTION 메트릭][1]의 커스텀 메트릭 개수는 메트릭 이름 및 태그 값의 고유 조합 개수의 5배입니다. 사용자 정의 태그 때문에 `request.Latency`에서는 총 **5\*3 = 15개의 인덱싱된 커스텀 메트릭**을 보고하게 됩니다. 이 메트릭에서 전송한 원래 태그에 기반해 원 `request.Latency`의 **수집된** 커스텀 메트릭 볼륨은 **수집된 커스텀 메트릭 20개**입니다.

[제한 없는 메트릭TM][2]에 대해 더 알아보기

[1]: /ko/metrics/types/?tab=distribution#definition
[2]: /ko/metrics/metrics-without-limits
{{% /tab %}}
{{< /tabs >}}

## 커스텀 메트릭 추적

관리 사용자([Datadog Admin 역할이 있는 사용자][7])는 **수집된** 커스텀 메트릭과 **인덱싱된** 커스텀 메트릭의 월별 시간당 평균 개수를 볼 수 있습니다. [사용량 상세 페이지][8]에 있는 상위 커스텀 메트릭 표에서는 **인덱싱된** 커스텀 메트릭의 평균 개수를 확인할 수 있습니다. 자세한 내용은 [사용량 상세 정보][9] 설명서를 참고하세요.

특정 메트릭 이름의 커스텀 메트릭 개수를 실시간으로 추적하려면 [Metric Summary 페이지][10]에서 메트릭 이름을 클릭하세요. 메트릭 상세 측면 패널에서 **수집된** 커스텀 메트릭과 **인덱싱된** 커스텀 메트릭의 개수를 확인할 수 있습니다.
{{< img src="account_management/billing/custom_metrics/mwl_sidepanel_ingested.jpg" alt="Metrics Summary 측면 패널" style="width:80%;">}}


## 할당량

내 Datadog 요금 플랜에 따라 **수집된** 커스텀 메트릭과 **인덱싱된** 커스텀 메트릭 할당량 개수가 결정됩니다.

- 프로: 호스트당 수집된 커스텀 메트릭 100개, 호스트당 인덱싱된 커스텀 메트릭 100개
- 엔터프라이즈: 호스트당 수집된 커스텀 메트릭 200개, 호스트당 인덱싱된 커스텀 메트릭 200개

인프라스트럭처 전체에서 할당량을 셉니다. 예를 들어 프로 플랜으로 호스트 3개를 사용하고 있는 경우, 인덱싱된 커스텀 메트릭 300개가 할당됩니다. 이 인덱싱된 커스텀 메트릭 300개를 각 호스트에 균등하게 분할할 수 있고, 또는 호스트 한 개에서 인덱싱된 메트릭 300개를 모두 사용할 수도 있습니다. 아래 그래프에서는  이 예시를 사용해 할당된 커스텀 메트릭 개수를 초과하지 않는 시나리오를 나타냅니다.

{{< img src="account_management/billing/custom_metrics/host_custom_metrics.png" alt="커스텀 메트릭 할당량" >}}

월별 시간당 평균 커스텀 메트릭 개수(지불한 호스트 내)에 따라 청구용 인덱싱 커스텀 메트릭 개수가 결정됩니다. 제한 없는 메트릭TM을 사용해 메트릭을 구성한 경우에만 청구용 수집된 커스텀 메트릭 개수가 증가합니다. 추가 커스텀 메트릭 패키지를 구매하려면 [영업팀][11]이나 담당 [고객 성공][12] 매니저에게 문의하세요.

## 트러블슈팅

기술적 지원이 필요한 경우에는 [Datadog 지원팀][13]에 문의하세요.

요금 청구와 관련한 질문이 있을 경우에는 담당 [고객 성공][12] 매니저에게 문의하세요.

[1]: /ko/integrations/
[2]: /ko/metrics/custom_metrics/
[3]: /ko/metrics/custom_metrics/dogstatsd_metrics_submission/
[4]: /ko/metrics/custom_metrics/agent_metrics_submission/
[5]: /ko/metrics/metrics-without-limits
[6]: /ko/metrics/types/#metric-types
[7]: /ko/account_management/users/default_roles/
[8]: https://app.datadoghq.com/billing/usage
[9]: /ko/account_management/plan_and_usage/usage_details/
[10]: https://app.datadoghq.com/metric/summary
[11]: mailto:sales@datadoghq.com
[12]: mailto:success@datadoghq.com
[13]: /ko/help/
[14]: /ko/metrics/custom_metrics/#standard-integrations