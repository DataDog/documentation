---
description: 데이터베이스 모니터링이 수집한 데이터에 대한 정보
further_reading: null
title: 수집된 데이터베이스 모니터링 데이터
---
{{< site-region region="gov" >}}
해당 지역에서는 데이터베이스 모니터링이 지원되지 않습니다
{{< /site-region >}}

데이터베이스 모니터링을 설정할 때 에이전트는 해당 통합 설명서에 설명된 모든 메트릭을 수집합니다. 여기에는 데이터베이스 모니터링이 사용하는 쿼리 성능 메트릭을 비롯해 데이터베이스 상태, 이벤트, 폴오버, 연결, 버퍼 풀 등의 메트릭이 포함됩니다.

이러한 메트릭은 표준 Datadog 메트릭으로, [대시보드][1]. [모니터][2], [노트북][3] 또는 메트릭을 사용하는 어느 곳에서나 사용할 수 있습니다.

수집된 메트릭에 대한 전체 목록을 보려면 데이터베이스 제품에 대한 통합 **수집된 데이터** 설명서를 참조하세요. 

{{< partial name="dbm/dbm-data-collected" >}}
<p></p>

데이터베이스 모니터링 보기에 사용되는 메트릭은 주로 다음과 같습니다.
- **MySQL**: `mysql.queries.*`
- **Postgres**: `postgresql.queries.*`
- **SQL 서버**: `sqlserver.queries.*`

## 표준화된 쿼리

중복된 정보를 제거하고 성능 트렌드를 계속 확인하려면 데이터베이스 모니터링에서 파라미터를 난독화하는 방법으로 각기 다른 파라미터로 동일한 쿼리를 그룹화해야 합니다. 이러한 쿼리 그룹은 표준화된 쿼리라고 불리며 때론 쿼리 다이제스트라고 명명되기도 합니다. 엄격한 쿼리 볼륨 제한을 두는 대신 Datadog는 데이터베이스 호스트당 200개의 표준화된 쿼리를 지원합니다. 이 프로세스는 또한 어떠한 민감한 데이터도 관측 가능성 도구로 유출되지 않도록 보장합니다.

예를 들어 ID별로 동일한 표에서 데이터를 가져오는 많은 쿼리를 확인할 수 있습니다.

```sql
SELECT * FROM customers WHERE id = 13345;
SELECT * FROM customers WHERE id = 24435;
SELECT * FROM customers WHERE id = 34322;
```

이러한 쿼리는 함께 표준화된 쿼리로 표시되어 `?`를 통해 파라미터를 대체합니다.

```sql
SELECT * FROM customers WHERE id = ?
```

여러 파라미터를 포함하는 쿼리는 다음 패턴을 따릅니다.

```sql
SELECT * FROM timeperiods WHERE start >= '2022-01-01' AND end <= '2022-12-31' AND num = 5
```

특정 파라미터를 포함하는 위 쿼리는 아래처럼 난독화된 버전이 됩니다.

```sql
SELECT * FROM timeperiods WHERE start >= ? AND end <= ? AND num = ?
```

## 민감한 정보

데이터베이스 모니터링 에이전트가 쿼리를 표준화하므로 Datadog로 전송되는 모든 쿼리 바인드 파라미터를 난독화합니다. 그러므로 데이터베이스에 저장된 암호, 개인식별정보(PII) 및 기타 잠재적으로 민감한 정보는 쿼리 메트릭, 쿼리 샘플과 설명 창에서 보이지 않습니다.

하지만 일반적인 데이터 소스 위험이 몇몇 존재합니다.

### 데이터베이스 스키마

표 이름, 열 이름, 인덱스, 데이터베이스 이름, 기타 스키마가 민감한 정보를 포함하는 경우, 이러한 데이터는 난독화되지 않습니다. 데이터베이스 스키마가 민감한 정보로 간주되는 경우는 일반적이지 않지만 난독화는 이러한 데이터 유형에 적용되지 않으니 참고하세요.

### 데이터베이스 로그

데이터베이스에서 Datadog에 로그를 전송하는 경우 일부 로그는 쿼리 바인드 파라미터를 포함하는 전체 SQL 쿼리 텍스트를 포함할 수 있음을 기억하세요. 조직 요건과 일치하는 [로그 보안 규칙][4]을 검토하고 적용하세요.

### 쿼리 메모

SQL 쿼리 메모는 에이전트가 수집하여 난독화를 거치지 않고 Datadog에 전송할 수 있습니다. SQL 쿼리 메모는 일반적으로 민감한 데이터를 포함하지 않지만 쿼리 SQL에서 추출한 메모는 난독화를 거치지 않습니다.

## 추적되는 쿼리

Datadog 데이터베이스 모니터링은 호스트에서 실행된 총 시간별로 상위 200개 표준화된 쿼리에 대해 쿼리당 메트릭을 수집합니다. 이러한 제한은 각 수집 간격(기본적으로 10초)에만 적용되므로 장기적으로 총 추적된 쿼리 수는 설정된 한도를 초과할 수 있습니다.

쿼리 샘플은 고유한 표준화된 쿼리 수에 대한 제한이 없지만 샘플링은 느리거나 빈도수가 높은 쿼리로 편향될 수 있습니다. 쿼리 샘플을 선택하는 것이 가능하지만 연결된 쿼리 메트릭이 없습니다. 짧은 기간 동안 쿼리가 느리거나 쿼리 빈도가 높지만 상위 쿼리가 될만큼 충분히 지속되지 않는 경우가 이에 해당합니다.

## 기타 쿼리

_기타 쿼리_는 상위 200개에 나타나지 않는 모든 쿼리 메트릭을 나타냅니다. 한 쿼리가 일정 시간 프레임 동안 상위 쿼리가 될 수 있지만 대부분은 그렇지 않습니다. 특정 쿼리에 대한 메트릭은 별도의 표준화된 쿼리로 수집될 수도 있고 기타 쿼리로 집계될 수 있습니다.


[1]: /ko/dashboards/
[2]: /ko/monitors/
[3]: /ko/notebooks/
[4]: /ko/data_security/logs/