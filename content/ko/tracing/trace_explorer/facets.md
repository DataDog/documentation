---
description: 트레이스 패싯 및 패싯 패널
further_reading:
- link: tracing/trace_explorer/
  tag: 설명서
  text: 트레이스 탐색기에 대해 알아보기
title: 스팬 패싯
---

## 개요

패싯은 스팬의 사용자 정의 태그 및 속성입니다. 이는 [정성적](#qualitative-facets) 및 [정량적](#qualitative-facets-measures) 데이터 분석에 모두 유용합니다. 패싯을 사용하면 [Trace Analytics 모니터][3]와 [대시보드][4] 및 [노트북][5]에 표시되는 APM 쿼리에서 스팬을 조정할 수 있습니다.

[트레이스 탐색기][6]에는 `Status` 및 `Service`와 같은 기본 패싯이 포함되어 있습니다. 트레이스 탐색기의 패싯을 사용하여 다음을 수행할 수 있습니다:

- [검색 및 필터 스팬][1]
- 트레이스 분석 수행
- 스팬이 수집된 후 트러블슈팅 시작

{{< img src="tracing/trace_explorer/facets/facet_panel.png" alt="트레이스 탐색기의 패싯 패널" style="width:90%;">}}

{{< site-region region="us,eu,us3,us5,ap1" >}}

[스팬 검색][1], [스팬에서 메트릭 생성][2] 또는 [보존 필터를 사용하여 스팬 인덱싱][3]에는 [패싯 생성](#creating-facets)이 **필요하지 않습니다**. 이러한 컨텍스트에서 자동 완성 기능은 기존 패싯을 사용하지만 새로 들어오는 스팬과 일치하는 모든 입력도 적용됩니다.

[1]: /ko/tracing/trace_explorer/search
[2]: /ko/tracing/trace_pipeline/generate_metrics
[3]: /ko/tracing/trace_pipeline/trace_retention/#retention-filters

{{< /site-region >}}

### 정성적 패싯

다음과 같은 작업이 필요할 때 질적 패싯을 사용합니다:

- 값에 대해 **관련된 인사이트를 얻습니다**. 예를 들어, 느린 요청이 감지될 때 특정 영역으로 조사 범위를 좁히기 위해 `datacenter` 스팬 태그에 패싯을 만듭니다.
- **고유한 값을 계산합니다**. 예를 들어 특정 리소스를 로드하는 중 오류를 경험한 개별 사용자 수를 확인하려면 `usr.email`에 패싯을 생성하세요.
- 특정 값에 대해 스팬을 자주 **필터링**하세요. 예를 들어 환경 태그에 패싯을 만들어 개발, 스테이징 또는 프로덕션 환경으로 문제 해결의 범위를 좁힐 수 있습니다.<br>

**참고:** 태그 필터링에는 패싯이 필요하지 않지만 조사 중에 자주 사용하는 태그에 대한 패싯을 정의하면 해결 시간을 줄이는 데 도움이 될 수 있습니다.

### 정량적 패싯 (측정값)

다음과 같은 작업이 필요할 때 측정값을 사용합니다:
- 여러 트레이스의 **집계** 값입니다. 예를 들어 Cassandra에서 행 수에 대한 측정값을 만들고 p95 또는 요청된 파일 크기 합계당 최상위 참조자를 확인합니다.
- 예를 들어 쇼핑 카트 값이 1000달러를 초과하는 경우 **최고 지연 시간 서비스**를 수치로 계산합니다.
- **연속 값 필터링**, 예를 들어 비디오 스트림의 각 페이로드 청크의 바이트 크기입니다.

#### 측정값 유형

측정값은 동등한 기능에 대해 (긴) 정수 또는 이중 값을 갖습니다.

#### 단위

쿼리 시간 및 표시 시간의 크기 차수를 처리하기 위한 측정 지원 단위(**시간**(초) 또는 **크기**(바이트)). 단위는 필드가 아닌 측정값 자체의 속성입니다.

예를 들어, 나노초 단위의 `duration` 측정값을 고려할 때 `service:A`로부터의 스팬에 `duration:1000`이 있다고 하면 `1000 milliseconds`를 의미합니다. `service:B`로부터의 스팬에 `duration:500`이 있다고 하면 `500 microseconds`를 의미합니다. `duration:>20ms`을 사용하여 두 서비스 모두에서 스팬 태그를 한 번에 일관되게 쿼리하세요. 쿼리에 대한 자세한 정보는 [쿼리 구문][1]을 참조하세요.

## 패싯 패널

검색창은 데이터를 필터링하고 그룹화하기 위한 가장 포괄적인 상호 작용 세트를 제공합니다. 그러나 대부분의 경우 패싯 패널은 데이터를 탐색하는 간단한 방법입니다. 현재 쿼리 범위에 대한 콘텐츠 요약을 보려면 패싯을 엽니다.

검색창과 URL은 패싯 패널에서 선택한 항목을 자동으로 반영합니다.

- **패싯(정성적)**은 고유 값의 상위 목록과 각 값과 일치하는 스팬 수를 제공합니다.
- **측정값(정량적)**은 최소값과 최대값을 나타내는 슬라이더와 함께 제공됩니다. 슬라이더 또는 입력 수치를 사용하여 검색 쿼리의 범위를 다른 경계로 지정합니다.

### 패싯 숨기기

조직에는 트레이스를 사용하는 여러 팀에서 사용 사례를 처리할 수 있는 다양한 패싯이 있습니다. 특정 문제 해결 상황에서는 이러한 패싯 중 일부만 유용할 가능성이 높습니다.

문제 해결과 가장 관련이 높은 패싯만 유지하려면 일반적으로 필요하지 않은 **패싯을 숨기세요**.

{{< img src="tracing/trace_explorer/facets/hide_facets.png" alt="패싯 숨기기" style="width:30%;">}}

필요한 경우 숨겨진 패싯이 패싯 검색에 계속 표시됩니다([필터 패싯](#filtering-facets) 섹션 참조). 패싯 검색에서 숨겨진 패싯의 숨기기를 해제합니다.

{{< img src="logs/explorer/facet/unhide_facet.png" alt="패싯 숨기기 해제" style="width:30%;">}}

#### 숨겨진 패싯과 팀원

패싯을 숨기는 것은 문제 해결 상황에 따라 다르며 저장된 보기를 업데이트하지 않는 한 팀원의 보기에 영향을 주지 않습니다. 숨겨진 패싯은 저장된 보기에 저장된 컨텍스트의 일부입니다.

### 패싯 그룹화

패싯은 패싯 목록에서 의미 있는 테마로 그룹화됩니다. 패싯에 대한 그룹을 할당하거나 재할당하면 패싯 목록에만 영향을 미치며 검색이나 분석에는 영향을 미치지 않습니다.

{{< img src="tracing/trace_explorer/facets/group_facets.png" alt="패싯 그룹화" style="width:30%;">}}

### 패싯 필터링

패싯 패널의 검색 패싯 상자를 사용하면 전체 패싯 목록의 범위를 지정하고 상호 작용해야 하는 패싯으로 더 빠르게 이동할 수 있습니다. 검색 패싯은 패싯 표시 이름과 필드 이름을 사용하여 결과 범위를 지정합니다.

{{< img src="tracing/trace_explorer/facets/filter_facets.png" alt="패싯 검색" style="width:30%;">}}

## 패싯 생성

스팬 속성/태그에 패싯을 생성하는 것은 스팬 검색을 위한 필수 단계가 아닙니다. 패싯은 특정 스팬 속성에 의미 있는 설명을 추가하려는 경우 또는 스팬 목록의 왼쪽에 있는 패싯 목록에 스팬 속성 값을 표시하려는 경우에 유용합니다.

### 트레이스 사이드 패널에서 패싯 생성

패싯을 생성하는 가장 쉬운 방법은 대부분의 패싯 세부 정보(예: 필드 경로 및 기본 유형)가 미리 채워지도록 트레이스 사이드 패널에서 패싯을 추가하는 것입니다. [트레이스 탐색기][1]에서 패싯을 생성할 필드가 포함된 관심 있는 스팬으로 이동합니다. 목록에서 스팬을 선택하여 이 스팬에 대한 트레이스 사이드 패널을 엽니다. 원하는 필드(스팬 태그 또는 인프라스트럭처 태그)를 클릭하고 거기에서 패싯을 생성합니다.

- 필드에 숫자 값이 있는 경우 패싯 또는 측정값을 만들 수 있습니다.
- 필드에 문자열 값이 있는 경우 패싯 생성만 사용할 수 있습니다.

{{< img src="tracing/trace_explorer/facets/create_facet.png" alt="태그에서 패싯 추가" style="width:50%;">}}

### 패싯 목록에서 패싯 생성

원하는 필드가 있는 스팬을 찾는 것이 옵션이 아닌 경우 **+ Add**를 클릭하여 패싯 패널에서 직접 패싯을 생성하세요.

이 패싯의 기본 필드(키) 이름을 정의합니다:

- 인프라스트럭처 태그에 태그 키 이름을 사용합니다.
- 스팬 속성에 속성 경로를 `@` 접두사와 함께 사용합니다.

현재 보기의 스팬에서 콘텐츠를 기반으로 한 자동 완성은 적절한 필드 이름을 정의하는 데 도움이 됩니다. 그러나 여기에서는 거의 모든 값을 사용할 수 있으며, 특히 Datadog에서 수신한 일치하는 스팬이 아직 없는 경우에는 더욱 그렇습니다.

{{< img src="tracing/trace_explorer/facets/create_facet_from_scratch.png" alt="처음부터 패싯 추가" style="width:30%;">}}

## 참고 자료

{{< partial name="whats-next/whats-next.html" >}}

[1]: /ko/tracing/trace_explorer/query_syntax/
[2]: /ko/tracing/trace_explorer/group/
[3]: /ko/monitors/types/apm/?tab=analytics
[4]: /ko/dashboards/widgets/
[5]: /ko/notebooks/
[6]: /ko/tracing/trace_explorer/