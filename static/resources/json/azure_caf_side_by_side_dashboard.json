{"title":"Azure Cloud Adoption Framework (CAF)","description":"## Track the Health of your Migration to Azure Landing Zones\n\nThis dashboard will summarize the health of both your original environment and your new Azure landing zone. The layout of each KPI is set side by side so you can watch the status of your new landing zone as the migration progresses.\n\nThe dashboard can be used as an overall summary, or can be used by individual teams or service owners by scoping down the template variables at the top. ","widgets":[{"id":3849107189661700,"definition":{"title":"Original Environement","type":"group","background_color":"white","show_title":true,"layout_type":"ordered","widgets":[{"id":8486351206016412,"definition":{"type":"note","content":"Servers","background_color":"blue","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":6,"height":1}},{"id":4782028175433956,"definition":{"title":"Agents per env","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.agent.running{!cloud_provider:azure,$service,$env,$team,$owner} by {env}","aggregator":"last"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar"}]},"layout":{"x":0,"y":1,"width":2,"height":3}},{"id":4415276774901340,"definition":{"title":"CPU per env in Non-Azure environments","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{!cloud_provider:azure,$service,$env,$team,$owner} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["env"],"scope":["!cloud_provider:azure"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":2,"y":1,"width":4,"height":3}},{"id":8976691794048510,"definition":{"type":"note","content":"Services","background_color":"pink","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":4,"width":6,"height":1}},{"id":5997014933567936,"definition":{"title":"Application Requests with OK responses","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"anomalies(query1, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.requests.request.hits.by_http_status{NOT cloud_provider:azure AND (http.status_class:2xx OR http.status_class:3xx) AND $service AND $env AND $team AND $owner} by {http.status_class}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":5,"width":3,"height":2}},{"id":2146883861789340,"definition":{"title":"4xx or 5xx Responses","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"anomalies(query1, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.requests.request.hits.by_http_status{NOT cloud_provider:azure AND (http.status_class:4xx OR http.status_class:5xx) AND $service AND $env AND $team AND $owner} by {http.status_class}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":5,"width":3,"height":2}},{"id":6181522012639896,"definition":{"title":"Application Errors","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"alias":"errors","formula":"anomalies(query1, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.requests.request.errors{!cloud_provider:azure,$service,$env,$team,$owner}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":3,"height":2}},{"id":8776351960187454,"definition":{"title":"Application Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"alias":"avg","formula":"anomalies(query1, 'basic', 2)"},{"alias":"p75","formula":"anomalies(query3, 'basic', 2)"},{"alias":"p90","formula":"anomalies(query4, 'basic', 2)"},{"alias":"p95","formula":"anomalies(query5, 'basic', 2)"},{"alias":"p99","formula":"anomalies(query6, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:trace.requests.request{!cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query3","query":"p75:trace.requests.request{!cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query4","query":"p90:trace.requests.request{!cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query5","query":"p95:trace.requests.request{!cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query6","query":"p99:trace.requests.request{!cloud_provider:azure,$service,$env,$team,$owner}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":7,"width":3,"height":2}},{"id":5659849934747484,"definition":{"type":"note","content":"Log Events","background_color":"green","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":9,"width":6,"height":1}},{"id":8306940037249564,"definition":{"title":"Non-OK Log Events","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"response_format":"scalar","formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"logs","name":"query1","search":{"query":"-status:(info OR ok OR notice) -tags:(cloud_provider:azure) $service $env $team $owner"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"aggregation":"count","order":"desc"}}]}],"conditional_formats":[{"comparator":">","palette":"white_on_red","value":0}]}]},"layout":{"x":0,"y":10,"width":2,"height":2}},{"id":8059819208560690,"definition":{"title":"Non-OK Log Events","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"logs","name":"query1","search":{"query":"-status:(info OR ok OR notice) -tags:(cloud_provider:azure) $service $env $team $owner"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"aggregation":"count","order":"desc"}}]}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":10,"width":4,"height":2}},{"id":6785796818071134,"definition":{"type":"note","content":"Alerts","background_color":"vivid_pink","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":12,"width":6,"height":1}},{"id":397557664460186,"definition":{"title_size":"13","title_align":"left","type":"manage_status","summary_type":"monitors","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"show_last_triggered":false,"show_priority":false,"query":"-tag:(cloud_provider:azure) $service $env $team $owner","sort":"status,asc","count":50,"start":0},"layout":{"x":0,"y":13,"width":6,"height":4}}]},"layout":{"x":0,"y":0,"width":6,"height":19}},{"id":6005880390996616,"definition":{"title":"Azure Landing Zones","type":"group","background_color":"white","show_title":true,"layout_type":"ordered","widgets":[{"id":6422790498307206,"definition":{"type":"note","content":"Servers","background_color":"blue","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":6,"height":1}},{"id":6666417289505478,"definition":{"title":"Agents per env","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.agent.running{cloud_provider:azure,$service,$env,$team,$owner} by {env}","aggregator":"last"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar"}]},"layout":{"x":0,"y":1,"width":2,"height":3}},{"id":7581474051496698,"definition":{"title":"CPU per Env and Landing Zone","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{cloud_provider:azure,$service,$env,$team,$owner} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["env"],"scope":["cloud_provider:azure"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":2,"y":1,"width":4,"height":3}},{"id":8383647467478134,"definition":{"type":"note","content":"Services","background_color":"pink","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":4,"width":6,"height":1}},{"id":7996317237514994,"definition":{"title":"Application Requests with OK responses","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"anomalies(query1, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.requests.request.hits.by_http_status{cloud_provider:azure AND (http.status_class:2xx OR http.status_class:3xx) AND $service AND $env AND $team AND $owner} by {http.status_class}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":5,"width":3,"height":2}},{"id":5532686041774104,"definition":{"title":"4xx or 5xx Responses","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"anomalies(query1, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.requests.request.hits.by_http_status{cloud_provider:azure AND (http.status_class:4xx OR http.status_class:5xx) AND $service AND $env AND $team AND $owner} by {http.status_class}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":5,"width":3,"height":2}},{"id":8779035528700746,"definition":{"title":"Application Errors","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"alias":"errors","formula":"anomalies(query1, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:trace.requests.request.errors{cloud_provider:azure,$service,$env,$team,$owner}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":3,"height":2}},{"id":7433817752857106,"definition":{"title":"Application Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"alias":"avg","formula":"anomalies(query1, 'basic', 2)"},{"alias":"p75","formula":"anomalies(query3, 'basic', 2)"},{"alias":"p90","formula":"anomalies(query4, 'basic', 2)"},{"alias":"p95","formula":"anomalies(query5, 'basic', 2)"},{"alias":"p99","formula":"anomalies(query6, 'basic', 2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:trace.requests.request{cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query3","query":"p75:trace.requests.request{cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query4","query":"p90:trace.requests.request{cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query5","query":"p95:trace.requests.request{cloud_provider:azure,$service,$env,$team,$owner}"},{"data_source":"metrics","name":"query6","query":"p99:trace.requests.request{cloud_provider:azure,$service,$env,$team,$owner}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":3,"y":7,"width":3,"height":2}},{"id":8549332044764196,"definition":{"type":"note","content":"Log Events","background_color":"green","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":9,"width":6,"height":1}},{"id":8238418945193082,"definition":{"title":"Non-OK Log Events","title_size":"16","title_align":"left","time":{},"type":"toplist","requests":[{"response_format":"scalar","formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"logs","name":"query1","search":{"query":"-status:(info OR ok OR notice) tags:(cloud_provider:azure) $service $env $team $owner"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"aggregation":"count","order":"desc"}}]}],"conditional_formats":[{"comparator":">","palette":"white_on_red","value":0}]}]},"layout":{"x":0,"y":10,"width":2,"height":2}},{"id":7697702685490196,"definition":{"title":"Non-OK Log Events","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"logs","name":"query1","search":{"query":"-status:(info OR ok OR notice) tags:(cloud_provider:azure) $service $env $team $owner"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"aggregation":"count","order":"desc"}}]}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","include_zero":true,"label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":10,"width":4,"height":2}},{"id":5508929413722420,"definition":{"type":"note","content":"Alerts","background_color":"vivid_pink","font_size":"24","text_align":"center","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":12,"width":6,"height":1}},{"id":7446196847227188,"definition":{"title_size":"13","title_align":"left","type":"manage_status","summary_type":"monitors","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"show_last_triggered":false,"show_priority":false,"query":"tag:(cloud_provider:azure) $service $env $team $owner","sort":"status,asc","count":50,"start":0},"layout":{"x":0,"y":13,"width":6,"height":4}}]},"layout":{"x":6,"y":0,"width":6,"height":19}}],"template_variables":[{"name":"service","default":"*","prefix":"service","available_values":[]},{"name":"env","default":"*","prefix":"env","available_values":[]},{"name":"team","default":"*","prefix":"team","available_values":[]},{"name":"owner","default":"*","prefix":"owner","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"fixed","id":"nzv-h7p-kqu"}